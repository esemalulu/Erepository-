var exports={};var global=this;var require=function(name){switch(name){case"./sax":mysax(exports,require);return exports;break;case"./dom":mydom(exports,require);return exports;break}};var console=Object.create(Log);console.warn=console.w;console.info=console.a;console.error=console.e;console.log=console.d;function mysax(exports,require){var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"·̀-ͯ\\ux203F-⁀]");var tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$");var S_TAG=0;var S_ATTR=1;var S_ATTR_S=2;var S_EQ=3;var S_V=4;var S_E=5;var S_S=6;var S_C=7;function XMLReader(){}XMLReader.prototype={parse:function(source,defaultNSMap,entityMap){var domBuilder=this.domBuilder;domBuilder.startDocument();_copy(defaultNSMap,defaultNSMap={});parse(source,defaultNSMap,entityMap,domBuilder,this.errorHandler);domBuilder.endDocument()}};function parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){function fixedFromCharCode(code){if(code>65535){code-=65536;var surrogate1=55296+(code>>10),surrogate2=56320+(code&1023);return String.fromCharCode(surrogate1,surrogate2)}else{return String.fromCharCode(code)}}function entityReplacer(a){var k=a.slice(1,-1);if(k in entityMap){return entityMap[k]}else if(k.charAt(0)==="#"){return fixedFromCharCode(parseInt(k.substr(1).replace("x","0x")))}else{errorHandler.error("entity not found:"+a);return a}}function appendText(end){var xt=source.substring(start,end).replace(/&#?\w+;/g,entityReplacer);locator&&position(start);domBuilder.characters(xt,0,end-start);start=end}function position(start,m){while(start>=endPos&&(m=linePattern.exec(source))){startPos=m.index;endPos=startPos+m[0].length;locator.lineNumber++}locator.columnNumber=start-startPos+1}var startPos=0;var endPos=0;var linePattern=/.+(?:\r\n?|\n)|.*$/g;var locator=domBuilder.locator;var parseStack=[{currentNSMap:defaultNSMapCopy}];var closeMap={};var start=0;while(true){var i=source.indexOf("<",start);if(i<0){if(!source.substr(start).match(/^\s*$/)){var doc=domBuilder.document;var text=doc.createTextNode(source.substr(start));doc.appendChild(text);domBuilder.currentElement=text}return}if(i>start){appendText(i)}switch(source.charAt(i+1)){case"/":var end=source.indexOf(">",i+3);var tagName=source.substring(i+2,end);var config=parseStack.pop();var localNSMap=config.localNSMap;if(config.tagName!=tagName){errorHandler.fatalError("end tag name: "+tagName+" is not match the current start tagName:"+config.tagName)}domBuilder.endElement(config.uri,config.localName,tagName);if(localNSMap){for(var prefix in localNSMap){domBuilder.endPrefixMapping(prefix)}}end++;break;case"?":locator&&position(i);end=parseInstruction(source,i,domBuilder);break;case"!":locator&&position(i);end=parseDCC(source,i,domBuilder,errorHandler);break;default:try{locator&&position(i);var el=new ElementAttributes;var end=parseElementStartPart(source,i,el,entityReplacer,errorHandler);var len=el.length;if(len&&locator){var backup=copyLocator(locator,{});for(var i=0;i<len;i++){var a=el[i];position(a.offset);a.offset=copyLocator(locator,{})}copyLocator(backup,locator)}if(!el.closed&&fixSelfClosed(source,end,el.tagName,closeMap)){el.closed=true;if(!entityMap.nbsp){errorHandler.warning("unclosed xml attribute")}}appendElement(el,domBuilder,parseStack);if(el.uri==="http://www.w3.org/1999/xhtml"&&!el.closed){end=parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)}else{end++}}catch(e){errorHandler.error("element parse error: "+e);end=-1}}if(end<0){appendText(i+1)}else{start=end}}}function copyLocator(f,t){t.lineNumber=f.lineNumber;t.columnNumber=f.columnNumber;return t}function parseElementStartPart(source,start,el,entityReplacer,errorHandler){var attrName;var value;var p=++start;var s=S_TAG;while(true){var c=source.charAt(p);switch(c){case"=":if(s===S_ATTR){attrName=source.slice(start,p);s=S_EQ}else if(s===S_ATTR_S){s=S_EQ}else{throw new Error("attribute equal must after attrName")}break;case"'":case'"':if(s===S_EQ){start=p+1;p=source.indexOf(c,start);if(p>0){value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);el.add(attrName,value,start-1);s=S_E}else{throw new Error("attribute value no end '"+c+"' match")}}else if(s==S_V){value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);el.add(attrName,value,start);errorHandler.warning('attribute "'+attrName+'" missed start quot('+c+")!!");start=p+1;s=S_E}else{throw new Error('attribute value must after "="')}break;case"/":switch(s){case S_TAG:el.setTagName(source.slice(start,p));case S_E:case S_S:case S_C:s=S_C;el.closed=true;case S_V:case S_ATTR:case S_ATTR_S:break;default:throw new Error("attribute invalid close char('/')")}break;case"":errorHandler.error("unexpected end of input");case">":switch(s){case S_TAG:el.setTagName(source.slice(start,p));case S_E:case S_S:case S_C:break;case S_V:case S_ATTR:value=source.slice(start,p);if(value.slice(-1)==="/"){el.closed=true;value=value.slice(0,-1)}case S_ATTR_S:if(s===S_ATTR_S){value=attrName}if(s==S_V){errorHandler.warning('attribute "'+value+'" missed quot(")!!');el.add(attrName,value.replace(/&#?\w+;/g,entityReplacer),start)}else{errorHandler.warning('attribute "'+value+'" missed value!! "'+value+'" instead!!');el.add(value,value,start)}break;case S_EQ:throw new Error("attribute value missed!!")}return p;case"":c=" ";default:if(c<=" "){switch(s){case S_TAG:el.setTagName(source.slice(start,p));s=S_S;break;case S_ATTR:attrName=source.slice(start,p);s=S_ATTR_S;break;case S_V:var value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);errorHandler.warning('attribute "'+value+'" missed quot(")!!');el.add(attrName,value,start);case S_E:s=S_S;break}}else{switch(s){case S_ATTR_S:errorHandler.warning('attribute "'+attrName+'" missed value!! "'+attrName+'" instead!!');el.add(attrName,attrName,start);start=p;s=S_ATTR;break;case S_E:errorHandler.warning('attribute space is required"'+attrName+'"!!');case S_S:s=S_ATTR;start=p;break;case S_EQ:s=S_V;start=p;break;case S_C:throw new Error("elements closed character '/' and '>' must be connected to")}}}p++}}function appendElement(el,domBuilder,parseStack){var tagName=el.tagName;var localNSMap=null;var currentNSMap=parseStack[parseStack.length-1].currentNSMap;var i=el.length;while(i--){var a=el[i];var qName=a.qName;var value=a.value;var nsp=qName.indexOf(":");if(nsp>0){var prefix=a.prefix=qName.slice(0,nsp);var localName=qName.slice(nsp+1);var nsPrefix=prefix==="xmlns"&&localName}else{localName=qName;prefix=null;nsPrefix=qName==="xmlns"&&""}a.localName=localName;if(nsPrefix!==false){if(localNSMap==null){localNSMap={};_copy(currentNSMap,currentNSMap={})}currentNSMap[nsPrefix]=localNSMap[nsPrefix]=value;a.uri="http://www.w3.org/2000/xmlns/";domBuilder.startPrefixMapping(nsPrefix,value)}}var i=el.length;while(i--){a=el[i];var prefix=a.prefix;if(prefix){if(prefix==="xml"){a.uri="http://www.w3.org/XML/1998/namespace"}if(prefix!=="xmlns"){a.uri=currentNSMap[prefix]}}}var nsp=tagName.indexOf(":");if(nsp>0){prefix=el.prefix=tagName.slice(0,nsp);localName=el.localName=tagName.slice(nsp+1)}else{prefix=null;localName=el.localName=tagName}var ns=el.uri=currentNSMap[prefix||""];domBuilder.startElement(ns,localName,tagName,el);if(el.closed){domBuilder.endElement(ns,localName,tagName);if(localNSMap){for(prefix in localNSMap){domBuilder.endPrefixMapping(prefix)}}}else{el.currentNSMap=currentNSMap;el.localNSMap=localNSMap;parseStack.push(el)}}function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){if(/^(?:script|textarea)$/i.test(tagName)){var elEndStart=source.indexOf("</"+tagName+">",elStartEnd);var text=source.substring(elStartEnd+1,elEndStart);if(/[&<]/.test(text)){if(/^script$/i.test(tagName)){domBuilder.characters(text,0,text.length);return elEndStart}text=text.replace(/&#?\w+;/g,entityReplacer);domBuilder.characters(text,0,text.length);return elEndStart}}return elStartEnd+1}function fixSelfClosed(source,elStartEnd,tagName,closeMap){var pos=closeMap[tagName];if(pos==null){pos=closeMap[tagName]=source.lastIndexOf("</"+tagName+">")}return pos<elStartEnd}function _copy(source,target){for(var n in source){target[n]=source[n]}}function parseDCC(source,start,domBuilder,errorHandler){var next=source.charAt(start+2);switch(next){case"-":if(source.charAt(start+3)==="-"){var end=source.indexOf("-->",start+4);if(end>start){domBuilder.comment(source,start+4,end-start-4);return end+3}else{errorHandler.error("Unclosed comment");return-1}}else{return-1}default:if(source.substr(start+3,6)=="CDATA["){var end=source.indexOf("]]>",start+9);domBuilder.startCDATA();domBuilder.characters(source,start+9,end-start-9);domBuilder.endCDATA();return end+3}var matchs=split(source,start);var len=matchs.length;if(len>1&&/!doctype/i.test(matchs[0][0])){var name=matchs[1][0];var pubid=len>3&&/^public$/i.test(matchs[2][0])&&matchs[3][0];var sysid=len>4&&matchs[4][0];var lastMatch=matchs[len-1];domBuilder.startDTD(name,pubid&&pubid.replace(/^(['"])(.*?)\1$/,"$2"),sysid&&sysid.replace(/^(['"])(.*?)\1$/,"$2"));domBuilder.endDTD();return lastMatch.index+lastMatch[0].length}}return-1}function parseInstruction(source,start,domBuilder){var end=source.indexOf("?>",start);if(end){var match=source.substring(start,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(match){var len=match[0].length;domBuilder.processingInstruction(match[1],match[2]);return end+2}else{return-1}}return-1}function ElementAttributes(source){}ElementAttributes.prototype={setTagName:function(tagName){if(!tagNamePattern.test(tagName)){throw new Error("invalid tagName:"+tagName)}this.tagName=tagName},add:function(qName,value,offset){if(!tagNamePattern.test(qName)){throw new Error("invalid attribute:"+qName)}this[this.length++]={qName:qName,value:value,offset:offset}},length:0,getLocalName:function(i){return this[i].localName},getOffset:function(i){return this[i].offset},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function _set_proto_(thiz,parent){thiz.__proto__=parent;return thiz}if(!(_set_proto_({},_set_proto_.prototype)instanceof _set_proto_)){_set_proto_=function(thiz,parent){function p(){}p.prototype=parent;p=new p;for(parent in thiz){p[parent]=thiz[parent]}return p}}function split(source,start){var match;var buf=[];var reg=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;reg.lastIndex=start;reg.exec(source);while(match=reg.exec(source)){buf.push(match);if(match[1])return buf}}if(typeof require=="function"){exports.XMLReader=XMLReader}}function mydom(exports,require){function copy(src,dest){for(var p in src){dest[p]=src[p]}}function _extends(Class,Super){var pt=Class.prototype;if(Object.create){var ppt=Object.create(Super.prototype);pt.__proto__=ppt}if(!(pt instanceof Super)){function t(){}t.prototype=Super.prototype;t=new t;copy(pt,t);Class.prototype=pt=t}if(pt.constructor!=Class){if(typeof Class!="function"){console.error("unknow Class:"+Class)}pt.constructor=Class}}var htmlns="http://www.w3.org/1999/xhtml";var NodeType={};var ELEMENT_NODE=NodeType.ELEMENT_NODE=1;var ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2;var TEXT_NODE=NodeType.TEXT_NODE=3;var CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4;var ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5;var ENTITY_NODE=NodeType.ENTITY_NODE=6;var PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7;var COMMENT_NODE=NodeType.COMMENT_NODE=8;var DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9;var DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10;var DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11;var NOTATION_NODE=NodeType.NOTATION_NODE=12;var ExceptionCode={};var ExceptionMessage={};var INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1);var DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2);var HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3);var WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4);var INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5);var NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6);var NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7);var NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8);var NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9);var INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10);var INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11);var SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12);var INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13);var NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14);var INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(code,message){if(message instanceof Error){var error=message}else{error=this;Error.call(this,ExceptionMessage[code]);this.message=ExceptionMessage[code];if(Error.captureStackTrace)Error.captureStackTrace(this,DOMException)}error.code=code;if(message)this.message=this.message+": "+message;return error}DOMException.prototype=Error.prototype;copy(ExceptionCode,DOMException);function NodeList(){}NodeList.prototype={length:0,item:function(index){return this[index]||null}};function LiveNodeList(node,refresh){this._node=node;this._refresh=refresh;_updateLiveList(this)}function _updateLiveList(list){var inc=list._node._inc||list._node.ownerDocument._inc;if(list._inc!=inc){var ls=list._refresh(list._node);__set__(list,"length",ls.length);copy(ls,list);list._inc=inc}}LiveNodeList.prototype.item=function(i){_updateLiveList(this);return this[i]};_extends(LiveNodeList,NodeList);function NamedNodeMap(){}function _findNodeIndex(list,node){var i=list.length;while(i--){if(list[i]===node){return i}}}function _addNamedNode(el,list,newAttr,oldAttr){if(oldAttr){list[_findNodeIndex(list,oldAttr)]=newAttr}else{list[list.length++]=newAttr}if(el){newAttr.ownerElement=el;var doc=el.ownerDocument;if(doc){oldAttr&&_onRemoveAttribute(doc,el,oldAttr);_onAddAttribute(doc,el,newAttr)}}}function _removeNamedNode(el,list,attr){var i=_findNodeIndex(list,attr);if(i>=0){var lastIndex=list.length-1;while(i<lastIndex){list[i]=list[++i]}list.length=lastIndex;if(el){var doc=el.ownerDocument;if(doc){_onRemoveAttribute(doc,el,attr);attr.ownerElement=null}}}else{throw DOMException(NOT_FOUND_ERR,new Error)}}NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(key){var i=this.length;while(i--){var attr=this[i];if(attr.nodeName==key){return attr}}},setNamedItem:function(attr){var el=attr.ownerElement;if(el&&el!=this._ownerElement){throw new DOMException(INUSE_ATTRIBUTE_ERR)}var oldAttr=this.getNamedItem(attr.nodeName);_addNamedNode(this._ownerElement,this,attr,oldAttr);return oldAttr},setNamedItemNS:function(attr){var el=attr.ownerElement,oldAttr;if(el&&el!=this._ownerElement){throw new DOMException(INUSE_ATTRIBUTE_ERR)}oldAttr=this.getNamedItemNS(attr.namespaceURI,attr.localName);_addNamedNode(this._ownerElement,this,attr,oldAttr);return oldAttr},removeNamedItem:function(key){var attr=this.getNamedItem(key);_removeNamedNode(this._ownerElement,this,attr);return attr},removeNamedItemNS:function(namespaceURI,localName){var attr=this.getNamedItemNS(namespaceURI,localName);_removeNamedNode(this._ownerElement,this,attr);return attr},getNamedItemNS:function(namespaceURI,localName){var i=this.length;while(i--){var node=this[i];if(node.localName==localName&&node.namespaceURI==namespaceURI){return node}}return null}};function DOMImplementation(features){this._features={};if(features){for(var feature in features){this._features=features[feature]}}}DOMImplementation.prototype={hasFeature:function(feature,version){var versions=this._features[feature.toLowerCase()];if(versions&&(!version||version in versions)){return true}else{return false}},createDocument:function(namespaceURI,qualifiedName,doctype){var doc=new Document;doc.doctype=doctype;if(doctype){doc.appendChild(doctype)}doc.implementation=this;doc.childNodes=new NodeList;if(qualifiedName){var root=doc.createElementNS(namespaceURI,qualifiedName);doc.appendChild(root)}return doc},createDocumentType:function(qualifiedName,publicId,systemId){var node=new DocumentType;node.name=qualifiedName;node.nodeName=qualifiedName;node.publicId=publicId;node.systemId=systemId;return node}};function Node(){}Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(newChild,refChild){return _insertBefore(this,newChild,refChild)},replaceChild:function(newChild,oldChild){this.insertBefore(newChild,oldChild);if(oldChild){this.removeChild(oldChild)}},removeChild:function(oldChild){return _removeChild(this,oldChild)},appendChild:function(newChild){return this.insertBefore(newChild,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(deep){return cloneNode(this.ownerDocument||this,this,deep)},normalize:function(){var child=this.firstChild;while(child){var next=child.nextSibling;if(next&&next.nodeType==TEXT_NODE&&child.nodeType==TEXT_NODE){this.removeChild(next);child.appendData(next.data)}else{child.normalize();child=next}}},isSupported:function(feature,version){return this.ownerDocument.implementation.hasFeature(feature,version)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(namespaceURI){var el=this;while(el){var map=el._nsMap;if(map){for(var n in map){if(map[n]==namespaceURI){return n}}}el=el.nodeType==2?el.ownerDocument:el.parentNode}return null},lookupNamespaceURI:function(prefix){var el=this;while(el){var map=el._nsMap;if(map){if(prefix in map){return map[prefix]}}el=el.nodeType==2?el.ownerDocument:el.parentNode}return null},isDefaultNamespace:function(namespaceURI){var prefix=this.lookupPrefix(namespaceURI);return prefix==null}};function _xmlEncoder(c){return c=="<"&&"&lt;"||c==">"&&"&gt;"||c=="&"&&"&amp;"||c=='"'&&"&quot;"||"&#"+c.charCodeAt()+";"}copy(NodeType,Node);copy(NodeType,Node.prototype);function _visitNode(node,callback){if(callback(node)){return true}if(node=node.firstChild){do{if(_visitNode(node,callback)){return true}}while(node=node.nextSibling)}}function Document(){}function _onAddAttribute(doc,el,newAttr){doc&&doc._inc++;var ns=newAttr.namespaceURI;if(ns=="http://www.w3.org/2000/xmlns/"){el._nsMap[newAttr.prefix?newAttr.localName:""]=newAttr.value}}function _onRemoveAttribute(doc,el,newAttr,remove){doc&&doc._inc++;var ns=newAttr.namespaceURI;if(ns=="http://www.w3.org/2000/xmlns/"){delete el._nsMap[newAttr.prefix?newAttr.localName:""]}}function _onUpdateChild(doc,el,newChild){if(doc&&doc._inc){doc._inc++;var cs=el.childNodes;if(newChild){cs[cs.length++]=newChild}else{var child=el.firstChild;var i=0;while(child){cs[i++]=child;child=child.nextSibling}cs.length=i}}}function _removeChild(parentNode,child){var previous=child.previousSibling;var next=child.nextSibling;if(previous){previous.nextSibling=next}else{parentNode.firstChild=next}if(next){next.previousSibling=previous}else{parentNode.lastChild=previous}_onUpdateChild(parentNode.ownerDocument,parentNode);return child}function _insertBefore(parentNode,newChild,nextChild){var cp=newChild.parentNode;if(cp){cp.removeChild(newChild)}if(newChild.nodeType===DOCUMENT_FRAGMENT_NODE){var newFirst=newChild.firstChild;if(newFirst==null){return newChild}var newLast=newChild.lastChild}else{newFirst=newLast=newChild}var pre=nextChild?nextChild.previousSibling:parentNode.lastChild;newFirst.previousSibling=pre;newLast.nextSibling=nextChild;if(pre){pre.nextSibling=newFirst}else{parentNode.firstChild=newFirst}if(nextChild==null){parentNode.lastChild=newLast}else{nextChild.previousSibling=newLast}do{newFirst.parentNode=parentNode}while(newFirst!==newLast&&(newFirst=newFirst.nextSibling));_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){newChild.firstChild=newChild.lastChild=null}return newChild}function _appendSingleChild(parentNode,newChild){var cp=newChild.parentNode;if(cp){var pre=parentNode.lastChild;cp.removeChild(newChild);var pre=parentNode.lastChild}var pre=parentNode.lastChild;newChild.parentNode=parentNode;newChild.previousSibling=pre;newChild.nextSibling=null;if(pre){pre.nextSibling=newChild}else{parentNode.firstChild=newChild}parentNode.lastChild=newChild;_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);return newChild}Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(newChild,refChild){if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){var child=newChild.firstChild;while(child){var next=child.nextSibling;this.insertBefore(child,refChild);child=next}return newChild}if(this.documentElement==null&&newChild.nodeType==1){this.documentElement=newChild}return _insertBefore(this,newChild,refChild),newChild.ownerDocument=this,newChild},removeChild:function(oldChild){if(this.documentElement==oldChild){this.documentElement=null}return _removeChild(this,oldChild)},importNode:function(importedNode,deep){return importNode(this,importedNode,deep)},getElementById:function(id){var rtv=null;_visitNode(this.documentElement,function(node){if(node.nodeType==1){if(node.getAttribute("id")==id){rtv=node;return true}}});return rtv},createElement:function(tagName){var node=new Element;node.ownerDocument=this;node.nodeName=tagName;node.tagName=tagName;node.childNodes=new NodeList;var attrs=node.attributes=new NamedNodeMap;attrs._ownerElement=node;return node},createDocumentFragment:function(){var node=new DocumentFragment;node.ownerDocument=this;node.childNodes=new NodeList;return node},createTextNode:function(data){var node=new Text;node.ownerDocument=this;node.appendData(data);return node},createComment:function(data){var node=new Comment;node.ownerDocument=this;node.appendData(data);return node},createCDATASection:function(data){var node=new CDATASection;node.ownerDocument=this;node.appendData(data);return node},createProcessingInstruction:function(target,data){var node=new ProcessingInstruction;node.ownerDocument=this;node.tagName=node.target=target;node.nodeValue=node.data=data;return node},createAttribute:function(name){var node=new Attr;node.ownerDocument=this;node.name=name;node.nodeName=name;node.localName=name;node.specified=true;return node},createEntityReference:function(name){var node=new EntityReference;node.ownerDocument=this;node.nodeName=name;return node},createElementNS:function(namespaceURI,qualifiedName){var node=new Element;var pl=qualifiedName.split(":");var attrs=node.attributes=new NamedNodeMap;node.childNodes=new NodeList;node.ownerDocument=this;node.nodeName=qualifiedName;node.tagName=qualifiedName;node.namespaceURI=namespaceURI;if(pl.length==2){node.prefix=pl[0];node.localName=pl[1]}else{node.localName=qualifiedName}attrs._ownerElement=node;return node},createAttributeNS:function(namespaceURI,qualifiedName){var node=new Attr;var pl=qualifiedName.split(":");node.ownerDocument=this;node.nodeName=qualifiedName;node.name=qualifiedName;node.namespaceURI=namespaceURI;node.specified=true;if(pl.length==2){node.prefix=pl[0];node.localName=pl[1]}else{node.localName=qualifiedName}return node}};_extends(Document,Node);function Element(){this._nsMap={}}Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(name){return this.getAttributeNode(name)!=null},getAttribute:function(name){var attr=this.getAttributeNode(name);return attr&&attr.value||""},getAttributeNode:function(name){return this.attributes.getNamedItem(name)},setAttribute:function(name,value){var attr=this.ownerDocument.createAttribute(name);attr.value=attr.nodeValue=""+value;this.setAttributeNode(attr)},removeAttribute:function(name){var attr=this.getAttributeNode(name);attr&&this.removeAttributeNode(attr)},appendChild:function(newChild){if(newChild.nodeType===DOCUMENT_FRAGMENT_NODE){return this.insertBefore(newChild,null)}else{return _appendSingleChild(this,newChild)}},setAttributeNode:function(newAttr){return this.attributes.setNamedItem(newAttr)},setAttributeNodeNS:function(newAttr){return this.attributes.setNamedItemNS(newAttr)},removeAttributeNode:function(oldAttr){return this.attributes.removeNamedItem(oldAttr.nodeName)},removeAttributeNS:function(namespaceURI,localName){var old=this.getAttributeNodeNS(namespaceURI,localName);old&&this.removeAttributeNode(old)},hasAttributeNS:function(namespaceURI,localName){return this.getAttributeNodeNS(namespaceURI,localName)!=null},getAttributeNS:function(namespaceURI,localName){var attr=this.getAttributeNodeNS(namespaceURI,localName);return attr&&attr.value||""},setAttributeNS:function(namespaceURI,qualifiedName,value){var attr=this.ownerDocument.createAttributeNS(namespaceURI,qualifiedName);attr.value=attr.nodeValue=value;this.setAttributeNode(attr)},getAttributeNodeNS:function(namespaceURI,localName){return this.attributes.getNamedItemNS(namespaceURI,localName)},getElementsByTagName:function(tagName){return new LiveNodeList(this,function(base){var ls=[];_visitNode(base,function(node){if(node!==base&&node.nodeType==ELEMENT_NODE&&(tagName==="*"||node.tagName==tagName)){ls.push(node)}});return ls})},getElementsByTagNameNS:function(namespaceURI,localName){return new LiveNodeList(this,function(base){var ls=[];_visitNode(base,function(node){if(node!==base&&node.nodeType===ELEMENT_NODE&&node.namespaceURI===namespaceURI&&(localName==="*"||node.localName==localName)){ls.push(node)}});return ls})}};Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName;Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS;_extends(Element,Node);function Attr(){}Attr.prototype.nodeType=ATTRIBUTE_NODE;_extends(Attr,Node);function CharacterData(){}CharacterData.prototype={data:"",substringData:function(offset,count){return this.data.substring(offset,offset+count)},appendData:function(text){text=this.data+text;this.nodeValue=this.data=text;this.length=text.length},insertData:function(offset,text){this.replaceData(offset,0,text)},appendChild:function(newChild){throw new Error(ExceptionMessage[3]);return Node.prototype.appendChild.apply(this,arguments)},deleteData:function(offset,count){this.replaceData(offset,count,"")},replaceData:function(offset,count,text){var start=this.data.substring(0,offset);var end=this.data.substring(offset+count);text=start+text+end;this.nodeValue=this.data=text;this.length=text.length}};_extends(CharacterData,Node);function Text(){}Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(offset){var text=this.data;var newText=text.substring(offset);text=text.substring(0,offset);this.data=this.nodeValue=text;this.length=text.length;var newNode=this.ownerDocument.createTextNode(newText);if(this.parentNode){this.parentNode.insertBefore(newNode,this.nextSibling)}return newNode}};_extends(Text,CharacterData);function Comment(){}Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE};_extends(Comment,CharacterData);function CDATASection(){}CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE};_extends(CDATASection,CharacterData);function DocumentType(){}DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE;_extends(DocumentType,Node);function Notation(){}Notation.prototype.nodeType=NOTATION_NODE;_extends(Notation,Node);function Entity(){}Entity.prototype.nodeType=ENTITY_NODE;_extends(Entity,Node);function EntityReference(){}EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE;_extends(EntityReference,Node);function DocumentFragment(){}DocumentFragment.prototype.nodeName="#document-fragment";DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE;_extends(DocumentFragment,Node);function ProcessingInstruction(){}ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE;_extends(ProcessingInstruction,Node);function XMLSerializer(){}XMLSerializer.prototype.serializeToString=function(node){var buf=[];serializeToString(node,buf);return buf.join("")};Node.prototype.toString=function(){return XMLSerializer.prototype.serializeToString(this)};function serializeToString(node,buf){switch(node.nodeType){case ELEMENT_NODE:var attrs=node.attributes;var len=attrs.length;var child=node.firstChild;var nodeName=node.tagName;var isHTML=htmlns===node.namespaceURI;buf.push("<",nodeName);for(var i=0;i<len;i++){serializeToString(attrs.item(i),buf,isHTML)}if(child||isHTML&&!/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){buf.push(">");if(isHTML&&/^script$/i.test(nodeName)){if(child){buf.push(child.data)}}else{while(child){serializeToString(child,buf);child=child.nextSibling}}buf.push("</",nodeName,">")}else{buf.push("/>")}return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var child=node.firstChild;while(child){serializeToString(child,buf);child=child.nextSibling}return;case ATTRIBUTE_NODE:return buf.push(" ",node.name,'="',node.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return buf.push(node.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return buf.push("<![CDATA[",node.data,"]]>");case COMMENT_NODE:return buf.push("<!--",node.data,"-->");case DOCUMENT_TYPE_NODE:var pubid=node.publicId;var sysid=node.systemId;buf.push("<!DOCTYPE ",node.name);if(pubid){buf.push(' PUBLIC "',pubid);if(sysid&&sysid!="."){buf.push('" "',sysid)}buf.push('">')}else if(sysid&&sysid!="."){buf.push(' SYSTEM "',sysid,'">')}else{var sub=node.internalSubset;if(sub){buf.push(" [",sub,"]")}buf.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return buf.push("<?",node.target," ",node.data,"?>");case ENTITY_REFERENCE_NODE:return buf.push("&",node.nodeName,";");default:buf.push("??",node.nodeName)}}function importNode(doc,node,deep){var node2;switch(node.nodeType){case ELEMENT_NODE:node2=node.cloneNode(false);node2.ownerDocument=doc;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:deep=true;break}if(!node2){node2=node.cloneNode(false)}node2.ownerDocument=doc;node2.parentNode=null;if(deep){var child=node.firstChild;while(child){node2.appendChild(importNode(doc,child,deep));child=child.nextSibling}}return node2}function cloneNode(doc,node,deep){var node2=new node.constructor;for(var n in node){var v=node[n];if(typeof v!="object"){if(v!=node2[n]){node2[n]=v}}}if(node.childNodes){node2.childNodes=new NodeList}node2.ownerDocument=doc;switch(node2.nodeType){case ELEMENT_NODE:var attrs=node.attributes;var attrs2=node2.attributes=new NamedNodeMap;var len=attrs.length;attrs2._ownerElement=node2;for(var i=0;i<len;i++){node2.setAttributeNode(cloneNode(doc,attrs.item(i),true))}break;case ATTRIBUTE_NODE:deep=true}if(deep){var child=node.firstChild;while(child){node2.appendChild(cloneNode(doc,child,deep));child=child.nextSibling}}return node2}function __set__(object,key,value){object[key]=value}try{if(Object.defineProperty){Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){_updateLiveList(this);return this.$$length}});Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(data){switch(this.nodeType){case 1:case 11:while(this.firstChild){this.removeChild(this.firstChild)}if(data||String(data)){this.appendChild(this.ownerDocument.createTextNode(data))}break;default:this.data=data;this.value=value;this.nodeValue=data}}});function getTextContent(node){switch(node.nodeType){case 1:case 11:var buf=[];
node=node.firstChild;while(node){if(node.nodeType!==7&&node.nodeType!==8){buf.push(getTextContent(node))}node=node.nextSibling}return buf.join("");default:return node.nodeValue}}__set__=function(object,key,value){object["$$"+key]=value}}}catch(e){}if(typeof require=="function"){exports.DOMImplementation=DOMImplementation;exports.XMLSerializer=XMLSerializer}}function mydomparser(exports,require){function DOMParser(options){this.options=options||{locator:{}}}DOMParser.prototype.parseFromString=function(source,mimeType){var options=this.options;var sax=new XMLReader;var domBuilder=options.domBuilder||new DOMHandler;var errorHandler=options.errorHandler;var locator=options.locator;var defaultNSMap=options.xmlns||{};var entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};if(locator){domBuilder.setDocumentLocator(locator)}sax.errorHandler=buildErrorHandler(errorHandler,domBuilder,locator);sax.domBuilder=options.domBuilder||domBuilder;if(/\/x?html?$/.test(mimeType)){entityMap.nbsp=" ";entityMap.copy="©";defaultNSMap[""]="http://www.w3.org/1999/xhtml"}if(source){sax.parse(source,defaultNSMap,entityMap)}else{sax.errorHandler.error("invalid document source")}return domBuilder.document};function buildErrorHandler(errorImpl,domBuilder,locator){if(!errorImpl){if(domBuilder instanceof DOMHandler){return domBuilder}errorImpl=domBuilder}var errorHandler={};var isCallback=errorImpl instanceof Function;locator=locator||{};function build(key){var fn=errorImpl[key];if(!fn){if(isCallback){fn=errorImpl.length==2?function(msg){errorImpl(key,msg)}:errorImpl}else{var i=arguments.length;while(--i){if(fn=errorImpl[arguments[i]]){break}}}}errorHandler[key]=fn&&function(msg){fn(msg+_locator(locator))}||function(){}}build("warning","warn");build("error","warn","warning");build("fatalError","warn","warning","error");return errorHandler}function DOMHandler(){this.cdata=false}function position(locator,node){node.lineNumber=locator.lineNumber;node.columnNumber=locator.columnNumber}DOMHandler.prototype={startDocument:function(){this.document=(new DOMImplementation).createDocument(null,null,null);if(this.locator){this.document.documentURI=this.locator.systemId}},startElement:function(namespaceURI,localName,qName,attrs){var doc=this.document;var el=doc.createElementNS(namespaceURI,qName||localName);var len=attrs.length;appendElement(this,el);this.currentElement=el;this.locator&&position(this.locator,el);for(var i=0;i<len;i++){var namespaceURI=attrs.getURI(i);var value=attrs.getValue(i);var qName=attrs.getQName(i);var attr=doc.createAttributeNS(namespaceURI,qName);if(attr.getOffset){position(attr.getOffset(1),attr)}attr.value=attr.nodeValue=value;el.setAttributeNode(attr)}},endElement:function(namespaceURI,localName,qName){var current=this.currentElement;var tagName=current.tagName;this.currentElement=current.parentNode},startPrefixMapping:function(prefix,uri){},endPrefixMapping:function(prefix){},processingInstruction:function(target,data){var ins=this.document.createProcessingInstruction(target,data);this.locator&&position(this.locator,ins);appendElement(this,ins)},ignorableWhitespace:function(ch,start,length){},characters:function(chars,start,length){chars=_toString.apply(this,arguments);if(this.currentElement&&chars){if(this.cdata){var charNode=this.document.createCDATASection(chars);this.currentElement.appendChild(charNode)}else{var charNode=this.document.createTextNode(chars);this.currentElement.appendChild(charNode)}this.locator&&position(this.locator,charNode)}},skippedEntity:function(name){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(locator){if(this.locator=locator){locator.lineNumber=0}},comment:function(chars,start,length){chars=_toString.apply(this,arguments);var comm=this.document.createComment(chars);this.locator&&position(this.locator,comm);appendElement(this,comm)},startCDATA:function(){this.cdata=true},endCDATA:function(){this.cdata=false},startDTD:function(name,publicId,systemId){var impl=this.document.implementation;if(impl&&impl.createDocumentType){var dt=impl.createDocumentType(name,publicId,systemId);this.locator&&position(this.locator,dt);appendElement(this,dt)}},warning:function(error){console.warn(error,_locator(this.locator))},error:function(error){console.error(error,_locator(this.locator))},fatalError:function(error){console.error(error,_locator(this.locator));throw error}};function _locator(l){if(l){return"\n@"+(l.systemId||"")+"#[line:"+l.lineNumber+",col:"+l.columnNumber+"]"}}function _toString(chars,start,length){if(typeof chars=="string"){return chars.substr(start,length)}else{if(chars.length>=start+length||start){return new java.lang.String(chars,start,length)+""}return chars}}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(key){DOMHandler.prototype[key]=function(){return null}});function appendElement(hander,node){if(!hander.currentElement){hander.document.appendChild(node)}else{hander.currentElement.appendChild(node)}}if(typeof require=="function"){var XMLReader=require("./sax").XMLReader;var DOMImplementation=exports.DOMImplementation=require("./dom").DOMImplementation;exports.XMLSerializer=require("./dom").XMLSerializer;exports.DOMParser=DOMParser}}var _jsonix_factory=function(_jsonix_xmldom,_jsonix_xmlhttprequest,_jsonix_fs){var Jsonix={singleFile:true};Jsonix.Util={};Jsonix.Util.extend=function(destination,source){destination=destination||{};if(source){for(var property in source){var value=source[property];if(value!==undefined){destination[property]=value}}sourceIsEvt=typeof window!=="undefined"&&window!==null&&typeof window.Event==="function"&&source instanceof window.Event;if(!sourceIsEvt&&source.hasOwnProperty&&source.hasOwnProperty("toString")){destination.toString=source.toString}}return destination};Jsonix.Class=function(){var Class=function(){this.initialize.apply(this,arguments)};var extended={};var empty=function(){};var parent,initialize,Type;for(var i=0,len=arguments.length;i<len;++i){Type=arguments[i];if(typeof Type=="function"){if(i===0&&len>1){initialize=Type.prototype.initialize;Type.prototype.initialize=empty;extended=new Type;if(initialize===undefined){delete Type.prototype.initialize}else{Type.prototype.initialize=initialize}}parent=Type.prototype}else{parent=Type}Jsonix.Util.extend(extended,parent)}Class.prototype=extended;return Class};Jsonix.XML={XMLNS_NS:"http://www.w3.org/2000/xmlns/",XMLNS_P:"xmlns"};Jsonix.DOM={isDomImplementationAvailable:function(){if(typeof _jsonix_xmldom!=="undefined"){return true}else if(typeof document!=="undefined"&&Jsonix.Util.Type.exists(document.implementation)&&Jsonix.Util.Type.isFunction(document.implementation.createDocument)){return true}else{return false}},createDocument:function(){if(typeof _jsonix_xmldom!=="undefined"){return(new _jsonix_xmldom.DOMImplementation).createDocument()}else if(typeof document!=="undefined"&&Jsonix.Util.Type.exists(document.implementation)&&Jsonix.Util.Type.isFunction(document.implementation.createDocument)){return document.implementation.createDocument("","",null)}else if(typeof ActiveXObject!=="undefined"){return new ActiveXObject("MSXML2.DOMDocument")}else{throw new Error("Error created the DOM document.")}},serialize:function(node){Jsonix.Util.Ensure.ensureExists(node);if(typeof _jsonix_xmldom!=="undefined"){return(new _jsonix_xmldom.XMLSerializer).serializeToString(node)}else if(Jsonix.Util.Type.exists(XMLSerializer)){return(new XMLSerializer).serializeToString(node)}else if(Jsonix.Util.Type.exists(node.xml)){return node.xml}else{throw new Error("Could not serialize the node, neither XMLSerializer nor the [xml] property were found.")}},parse:function(text){Jsonix.Util.Ensure.ensureExists(text);if(typeof _jsonix_xmldom!=="undefined"){return(new _jsonix_xmldom.DOMParser).parseFromString(text,"application/xml")}else if(typeof DOMParser!="undefined"){return(new DOMParser).parseFromString(text,"application/xml")}else if(typeof ActiveXObject!="undefined"){var doc=Jsonix.DOM.createDocument("","");doc.loadXML(text);return doc}else{var url="data:text/xml;charset=utf-8,"+encodeURIComponent(text);var request=new XMLHttpRequest;request.open("GET",url,false);if(request.overrideMimeType){request.overrideMimeType("text/xml")}request.send(null);return request.responseXML}},load:function(url,callback,options){var request=Jsonix.Request.INSTANCE;request.issue(url,function(transport){var result;if(Jsonix.Util.Type.exists(transport.responseXML)&&Jsonix.Util.Type.exists(transport.responseXML.documentElement)){result=transport.responseXML}else if(Jsonix.Util.Type.isString(transport.responseText)){result=Jsonix.DOM.parse(transport.responseText)}else{throw new Error("Response does not have valid [responseXML] or [responseText].")}callback(result)},function(transport){throw new Error("Could not retrieve XML from URL ["+url+"].")},options)},xlinkFixRequired:null,isXlinkFixRequired:function(){if(Jsonix.DOM.xlinkFixRequired===null){if(typeof navigator==="undefined"){Jsonix.DOM.xlinkFixRequired=false}else if(!!navigator.userAgent&&(/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))){var doc=Jsonix.DOM.createDocument();var el=doc.createElement("test");el.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","urn:test");doc.appendChild(el);var testString=Jsonix.DOM.serialize(doc);Jsonix.DOM.xlinkFixRequired=testString.indexOf("xmlns:xlink")===-1}else{Jsonix.DOM.xlinkFixRequired=false}}return Jsonix.DOM.xlinkFixRequired}};Jsonix.Request=Jsonix.Class({factories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.6.0")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){if(typeof _jsonix_xmlhttprequest!=="undefined"){var XMLHttpRequest=_jsonix_xmlhttprequest.XMLHttpRequest;return new XMLHttpRequest}else{return null}}],initialize:function(){},issue:function(url,onSuccess,onFailure,options){Jsonix.Util.Ensure.ensureString(url);if(Jsonix.Util.Type.exists(onSuccess)){Jsonix.Util.Ensure.ensureFunction(onSuccess)}else{onSuccess=function(){}}if(Jsonix.Util.Type.exists(onFailure)){Jsonix.Util.Ensure.ensureFunction(onFailure)}else{onFailure=function(){}}if(Jsonix.Util.Type.exists(options)){Jsonix.Util.Ensure.ensureObject(options)}else{options={}}var transport=this.createTransport();var method=Jsonix.Util.Type.isString(options.method)?options.method:"GET";var async=Jsonix.Util.Type.isBoolean(options.async)?options.async:true;var proxy=Jsonix.Util.Type.isString(options.proxy)?options.proxy:Jsonix.Request.PROXY;var user=Jsonix.Util.Type.isString(options.user)?options.user:null;var password=Jsonix.Util.Type.isString(options.password)?options.password:null;if(Jsonix.Util.Type.isString(proxy)&&url.indexOf("http")===0){url=proxy+encodeURIComponent(url)}if(Jsonix.Util.Type.isString(user)){transport.open(method,url,async,user,password)}else{transport.open(method,url,async)}if(Jsonix.Util.Type.isObject(options.headers)){for(var header in options.headers){if(options.headers.hasOwnProperty(header)){transport.setRequestHeader(header,options.headers[header])}}}var data=Jsonix.Util.Type.exists(options.data)?options.data:null;if(!async){transport.send(data);this.handleTransport(transport,onSuccess,onFailure)}else{var that=this;if(typeof window!=="undefined"){transport.onreadystatechange=function(){that.handleTransport(transport,onSuccess,onFailure)};window.setTimeout(function(){transport.send(data)},0)}else{transport.onreadystatechange=function(){that.handleTransport(transport,onSuccess,onFailure)};transport.send(data)}}return transport},handleTransport:function(transport,onSuccess,onFailure){if(transport.readyState==4){if(!transport.status||transport.status>=200&&transport.status<300){onSuccess(transport)}if(transport.status&&(transport.status<200||transport.status>=300)){onFailure(transport)}}},createTransport:function(){for(var index=0,length=this.factories.length;index<length;index++){try{var transport=this.factories[index]();if(transport!==null){return transport}}catch(e){}}throw new Error("Could not create XML HTTP transport.")},CLASS_NAME:"Jsonix.Request"});Jsonix.Request.INSTANCE=new Jsonix.Request;Jsonix.Request.PROXY=null;Jsonix.Schema={};Jsonix.Model={};Jsonix.Util.Type={exists:function(value){return typeof value!=="undefined"&&value!==null},isUndefined:function(value){return typeof value==="undefined"},isString:function(value){return typeof value==="string"},isBoolean:function(value){return typeof value==="boolean"},isObject:function(value){return typeof value==="object"},isFunction:function(value){return typeof value==="function"},isNumber:function(value){return typeof value==="number"&&!isNaN(value)},isNumberOrNaN:function(value){return value===+value||Object.prototype.toString.call(value)==="[object Number]"},isNaN:function(value){return Jsonix.Util.Type.isNumberOrNaN(value)&&isNaN(value)},isArray:function(value){return!!(value&&value.concat&&value.unshift&&!value.callee)},isDate:function(value){return!!(value&&value.getTimezoneOffset&&value.setUTCFullYear)},isRegExp:function(value){return!!(value&&value.test&&value.exec&&(value.ignoreCase||value.ignoreCase===false))},isNode:function(value){return typeof Node==="object"||typeof Node==="function"?value instanceof Node:value&&typeof value==="object"&&typeof value.nodeType==="number"&&typeof value.nodeName==="string"},isEqual:function(a,b,report){var doReport=Jsonix.Util.Type.isFunction(report);var _range=function(start,stop,step){var args=slice.call(arguments);var solo=args.length<=1;var start_=solo?0:args[0];var stop_=solo?args[0]:args[1];var step_=args[2]||1;var len=Math.max(Math.ceil((stop_-start_)/step_),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start_;start_+=step_}return range};var _keys=Object.keys||function(obj){if(Jsonix.Util.Type.isArray(obj)){return _range(0,obj.length)}var keys=[];for(var key in obj){if(obj.hasOwnProperty(key)){keys[keys.length]=key}}return keys};if(a===b){return true}if(Jsonix.Util.Type.isNaN(a)&&Jsonix.Util.Type.isNaN(b)){return true}var atype=typeof a;var btype=typeof b;if(atype!=btype){if(doReport){report("Types differ ["+atype+"], ["+btype+"].")}return false}if(a==b){return true}if(!a&&b||a&&!b){if(doReport){report("One is falsy, the other is truthy.")}return false}if(Jsonix.Util.Type.isDate(a)&&Jsonix.Util.Type.isDate(b)){return a.getTime()===b.getTime()}if(Jsonix.Util.Type.isNaN(a)&&Jsonix.Util.Type.isNaN(b)){return false}if(Jsonix.Util.Type.isRegExp(a)&&Jsonix.Util.Type.isRegExp(b)){return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline}if(Jsonix.Util.Type.isNode(a)&&Jsonix.Util.Type.isNode(b)){var aSerialized=Jsonix.DOM.serialize(a);var bSerialized=Jsonix.DOM.serialize(b);if(aSerialized!==bSerialized){if(doReport){report("Nodes differ.");report("A="+aSerialized);report("B="+bSerialized)}return false}else{return true}}if(atype!=="object"){return false}if(Jsonix.Util.Type.isArray(a)&&a.length!==b.length){if(doReport){report("Lengths differ.");report("A.length="+a.length);report("B.length="+b.length)}return false}var aKeys=_keys(a);var bKeys=_keys(b);if(aKeys.length!==bKeys.length){if(doReport){report("Different number of properties ["+aKeys.length+"], ["+bKeys.length+"].")}for(var andex=0;andex<aKeys.length;andex++){if(doReport){report("A ["+aKeys[andex]+"]="+a[aKeys[andex]])}}for(var bndex=0;bndex<bKeys.length;bndex++){if(doReport){report("B ["+bKeys[bndex]+"]="+b[bKeys[bndex]])}}return false}for(var kndex=0;kndex<aKeys.length;kndex++){var key=aKeys[kndex];if(!(key in b)||!Jsonix.Util.Type.isEqual(a[key],b[key],report)){if(doReport){report("One of the properties differ.");report("Key: ["+key+"].");report("Left: ["+a[key]+"].");report("Right: ["+b[key]+"].")}return false}}return true},cloneObject:function(source,target){target=target||{};for(var p in source){if(source.hasOwnProperty(p)){target[p]=source[p]}}return target},defaultValue:function(){var args=arguments;if(args.length===0){return undefined}else{var defaultValue=args[args.length-1];var typeOfDefaultValue=typeof defaultValue;for(var index=0;index<args.length-1;index++){var candidateValue=args[index];if(typeof candidateValue===typeOfDefaultValue){return candidateValue}}return defaultValue}}};Jsonix.Util.NumberUtils={isInteger:function(value){return Jsonix.Util.Type.isNumber(value)&&value%1===0}};Jsonix.Util.StringUtils={trim:!!String.prototype.trim?function(str){Jsonix.Util.Ensure.ensureString(str);return str.trim()}:function(str){Jsonix.Util.Ensure.ensureString(str);return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},isEmpty:function(str){var length=str.length;if(!length){return true}for(var index=0;index<length;index++){var c=str[index];if(c===" "){}else if(c>"\r"&&c<""){return false}else if(c<" "){if(c<"	"){return false}else if(c>""){return false}}else if(c>" "){if(c<"\u2028"){if(c<"᠎"){if(c<" "){return false}else if(c>" "){return false}}else if(c>"᠎"){if(c<" "){return false}else if(c>" "){return false}}}else if(c>"\u2029"){if(c<" "){if(c<" "){return false}else if(c>" "){return false}}else if(c>" "){if(c<"　"){return false}else if(c>"　"){return false}}}}}return true},isNotBlank:function(str){return Jsonix.Util.Type.isString(str)&&!Jsonix.Util.StringUtils.isEmpty(str)},whitespaceCharacters:"	\n\f\r   ᠎           \u2028\u2029  　",whitespaceCharactersMap:{"	":true,"\n":true,"":true,"\f":true,"\r":true," ":true,"":true," ":true," ":true,"᠎":true," ":true," ":true," ":true," ":true," ":true," ":true," ":true," ":true," ":true," ":true," ":true,"\u2028":true,"\u2029":true," ":true," ":true,"　":true},splitBySeparatorChars:function(str,separatorChars){Jsonix.Util.Ensure.ensureString(str);Jsonix.Util.Ensure.ensureString(separatorChars);var len=str.length;if(len===0){return[]}if(separatorChars.length===1){return str.split(separatorChars)}else{var list=[];var sizePlus1=1;var i=0;var start=0;var match=false;var lastMatch=false;var max=-1;var preserveAllTokens=false;while(i<len){if(separatorChars.indexOf(str.charAt(i))>=0){if(match||preserveAllTokens){lastMatch=true;if(sizePlus1++==max){i=len;lastMatch=false}list.push(str.substring(start,i));match=false}start=++i;continue}lastMatch=false;match=true;i++}if(match||preserveAllTokens&&lastMatch){list.push(str.substring(start,i))}return list}}};Jsonix.Util.Ensure={ensureBoolean:function(value){if(!Jsonix.Util.Type.isBoolean(value)){throw new Error("Argument ["+value+"] must be a boolean.")}},ensureString:function(value){if(!Jsonix.Util.Type.isString(value)){throw new Error("Argument ["+value+"] must be a string.")}},ensureNumber:function(value){if(!Jsonix.Util.Type.isNumber(value)){throw new Error("Argument ["+value+"] must be a number.")}},ensureNumberOrNaN:function(value){if(!Jsonix.Util.Type.isNumberOrNaN(value)){throw new Error("Argument ["+value+"] must be a number or NaN.")}},ensureInteger:function(value){if(!Jsonix.Util.Type.isNumber(value)){throw new Error("Argument must be an integer, but it is not a number.")}else if(!Jsonix.Util.NumberUtils.isInteger(value)){throw new Error("Argument ["+value+"] must be an integer.")}},ensureDate:function(value){if(!(value instanceof Date)){throw new Error("Argument ["+value+"] must be a date.")}},ensureObject:function(value){if(!Jsonix.Util.Type.isObject(value)){throw new Error("Argument ["+value+"] must be an object.")}},ensureArray:function(value){if(!Jsonix.Util.Type.isArray(value)){throw new Error("Argument ["+value+"] must be an array.")}},ensureFunction:function(value){if(!Jsonix.Util.Type.isFunction(value)){throw new Error("Argument ["+value+"] must be a function.")}},ensureExists:function(value){if(!Jsonix.Util.Type.exists(value)){throw new Error("Argument ["+value+"] does not exist.")}}};Jsonix.XML.QName=Jsonix.Class({key:null,namespaceURI:null,localPart:null,prefix:null,string:null,initialize:function(one,two,three){var namespaceURI;var localPart;var prefix;var key;var string;if(!Jsonix.Util.Type.exists(two)){namespaceURI="";localPart=one;prefix=""}else if(!Jsonix.Util.Type.exists(three)){namespaceURI=Jsonix.Util.Type.exists(one)?one:"";localPart=two;var colonPosition=two.indexOf(":");if(colonPosition>0&&colonPosition<two.length){prefix=two.substring(0,colonPosition);localPart=two.substring(colonPosition+1)}else{prefix="";localPart=two}}else{namespaceURI=Jsonix.Util.Type.exists(one)?one:"";localPart=two;prefix=Jsonix.Util.Type.exists(three)?three:""}this.namespaceURI=namespaceURI;this.localPart=localPart;this.prefix=prefix;this.key=(namespaceURI!==""?"{"+namespaceURI+"}":"")+localPart;this.string=(namespaceURI!==""?"{"+namespaceURI+"}":"")+(prefix!==""?prefix+":":"")+localPart},toString:function(){return this.string},toCanonicalString:function(namespaceContext){var canonicalPrefix=namespaceContext?namespaceContext.getPrefix(this.namespaceURI,this.prefix):this.prefix;return this.prefix+(this.prefix===""?"":":")+this.localPart},clone:function(){return new Jsonix.XML.QName(this.namespaceURI,this.localPart,this.prefix)},equals:function(that){if(!that){return false}else{return this.namespaceURI==that.namespaceURI&&this.localPart==that.localPart}},CLASS_NAME:"Jsonix.XML.QName"});Jsonix.XML.QName.fromString=function(qNameAsString,namespaceContext,defaultNamespaceURI){var leftBracket=qNameAsString.indexOf("{");var rightBracket=qNameAsString.lastIndexOf("}");var namespaceURI;var prefixedName;if(leftBracket===0&&rightBracket>0&&rightBracket<qNameAsString.length){namespaceURI=qNameAsString.substring(1,rightBracket);prefixedName=qNameAsString.substring(rightBracket+1)}else{namespaceURI=null;prefixedName=qNameAsString}var colonPosition=prefixedName.indexOf(":");var prefix;var localPart;if(colonPosition>0&&colonPosition<prefixedName.length){prefix=prefixedName.substring(0,colonPosition);localPart=prefixedName.substring(colonPosition+1)}else{prefix="";localPart=prefixedName}if(namespaceURI===null&&namespaceContext){namespaceURI=namespaceContext.getNamespaceURI(prefix)}if(!Jsonix.Util.Type.isString(namespaceURI)){namespaceURI=defaultNamespaceURI||""}return new Jsonix.XML.QName(namespaceURI,localPart,prefix)};Jsonix.XML.QName.fromObject=function(object){Jsonix.Util.Ensure.ensureObject(object);if(object instanceof Jsonix.XML.QName||Jsonix.Util.Type.isString(object.CLASS_NAME)&&object.CLASS_NAME==="Jsonix.XML.QName"){return object}var localPart=object.localPart||object.lp||null;Jsonix.Util.Ensure.ensureString(localPart);var namespaceURI=object.namespaceURI||object.ns||"";var prefix=object.prefix||object.p||"";return new Jsonix.XML.QName(namespaceURI,localPart,prefix)};Jsonix.XML.QName.fromObjectOrString=function(value,namespaceContext,defaultNamespaceURI){if(Jsonix.Util.Type.isString(value)){return Jsonix.XML.QName.fromString(value,namespaceContext,defaultNamespaceURI)}else{return Jsonix.XML.QName.fromObject(value)}};Jsonix.XML.QName.key=function(namespaceURI,localPart){Jsonix.Util.Ensure.ensureString(localPart);if(namespaceURI){var colonPosition=localPart.indexOf(":");if(colonPosition>0&&colonPosition<localPart.length){localName=localPart.substring(colonPosition+1)}else{localName=localPart}return"{"+namespaceURI+"}"+localName}else{return localPart}};Jsonix.XML.Calendar=Jsonix.Class({year:NaN,month:NaN,day:NaN,hour:NaN,minute:NaN,second:NaN,fractionalSecond:NaN,timezone:NaN,date:null,initialize:function(data){Jsonix.Util.Ensure.ensureObject(data);if(Jsonix.Util.Type.exists(data.year)){Jsonix.Util.Ensure.ensureInteger(data.year);Jsonix.XML.Calendar.validateYear(data.year);this.year=data.year}else{this.year=NaN}if(Jsonix.Util.Type.exists(data.month)){Jsonix.Util.Ensure.ensureInteger(data.month);Jsonix.XML.Calendar.validateMonth(data.month);this.month=data.month}else{this.month=NaN}if(Jsonix.Util.Type.exists(data.day)){Jsonix.Util.Ensure.ensureInteger(data.day);if(Jsonix.Util.NumberUtils.isInteger(data.year)&&Jsonix.Util.NumberUtils.isInteger(data.month)){Jsonix.XML.Calendar.validateYearMonthDay(data.year,data.month,data.day)}else if(Jsonix.Util.NumberUtils.isInteger(data.month)){Jsonix.XML.Calendar.validateMonthDay(data.month,data.day)}else{Jsonix.XML.Calendar.validateDay(data.day)}this.day=data.day}else{this.day=NaN}if(Jsonix.Util.Type.exists(data.hour)){Jsonix.Util.Ensure.ensureInteger(data.hour);Jsonix.XML.Calendar.validateHour(data.hour);this.hour=data.hour}else{this.hour=NaN}if(Jsonix.Util.Type.exists(data.minute)){Jsonix.Util.Ensure.ensureInteger(data.minute);Jsonix.XML.Calendar.validateMinute(data.minute);this.minute=data.minute}else{this.minute=NaN}if(Jsonix.Util.Type.exists(data.second)){Jsonix.Util.Ensure.ensureInteger(data.second);Jsonix.XML.Calendar.validateSecond(data.second);this.second=data.second}else{this.second=NaN}if(Jsonix.Util.Type.exists(data.fractionalSecond)){Jsonix.Util.Ensure.ensureNumber(data.fractionalSecond);Jsonix.XML.Calendar.validateFractionalSecond(data.fractionalSecond);this.fractionalSecond=data.fractionalSecond}else{this.fractionalSecond=NaN}if(Jsonix.Util.Type.exists(data.timezone)){if(Jsonix.Util.Type.isNaN(data.timezone)){this.timezone=NaN}else{Jsonix.Util.Ensure.ensureInteger(data.timezone);Jsonix.XML.Calendar.validateTimezone(data.timezone);this.timezone=data.timezone}}else{this.timezone=NaN}var initialDate=new Date(0);initialDate.setUTCFullYear(this.year||1970);initialDate.setUTCMonth(this.month-1||0);initialDate.setUTCDate(this.day||1);initialDate.setUTCHours(this.hour||0);initialDate.setUTCMinutes(this.minute||0);initialDate.setUTCSeconds(this.second||0);initialDate.setUTCMilliseconds((this.fractionalSecond||0)*1e3);var timezoneOffset=-6e4*(this.timezone||0);this.date=new Date(initialDate.getTime()+timezoneOffset)},CLASS_NAME:"Jsonix.XML.Calendar"});Jsonix.XML.Calendar.MIN_TIMEZONE=-14*60;Jsonix.XML.Calendar.MAX_TIMEZONE=14*60;Jsonix.XML.Calendar.DAYS_IN_MONTH=[31,29,31,30,31,30,31,31,30,31,30,31];Jsonix.XML.Calendar.fromObject=function(object){Jsonix.Util.Ensure.ensureObject(object);if(Jsonix.Util.Type.isString(object.CLASS_NAME)&&object.CLASS_NAME==="Jsonix.XML.Calendar"){return object}return new Jsonix.XML.Calendar(object)};Jsonix.XML.Calendar.validateYear=function(year){if(year===0){throw new Error("Invalid year ["+year+"]. Year must not be [0].")}};Jsonix.XML.Calendar.validateMonth=function(month){if(month<1||month>12){throw new Error("Invalid month ["+month+"]. Month must be in range [1, 12].")}};Jsonix.XML.Calendar.validateDay=function(day){if(day<1||day>31){throw new Error("Invalid day ["+day+"]. Day must be in range [1, 31].")}};Jsonix.XML.Calendar.validateMonthDay=function(month,day){Jsonix.XML.Calendar.validateMonth(month);var maxDaysInMonth=Jsonix.XML.Calendar.DAYS_IN_MONTH[month-1];if(day<1||day>Jsonix.XML.Calendar.DAYS_IN_MONTH[month-1]){throw new Error("Invalid day ["+day+"]. Day must be in range [1, "+maxDaysInMonth+"].")}};Jsonix.XML.Calendar.validateYearMonthDay=function(year,month,day){Jsonix.XML.Calendar.validateYear(year);Jsonix.XML.Calendar.validateMonthDay(month,day)};Jsonix.XML.Calendar.validateHour=function(hour){if(hour<0||hour>23){throw new Error("Invalid hour ["+hour+"]. Hour must be in range [0, 23].")}};Jsonix.XML.Calendar.validateMinute=function(minute){if(minute<0||minute>59){throw new Error("Invalid minute ["+minute+"]. Minute must be in range [0, 59].")}};Jsonix.XML.Calendar.validateSecond=function(second){if(second<0||second>59){throw new Error("Invalid second ["+second+"]. Second must be in range [0, 59].")}};Jsonix.XML.Calendar.validateFractionalSecond=function(fractionalSecond){if(fractionalSecond<0||fractionalSecond>59){throw new Error("Invalid fractional second ["+fractionalSecond+"]. Fractional second must be in range [0, 1).")}};Jsonix.XML.Calendar.validateTimezone=function(timezone){if(timezone<Jsonix.XML.Calendar.MIN_TIMEZONE||timezone>Jsonix.XML.Calendar.MAX_TIMEZONE){throw new Error("Invalid timezone ["+timezone+"]. Timezone must not be in range ["+Jsonix.XML.Calendar.MIN_TIMEZONE+", "+Jsonix.XML.Calendar.MAX_TIMEZONE+"].")}};Jsonix.XML.Input=Jsonix.Class({root:null,node:null,attributes:null,eventType:null,pns:null,initialize:function(node){Jsonix.Util.Ensure.ensureExists(node);this.root=node;var rootPnsItem={"":""};rootPnsItem[Jsonix.XML.XMLNS_P]=Jsonix.XML.XMLNS_NS;this.pns=[rootPnsItem]},hasNext:function(){if(this.node===null){return true}else if(this.node===this.root){var nodeType=this.node.nodeType;if(nodeType===9&&this.eventType===8){return false}else if(nodeType===1&&this.eventType===2){return false}else{return true}}else{return true}},next:function(){if(this.eventType===null){return this.enter(this.root)}if(this.eventType===7){var documentElement=this.node.documentElement;if(documentElement){return this.enter(documentElement)}else{return this.leave(this.node)}}else if(this.eventType===1){var firstChild=this.node.firstChild;if(firstChild){return this.enter(firstChild)}else{return this.leave(this.node)}}else if(this.eventType===2){var nextSibling=this.node.nextSibling;if(nextSibling){return this.enter(nextSibling)}else{return this.leave(this.node)}}else{return this.leave(this.node)}},enter:function(node){var nodeType=node.nodeType;this.node=node;this.attributes=null;if(nodeType===1){this.eventType=1;this.pushNS(node);return this.eventType}else if(nodeType===2){this.eventType=10;return this.eventType}else if(nodeType===3){var nodeValue=node.nodeValue;if(Jsonix.Util.StringUtils.isEmpty(nodeValue)){this.eventType=6}else{this.eventType=4}return this.eventType}else if(nodeType===4){this.eventType=12;return this.eventType}else if(nodeType===5){this.eventType=9;return this.eventType}else if(nodeType===6){this.eventType=15;return this.eventType}else if(nodeType===7){this.eventType=3;return this.eventType}else if(nodeType===8){this.eventType=5;return this.eventType}else if(nodeType===9){this.eventType=7;return this.eventType}else if(nodeType===10){this.eventType=12;return this.eventType}else if(nodeType===12){this.eventType=14;return this.eventType}else{throw new Error("Node type ["+nodeType+"] is not supported.")}},leave:function(node){if(node.nodeType===9){if(this.eventType==8){throw new Error("Invalid state.")}else{this.node=node;this.attributes=null;this.eventType=8;return this.eventType}}else if(node.nodeType===1){if(this.eventType==2){var nextSibling=node.nextSibling;if(nextSibling){return this.enter(nextSibling)}}else{this.node=node;this.attributes=null;this.eventType=2;this.popNS();return this.eventType}}var nextSibling1=node.nextSibling;if(nextSibling1){return this.enter(nextSibling1)}else{var parentNode=node.parentNode;this.node=parentNode;this.attributes=null;if(parentNode.nodeType===9){this.eventType=8}else{this.eventType=2}return this.eventType}},getName:function(){var node=this.node;if(Jsonix.Util.Type.isString(node.nodeName)){if(Jsonix.Util.Type.isString(node.namespaceURI)){return new Jsonix.XML.QName(node.namespaceURI,node.nodeName)}else{return new Jsonix.XML.QName(node.nodeName)}}else{return null}},getNameKey:function(){var node=this.node;if(Jsonix.Util.Type.isString(node.nodeName)){return Jsonix.XML.QName.key(node.namespaceURI,node.nodeName)}else{return null}},getText:function(){return this.node.nodeValue},nextTag:function(){var et=this.next();while(et===7||et===4||et===12||et===6||et===3||et===5){et=this.next()}if(et!==1&&et!==2){throw new Error("Expected start or end tag.")}return et},skipElement:function(){if(this.eventType!==Jsonix.XML.Input.START_ELEMENT){throw new Error("Parser must be on START_ELEMENT to skip element.")}var numberOfOpenTags=1;var et;do{et=this.nextTag();numberOfOpenTags+=et===Jsonix.XML.Input.START_ELEMENT?1:-1}while(numberOfOpenTags>0);return et},getElementText:function(){if(this.eventType!=1){throw new Error("Parser must be on START_ELEMENT to read next text.")}var et=this.next();var content="";while(et!==2){if(et===4||et===12||et===6||et===9){content=content+this.getText()}else if(et===3||et===5){}else if(et===8){throw new Error("Unexpected end of document when reading element text content.")
}else if(et===1){throw new Error("Element text content may not contain START_ELEMENT.")}else{throw new Error("Unexpected event type ["+et+"].")}et=this.next()}return content},retrieveElement:function(){var element;if(this.eventType===1){element=this.node}else if(this.eventType===10){element=this.node.parentNode}else{throw new Error("Element can only be retrieved for START_ELEMENT or ATTRIBUTE nodes.")}return element},retrieveAttributes:function(){var attributes;if(this.attributes){attributes=this.attributes}else if(this.eventType===1){attributes=this.node.attributes;this.attributes=attributes}else if(this.eventType===10){attributes=this.node.parentNode.attributes;this.attributes=attributes}else{throw new Error("Attributes can only be retrieved for START_ELEMENT or ATTRIBUTE nodes.")}return attributes},getAttributeCount:function(){var attributes=this.retrieveAttributes();return attributes.length},getAttributeName:function(index){var attributes=this.retrieveAttributes();if(index<0||index>=attributes.length){throw new Error("Invalid attribute index ["+index+"].")}var attribute=attributes[index];if(Jsonix.Util.Type.isString(attribute.namespaceURI)){return new Jsonix.XML.QName(attribute.namespaceURI,attribute.nodeName)}else{return new Jsonix.XML.QName(attribute.nodeName)}},getAttributeNameKey:function(index){var attributes=this.retrieveAttributes();if(index<0||index>=attributes.length){throw new Error("Invalid attribute index ["+index+"].")}var attribute=attributes[index];return Jsonix.XML.QName.key(attribute.namespaceURI,attribute.nodeName)},getAttributeValue:function(index){var attributes=this.retrieveAttributes();if(index<0||index>=attributes.length){throw new Error("Invalid attribute index ["+index+"].")}var attribute=attributes[index];return attribute.value},getAttributeValueNS:null,getAttributeValueNSViaElement:function(namespaceURI,localPart){var element=this.retrieveElement();return element.getAttributeNS(namespaceURI,localPart)},getAttributeValueNSViaAttribute:function(namespaceURI,localPart){var attributeNode=this.getAttributeNodeNS(namespaceURI,localPart);if(Jsonix.Util.Type.exists(attributeNode)){return attributeNode.nodeValue}else{return null}},getAttributeNodeNS:null,getAttributeNodeNSViaElement:function(namespaceURI,localPart){var element=this.retrieveElement();return element.getAttributeNodeNS(namespaceURI,localPart)},getAttributeNodeNSViaAttributes:function(namespaceURI,localPart){var attributeNode=null;var attributes=this.retrieveAttributes();var potentialNode,fullName;for(var i=0,len=attributes.length;i<len;++i){potentialNode=attributes[i];if(potentialNode.namespaceURI===namespaceURI){fullName=potentialNode.prefix?potentialNode.prefix+":"+localPart:localPart;if(fullName===potentialNode.nodeName){attributeNode=potentialNode;break}}}return attributeNode},getElement:function(){if(this.eventType===1||this.eventType===2){this.eventType=2;return this.node}else{throw new Error("Parser must be on START_ELEMENT or END_ELEMENT to return current element.")}},pushNS:function(node){var pindex=this.pns.length-1;var parentPnsItem=this.pns[pindex];var pnsItem=Jsonix.Util.Type.isObject(parentPnsItem)?pindex:parentPnsItem;this.pns.push(pnsItem);pindex++;var reference=true;if(node.attributes){var attributes=node.attributes;var alength=attributes.length;if(alength>0){for(var aindex=0;aindex<alength;aindex++){var attribute=attributes[aindex];var attributeName=attribute.nodeName;var p=null;var ns=null;var isNS=false;if(attributeName==="xmlns"){p="";ns=attribute.value;isNS=true}else if(attributeName.substring(0,6)==="xmlns:"){p=attributeName.substring(6);ns=attribute.value;isNS=true}if(isNS){if(reference){pnsItem=Jsonix.Util.Type.cloneObject(this.pns[pnsItem],{});this.pns[pindex]=pnsItem;reference=false}pnsItem[p]=ns}}}}},popNS:function(){this.pns.pop()},getNamespaceURI:function(p){var pindex=this.pns.length-1;var pnsItem=this.pns[pindex];pnsItem=Jsonix.Util.Type.isObject(pnsItem)?pnsItem:this.pns[pnsItem];return pnsItem[p]},CLASS_NAME:"Jsonix.XML.Input"});Jsonix.XML.Input.prototype.getAttributeValueNS=Jsonix.DOM.isDomImplementationAvailable()?Jsonix.XML.Input.prototype.getAttributeValueNSViaElement:Jsonix.XML.Input.prototype.getAttributeValueNSViaAttribute;Jsonix.XML.Input.prototype.getAttributeNodeNS=Jsonix.DOM.isDomImplementationAvailable()?Jsonix.XML.Input.prototype.getAttributeNodeNSViaElement:Jsonix.XML.Input.prototype.getAttributeNodeNSViaAttributes;Jsonix.XML.Input.START_ELEMENT=1;Jsonix.XML.Input.END_ELEMENT=2;Jsonix.XML.Input.PROCESSING_INSTRUCTION=3;Jsonix.XML.Input.CHARACTERS=4;Jsonix.XML.Input.COMMENT=5;Jsonix.XML.Input.SPACE=6;Jsonix.XML.Input.START_DOCUMENT=7;Jsonix.XML.Input.END_DOCUMENT=8;Jsonix.XML.Input.ENTITY_REFERENCE=9;Jsonix.XML.Input.ATTRIBUTE=10;Jsonix.XML.Input.DTD=11;Jsonix.XML.Input.CDATA=12;Jsonix.XML.Input.NAMESPACE=13;Jsonix.XML.Input.NOTATION_DECLARATION=14;Jsonix.XML.Input.ENTITY_DECLARATION=15;Jsonix.XML.Output=Jsonix.Class({document:null,documentElement:null,node:null,nodes:null,nsp:null,pns:null,namespacePrefixIndex:0,xmldom:null,initialize:function(options){if(typeof ActiveXObject!=="undefined"){this.xmldom=new ActiveXObject("Microsoft.XMLDOM")}else{this.xmldom=null}this.nodes=[];var rootNspItem={"":""};rootNspItem[Jsonix.XML.XMLNS_NS]=Jsonix.XML.XMLNS_P;if(Jsonix.Util.Type.isObject(options)){if(Jsonix.Util.Type.isObject(options.namespacePrefixes)){Jsonix.Util.Type.cloneObject(options.namespacePrefixes,rootNspItem)}}this.nsp=[rootNspItem];var rootPnsItem={"":""};rootPnsItem[Jsonix.XML.XMLNS_P]=Jsonix.XML.XMLNS_NS;this.pns=[rootPnsItem]},destroy:function(){this.xmldom=null},writeStartDocument:function(){var doc=Jsonix.DOM.createDocument();this.document=doc;return this.push(doc)},writeEndDocument:function(){return this.pop()},writeStartElement:function(name){Jsonix.Util.Ensure.ensureObject(name);var localPart=name.localPart||name.lp||null;Jsonix.Util.Ensure.ensureString(localPart);var ns=name.namespaceURI||name.ns||null;var namespaceURI=Jsonix.Util.Type.isString(ns)?ns:"";var p=name.prefix||name.p;var prefix=this.getPrefix(namespaceURI,p);var qualifiedName=!prefix?localPart:prefix+":"+localPart;var element;if(Jsonix.Util.Type.isFunction(this.document.createElementNS)){element=this.document.createElementNS(namespaceURI,qualifiedName)}else if(this.xmldom){element=this.xmldom.createNode(1,qualifiedName,namespaceURI)}else{throw new Error("Could not create an element node.")}this.peek().appendChild(element);this.push(element);this.declareNamespace(namespaceURI,prefix);if(this.documentElement===null){this.documentElement=element;this.declareNamespaces()}return element},writeEndElement:function(){return this.pop()},writeCharacters:function(text){var node;if(Jsonix.Util.Type.isFunction(this.document.createTextNode)){node=this.document.createTextNode(text)}else if(this.xmldom){node=this.xmldom.createTextNode(text)}else{throw new Error("Could not create a text node.")}this.peek().appendChild(node);return node},writeAttribute:function(name,value){Jsonix.Util.Ensure.ensureString(value);Jsonix.Util.Ensure.ensureObject(name);var localPart=name.localPart||name.lp||null;Jsonix.Util.Ensure.ensureString(localPart);var ns=name.namespaceURI||name.ns||null;var namespaceURI=Jsonix.Util.Type.isString(ns)?ns:"";var p=name.prefix||name.p||null;var prefix=this.getPrefix(namespaceURI,p);var qualifiedName=!prefix?localPart:prefix+":"+localPart;var node=this.peek();if(namespaceURI===""){node.setAttribute(qualifiedName,value)}else{if(node.setAttributeNS){node.setAttributeNS(namespaceURI,qualifiedName,value)}else{if(this.xmldom){var attribute=this.document.createNode(2,qualifiedName,namespaceURI);attribute.nodeValue=value;node.setAttributeNode(attribute)}else if(namespaceURI===Jsonix.XML.XMLNS_NS){node.setAttribute(qualifiedName,value)}else{throw new Error("The [setAttributeNS] method is not implemented")}}this.declareNamespace(namespaceURI,prefix)}},writeNode:function(node){var importedNode;if(Jsonix.Util.Type.exists(this.document.importNode)){importedNode=this.document.importNode(node,true)}else{importedNode=node}this.peek().appendChild(importedNode);return importedNode},push:function(node){this.nodes.push(node);this.pushNS();return node},peek:function(){return this.nodes[this.nodes.length-1]},pop:function(){this.popNS();var result=this.nodes.pop();return result},pushNS:function(){var nindex=this.nsp.length-1;var pindex=this.pns.length-1;var parentNspItem=this.nsp[nindex];var parentPnsItem=this.pns[pindex];var nspItem=Jsonix.Util.Type.isObject(parentNspItem)?nindex:parentNspItem;var pnsItem=Jsonix.Util.Type.isObject(parentPnsItem)?pindex:parentPnsItem;this.nsp.push(nspItem);this.pns.push(pnsItem)},popNS:function(){this.nsp.pop();this.pns.pop()},declareNamespaces:function(){var index=this.nsp.length-1;var nspItem=this.nsp[index];nspItem=Jsonix.Util.Type.isNumber(nspItem)?this.nsp[nspItem]:nspItem;var ns,p;for(ns in nspItem){if(nspItem.hasOwnProperty(ns)){p=nspItem[ns];this.declareNamespace(ns,p)}}},declareNamespace:function(ns,p){var index=this.pns.length-1;var pnsItem=this.pns[index];var reference;if(Jsonix.Util.Type.isNumber(pnsItem)){reference=true;pnsItem=this.pns[pnsItem]}else{reference=false}if(pnsItem[p]!==ns){if(p===""){this.writeAttribute({lp:Jsonix.XML.XMLNS_P},ns)}else{this.writeAttribute({ns:Jsonix.XML.XMLNS_NS,lp:p,p:Jsonix.XML.XMLNS_P},ns)}if(reference){pnsItem=Jsonix.Util.Type.cloneObject(pnsItem,{});this.pns[index]=pnsItem}pnsItem[p]=ns}},getPrefix:function(ns,p){var index=this.nsp.length-1;var nspItem=this.nsp[index];var reference;if(Jsonix.Util.Type.isNumber(nspItem)){reference=true;nspItem=this.nsp[nspItem]}else{reference=false}if(Jsonix.Util.Type.isString(p)){var oldp=nspItem[ns];if(p===oldp){}else{if(reference){nspItem=Jsonix.Util.Type.cloneObject(nspItem,{});this.nsp[index]=nspItem}nspItem[ns]=p}}else{p=nspItem[ns];if(!Jsonix.Util.Type.exists(p)){p="p"+this.namespacePrefixIndex++;if(reference){nspItem=Jsonix.Util.Type.cloneObject(nspItem,{});this.nsp[index]=nspItem}nspItem[ns]=p}}return p},getNamespaceURI:function(p){var pindex=this.pns.length-1;var pnsItem=this.pns[pindex];pnsItem=Jsonix.Util.Type.isObject(pnsItem)?pnsItem:this.pns[pnsItem];return pnsItem[p]},CLASS_NAME:"Jsonix.XML.Output"});Jsonix.Mapping={};Jsonix.Mapping.Style=Jsonix.Class({marshaller:null,unmarshaller:null,module:null,elementInfo:null,classInfo:null,enumLeafInfo:null,anyAttributePropertyInfo:null,anyElementPropertyInfo:null,attributePropertyInfo:null,elementMapPropertyInfo:null,elementPropertyInfo:null,elementsPropertyInfo:null,elementRefPropertyInfo:null,elementRefsPropertyInfo:null,valuePropertyInfo:null,initialize:function(){},CLASS_NAME:"Jsonix.Mapping.Style"});Jsonix.Mapping.Style.STYLES={};Jsonix.Mapping.Styled=Jsonix.Class({mappingStyle:null,initialize:function(options){if(Jsonix.Util.Type.exists(options)){Jsonix.Util.Ensure.ensureObject(options);if(Jsonix.Util.Type.isString(options.mappingStyle)){var mappingStyle=Jsonix.Mapping.Style.STYLES[options.mappingStyle];if(!mappingStyle){throw new Error("Mapping style ["+options.mappingStyle+"] is not known.")}this.mappingStyle=mappingStyle}else if(Jsonix.Util.Type.isObject(options.mappingStyle)){this.mappingStyle=options.mappingStyle}}if(!this.mappingStyle){this.mappingStyle=Jsonix.Mapping.Style.STYLES.standard}},CLASS_NAME:"Jsonix.Mapping.Styled"});Jsonix.Binding={};Jsonix.Binding.Marshalls={};Jsonix.Binding.Marshalls.Element=Jsonix.Class({marshalElement:function(value,context,output,scope){var elementValue=this.convertToTypedNamedValue(value,context,output,scope);var declaredTypeInfo=elementValue.typeInfo;var typeInfo=declaredTypeInfo;if(Jsonix.Util.Type.exists(declaredTypeInfo)){output.writeStartElement(elementValue.name);if(Jsonix.Util.Type.exists(elementValue.value)){if(context.supportXsiType){var actualTypeInfo=context.getTypeInfoByValue(elementValue.value);if(actualTypeInfo&&actualTypeInfo.typeName&&declaredTypeInfo!==actualTypeInfo){typeInfo=actualTypeInfo;var xsiTypeName=actualTypeInfo.typeName;var xsiType=Jsonix.Schema.XSD.QName.INSTANCE.print(xsiTypeName,context,output,scope);output.writeAttribute(Jsonix.Schema.XSI.TYPE_QNAME,xsiType)}}typeInfo.marshal(elementValue.value,context,output,scope)}output.writeEndElement()}else{throw new Error("Element ["+elementValue.name.key+"] is not known in this context.")}},getTypeInfoByElementName:function(name,context,scope){var elementInfo=context.getElementInfo(name,scope);if(Jsonix.Util.Type.exists(elementInfo)){return elementInfo.typeInfo}else{return undefined}}});Jsonix.Binding.Marshalls.Element.AsElementRef=Jsonix.Class({convertToTypedNamedValue:function(value,context,output,scope){Jsonix.Util.Ensure.ensureObject(value);var elementValue=this.convertToNamedValue(value,context,output,scope);return{name:elementValue.name,value:elementValue.value,typeInfo:this.getTypeInfoByElementName(elementValue.name,context,scope)}},convertToNamedValue:function(elementValue,context,output,scope){var name;var value;if(Jsonix.Util.Type.exists(elementValue.name)&&!Jsonix.Util.Type.isUndefined(elementValue.value)){name=Jsonix.XML.QName.fromObjectOrString(elementValue.name,context);value=Jsonix.Util.Type.exists(elementValue.value)?elementValue.value:null;return{name:name,value:value}}else{for(var propertyName in elementValue){if(elementValue.hasOwnProperty(propertyName)){name=Jsonix.XML.QName.fromObjectOrString(propertyName,context);value=elementValue[propertyName];return{name:name,value:value}}}}throw new Error("Invalid element value ["+elementValue+"]. Element values must either have {name:'myElementName', value: elementValue} or {myElementName:elementValue} structure.")}});Jsonix.Binding.Unmarshalls={};Jsonix.Binding.Unmarshalls.WrapperElement=Jsonix.Class({mixed:false,unmarshalWrapperElement:function(context,input,scope,callback){var et=input.next();while(et!==Jsonix.XML.Input.END_ELEMENT){if(et===Jsonix.XML.Input.START_ELEMENT){this.unmarshalElement(context,input,scope,callback)}else if(this.mixed&&(et===Jsonix.XML.Input.CHARACTERS||et===Jsonix.XML.Input.CDATA||et===Jsonix.XML.Input.ENTITY_REFERENCE)){callback(input.getText())}else if(et===Jsonix.XML.Input.SPACE||et===Jsonix.XML.Input.COMMENT||et===Jsonix.XML.Input.PROCESSING_INSTRUCTION){}else{throw new Error("Illegal state: unexpected event type ["+et+"].")}et=input.next()}}});Jsonix.Binding.Unmarshalls.Element=Jsonix.Class({allowTypedObject:true,allowDom:false,unmarshalElement:function(context,input,scope,callback){if(input.eventType!=1){throw new Error("Parser must be on START_ELEMENT to read next element.")}var typeInfo=this.getTypeInfoByInputElement(context,input,scope);var name=input.getName();var elementValue;if(this.allowTypedObject){if(Jsonix.Util.Type.exists(typeInfo)){var value=typeInfo.unmarshal(context,input,scope);var typedNamedValue={name:name,value:value,typeInfo:typeInfo};elementValue=this.convertFromTypedNamedValue(typedNamedValue,context,input,scope)}else if(this.allowDom){elementValue=input.getElement()}else{throw new Error("Element ["+name.toString()+"] could not be unmarshalled as is not known in this context and the property does not allow DOM content.")}}else if(this.allowDom){elementValue=input.getElement()}else{throw new Error("Element ["+name.toString()+"] could not be unmarshalled as the property neither allows typed objects nor DOM as content. This is a sign of invalid mappings, do not use [allowTypedObject : false] and [allowDom : false] at the same time.")}callback(elementValue)},getTypeInfoByInputElement:function(context,input,scope){var xsiTypeInfo=null;if(context.supportXsiType){var xsiType=input.getAttributeValueNS(Jsonix.Schema.XSI.NAMESPACE_URI,Jsonix.Schema.XSI.TYPE);if(Jsonix.Util.StringUtils.isNotBlank(xsiType)){var xsiTypeName=Jsonix.Schema.XSD.QName.INSTANCE.parse(xsiType,context,input,scope);xsiTypeInfo=context.getTypeInfoByTypeNameKey(xsiTypeName.key)}}var name=input.getName();var typeInfo=xsiTypeInfo?xsiTypeInfo:this.getTypeInfoByElementName(name,context,scope);return typeInfo},getTypeInfoByElementName:function(name,context,scope){var elementInfo=context.getElementInfo(name,scope);if(Jsonix.Util.Type.exists(elementInfo)){return elementInfo.typeInfo}else{return undefined}}});Jsonix.Binding.Unmarshalls.Element.AsElementRef=Jsonix.Class({convertFromTypedNamedValue:function(typedNamedValue,context,input,scope){return{name:typedNamedValue.name,value:typedNamedValue.value}}});Jsonix.Binding.Unmarshalls.Element.AsSimplifiedElementRef=Jsonix.Class({convertFromTypedNamedValue:function(typedNamedValue,context,input,scope){var propertyName=typedNamedValue.name.toCanonicalString(context);var value={};value[propertyName]=typedNamedValue.value;return value}});Jsonix.Binding.Marshaller=Jsonix.Class(Jsonix.Binding.Marshalls.Element,Jsonix.Binding.Marshalls.Element.AsElementRef,{context:null,initialize:function(context){Jsonix.Util.Ensure.ensureObject(context);this.context=context},marshalString:function(value){var doc=this.marshalDocument(value);var text=Jsonix.DOM.serialize(doc);return text},marshalDocument:function(value){var output=new Jsonix.XML.Output({namespacePrefixes:this.context.namespacePrefixes});var doc=output.writeStartDocument();this.marshalElement(value,this.context,output,undefined);output.writeEndDocument();return doc},CLASS_NAME:"Jsonix.Binding.Marshaller"});Jsonix.Binding.Marshaller.Simplified=Jsonix.Class(Jsonix.Binding.Marshaller,{CLASS_NAME:"Jsonix.Binding.Marshaller.Simplified"});Jsonix.Binding.Unmarshaller=Jsonix.Class(Jsonix.Binding.Unmarshalls.Element,Jsonix.Binding.Unmarshalls.Element.AsElementRef,{context:null,allowTypedObject:true,allowDom:false,initialize:function(context){Jsonix.Util.Ensure.ensureObject(context);this.context=context},unmarshalString:function(text){Jsonix.Util.Ensure.ensureString(text);var doc=Jsonix.DOM.parse(text);return this.unmarshalDocument(doc)},unmarshalURL:function(url,callback,options){Jsonix.Util.Ensure.ensureString(url);Jsonix.Util.Ensure.ensureFunction(callback);if(Jsonix.Util.Type.exists(options)){Jsonix.Util.Ensure.ensureObject(options)}that=this;Jsonix.DOM.load(url,function(doc){callback(that.unmarshalDocument(doc))},options)},unmarshalFile:function(fileName,callback,options){if(typeof _jsonix_fs==="undefined"){throw new Error("File unmarshalling is only available in environments which support file systems.")}Jsonix.Util.Ensure.ensureString(fileName);Jsonix.Util.Ensure.ensureFunction(callback);if(Jsonix.Util.Type.exists(options)){Jsonix.Util.Ensure.ensureObject(options)}that=this;var fs=_jsonix_fs;fs.readFile(fileName,options,function(err,data){if(err){throw err}else{var text=data.toString();var doc=Jsonix.DOM.parse(text);callback(that.unmarshalDocument(doc))}})},unmarshalDocument:function(doc,scope){var input=new Jsonix.XML.Input(doc);var result=null;var callback=function(_result){result=_result};input.nextTag();this.unmarshalElement(this.context,input,scope,callback);return result},CLASS_NAME:"Jsonix.Binding.Unmarshaller"});Jsonix.Binding.Unmarshaller.Simplified=Jsonix.Class(Jsonix.Binding.Unmarshaller,Jsonix.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Binding.Unmarshaller.Simplified"});Jsonix.Model.TypeInfo=Jsonix.Class({name:null,baseTypeInfo:null,initialize:function(){},isBasedOn:function(typeInfo){var currentTypeInfo=this;while(currentTypeInfo){if(typeInfo===currentTypeInfo){return true}currentTypeInfo=currentTypeInfo.baseTypeInfo}return false},CLASS_NAME:"Jsonix.Model.TypeInfo"});Jsonix.Model.ClassInfo=Jsonix.Class(Jsonix.Model.TypeInfo,Jsonix.Mapping.Styled,{name:null,localName:null,typeName:null,instanceFactory:null,properties:null,structure:null,targetNamespace:"",defaultElementNamespaceURI:"",defaultAttributeNamespaceURI:"",built:false,initialize:function(mapping,options){Jsonix.Model.TypeInfo.prototype.initialize.apply(this,[]);Jsonix.Mapping.Styled.prototype.initialize.apply(this,[options]);Jsonix.Util.Ensure.ensureObject(mapping);var n=mapping.name||mapping.n||undefined;Jsonix.Util.Ensure.ensureString(n);this.name=n;var ln=mapping.localName||mapping.ln||null;this.localName=ln;var dens=mapping.defaultElementNamespaceURI||mapping.dens||mapping.targetNamespace||mapping.tns||"";this.defaultElementNamespaceURI=dens;var tns=mapping.targetNamespace||mapping.tns||mapping.defaultElementNamespaceURI||mapping.dens||this.defaultElementNamespaceURI;this.targetNamespace=tns;var dans=mapping.defaultAttributeNamespaceURI||mapping.dans||"";this.defaultAttributeNamespaceURI=dans;var bti=mapping.baseTypeInfo||mapping.bti||null;this.baseTypeInfo=bti;var inF=mapping.instanceFactory||mapping.inF||undefined;if(Jsonix.Util.Type.exists(inF)){Jsonix.Util.Ensure.ensureFunction(inF);this.instanceFactory=inF}var tn=mapping.typeName||mapping.tn||undefined;if(Jsonix.Util.Type.exists(tn)){if(Jsonix.Util.Type.isString(tn)){this.typeName=new Jsonix.XML.QName(this.targetNamespace,tn)}else{this.typeName=Jsonix.XML.QName.fromObject(tn)}}else if(Jsonix.Util.Type.exists(ln)){this.typeName=new Jsonix.XML.QName(tns,ln)}this.properties=[];var ps=mapping.propertyInfos||mapping.ps||[];Jsonix.Util.Ensure.ensureArray(ps);for(var index=0;index<ps.length;index++){this.p(ps[index])}},destroy:function(){},build:function(context,module){if(!this.built){this.baseTypeInfo=context.resolveTypeInfo(this.baseTypeInfo,module);if(Jsonix.Util.Type.exists(this.baseTypeInfo)){this.baseTypeInfo.build(context,module)}for(var index=0;index<this.properties.length;index++){var propertyInfo=this.properties[index];propertyInfo.build(context,module)}var structure={elements:null,attributes:{},anyAttribute:null,value:null,any:null};this.buildStructure(context,structure);this.structure=structure}},buildStructure:function(context,structure){if(Jsonix.Util.Type.exists(this.baseTypeInfo)){this.baseTypeInfo.buildStructure(context,structure)}for(var index=0;index<this.properties.length;index++){var propertyInfo=this.properties[index];propertyInfo.buildStructure(context,structure)}},unmarshal:function(context,input){this.build(context);var result;if(this.instanceFactory){result=new this.instanceFactory}else{result={TYPE_NAME:this.name}}if(input.eventType!==1){throw new Error("Parser must be on START_ELEMENT to read a class info.")}if(Jsonix.Util.Type.exists(this.structure.attributes)){var attributeCount=input.getAttributeCount();if(attributeCount!==0){for(var index=0;index<attributeCount;index++){var attributeNameKey=input.getAttributeNameKey(index);if(Jsonix.Util.Type.exists(this.structure.attributes[attributeNameKey])){var attributeValue=input.getAttributeValue(index);if(Jsonix.Util.Type.isString(attributeValue)){var attributePropertyInfo=this.structure.attributes[attributeNameKey];this.unmarshalPropertyValue(context,input,attributePropertyInfo,result,attributeValue)}}}}}if(Jsonix.Util.Type.exists(this.structure.anyAttribute)){var propertyInfo=this.structure.anyAttribute;this.unmarshalProperty(context,input,propertyInfo,result)}if(Jsonix.Util.Type.exists(this.structure.elements)){var et=input.next();while(et!==Jsonix.XML.Input.END_ELEMENT){if(et===Jsonix.XML.Input.START_ELEMENT){var elementNameKey=input.getNameKey();if(Jsonix.Util.Type.exists(this.structure.elements[elementNameKey])){var elementPropertyInfo=this.structure.elements[elementNameKey];this.unmarshalProperty(context,input,elementPropertyInfo,result)}else if(Jsonix.Util.Type.exists(this.structure.any)){var anyPropertyInfo=this.structure.any;this.unmarshalProperty(context,input,anyPropertyInfo,result)}else{et=input.skipElement()}}else if(et===Jsonix.XML.Input.CHARACTERS||et===Jsonix.XML.Input.CDATA||et===Jsonix.XML.Input.ENTITY_REFERENCE){if(Jsonix.Util.Type.exists(this.structure.mixed)){var mixedPropertyInfo=this.structure.mixed;this.unmarshalProperty(context,input,mixedPropertyInfo,result)}}else if(et===Jsonix.XML.Input.SPACE||et===Jsonix.XML.Input.COMMENT||et===Jsonix.XML.Input.PROCESSING_INSTRUCTION){}else{throw new Error("Illegal state: unexpected event type ["+et+"].")}et=input.next()}}else if(Jsonix.Util.Type.exists(this.structure.value)){var valuePropertyInfo=this.structure.value;this.unmarshalProperty(context,input,valuePropertyInfo,result)}else{input.nextTag()}if(input.eventType!==2){throw new Error("Illegal state: must be END_ELEMENT.")}return result},unmarshalProperty:function(context,input,propertyInfo,result){var propertyValue=propertyInfo.unmarshal(context,input,this);propertyInfo.setProperty(result,propertyValue)},unmarshalPropertyValue:function(context,input,propertyInfo,result,value){var propertyValue=propertyInfo.unmarshalValue(value,context,input,this);propertyInfo.setProperty(result,propertyValue)},marshal:function(value,context,output,scope){if(this.isMarshallable(value,context,scope)){if(Jsonix.Util.Type.exists(this.baseTypeInfo)){this.baseTypeInfo.marshal(value,context,output)}for(var index=0;index<this.properties.length;index++){var propertyInfo=this.properties[index];var propertyValue=value[propertyInfo.name];if(Jsonix.Util.Type.exists(propertyValue)){propertyInfo.marshal(propertyValue,context,output,this)}}}else{if(this.structure.value){var valuePropertyInfo=this.structure.value;valuePropertyInfo.marshal(value,context,output,this)}else if(this.properties.length===1){var singlePropertyInfo=this.properties[0];singlePropertyInfo.marshal(value,context,output,this)}else{throw new Error("The passed value ["+value+"] is not an object and there is no single suitable property to marshal it.")}}},isMarshallable:function(value,context,scope){return this.isInstance(value,context,scope)||Jsonix.Util.Type.isObject(value)&&!Jsonix.Util.Type.isArray(value)},isInstance:function(value,context,scope){if(this.instanceFactory){return value instanceof this.instanceFactory}else{return Jsonix.Util.Type.isObject(value)&&Jsonix.Util.Type.isString(value.TYPE_NAME)&&value.TYPE_NAME===this.name}},b:function(baseTypeInfo){Jsonix.Util.Ensure.ensureObject(baseTypeInfo);this.baseTypeInfo=baseTypeInfo;return this},ps:function(){return this},p:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);if(mapping instanceof Jsonix.Model.PropertyInfo){this.addProperty(mapping)}else{mapping=Jsonix.Util.Type.cloneObject(mapping);var type=mapping.type||mapping.t||"element";if(Jsonix.Util.Type.isFunction(this.propertyInfoCreators[type])){var propertyInfoCreator=this.propertyInfoCreators[type];propertyInfoCreator.call(this,mapping)}else{throw new Error("Unknown property info type ["+type+"].")}}},aa:function(mapping){this.addDefaultNamespaces(mapping);return this.addProperty(new this.mappingStyle.anyAttributePropertyInfo(mapping,{mappingStyle:this.mappingStyle}))},ae:function(mapping){this.addDefaultNamespaces(mapping);return this.addProperty(new this.mappingStyle.anyElementPropertyInfo(mapping,{mappingStyle:this.mappingStyle}))},a:function(mapping){this.addDefaultNamespaces(mapping);return this.addProperty(new this.mappingStyle.attributePropertyInfo(mapping,{mappingStyle:this.mappingStyle}))},em:function(mapping){this.addDefaultNamespaces(mapping);return this.addProperty(new this.mappingStyle.elementMapPropertyInfo(mapping,{mappingStyle:this.mappingStyle}))},e:function(mapping){this.addDefaultNamespaces(mapping);return this.addProperty(new this.mappingStyle.elementPropertyInfo(mapping,{mappingStyle:this.mappingStyle}))},es:function(mapping){this.addDefaultNamespaces(mapping);return this.addProperty(new this.mappingStyle.elementsPropertyInfo(mapping,{mappingStyle:this.mappingStyle}))},er:function(mapping){this.addDefaultNamespaces(mapping);return this.addProperty(new this.mappingStyle.elementRefPropertyInfo(mapping,{mappingStyle:this.mappingStyle}))},ers:function(mapping){this.addDefaultNamespaces(mapping);return this.addProperty(new this.mappingStyle.elementRefsPropertyInfo(mapping,{mappingStyle:this.mappingStyle}))},v:function(mapping){this.addDefaultNamespaces(mapping);return this.addProperty(new this.mappingStyle.valuePropertyInfo(mapping,{mappingStyle:this.mappingStyle}))},addDefaultNamespaces:function(mapping){if(Jsonix.Util.Type.isObject(mapping)){if(!Jsonix.Util.Type.isString(mapping.defaultElementNamespaceURI)){mapping.defaultElementNamespaceURI=this.defaultElementNamespaceURI}if(!Jsonix.Util.Type.isString(mapping.defaultAttributeNamespaceURI)){mapping.defaultAttributeNamespaceURI=this.defaultAttributeNamespaceURI}}},addProperty:function(property){this.properties.push(property);return this},CLASS_NAME:"Jsonix.Model.ClassInfo"});Jsonix.Model.ClassInfo.prototype.propertyInfoCreators={aa:Jsonix.Model.ClassInfo.prototype.aa,anyAttribute:Jsonix.Model.ClassInfo.prototype.aa,ae:Jsonix.Model.ClassInfo.prototype.ae,anyElement:Jsonix.Model.ClassInfo.prototype.ae,a:Jsonix.Model.ClassInfo.prototype.a,attribute:Jsonix.Model.ClassInfo.prototype.a,em:Jsonix.Model.ClassInfo.prototype.em,elementMap:Jsonix.Model.ClassInfo.prototype.em,e:Jsonix.Model.ClassInfo.prototype.e,element:Jsonix.Model.ClassInfo.prototype.e,es:Jsonix.Model.ClassInfo.prototype.es,elements:Jsonix.Model.ClassInfo.prototype.es,er:Jsonix.Model.ClassInfo.prototype.er,elementRef:Jsonix.Model.ClassInfo.prototype.er,ers:Jsonix.Model.ClassInfo.prototype.ers,elementRefs:Jsonix.Model.ClassInfo.prototype.ers,v:Jsonix.Model.ClassInfo.prototype.v,value:Jsonix.Model.ClassInfo.prototype.v};Jsonix.Model.EnumLeafInfo=Jsonix.Class(Jsonix.Model.TypeInfo,{name:null,baseTypeInfo:"String",entries:null,keys:null,values:null,built:false,initialize:function(mapping){Jsonix.Model.TypeInfo.prototype.initialize.apply(this,[]);Jsonix.Util.Ensure.ensureObject(mapping);var n=mapping.name||mapping.n||undefined;Jsonix.Util.Ensure.ensureString(n);this.name=n;var bti=mapping.baseTypeInfo||mapping.bti||"String";this.baseTypeInfo=bti;var vs=mapping.values||mapping.vs||undefined;Jsonix.Util.Ensure.ensureExists(vs);if(!(Jsonix.Util.Type.isObject(vs)||Jsonix.Util.Type.isArray(vs))){throw new Error("Enum values must be either an array or an object.")}else{this.entries=vs}},build:function(context,module){if(!this.built){this.baseTypeInfo=context.resolveTypeInfo(this.baseTypeInfo,module);this.baseTypeInfo.build(context,module);var items=this.entries;var entries={};var keys=[];var values=[];var index=0;var key;var value;if(Jsonix.Util.Type.isArray(items)){for(index=0;index<items.length;index++){value=items[index];if(Jsonix.Util.Type.isString(value)){key=value;if(!Jsonix.Util.Type.isFunction(this.baseTypeInfo.parse)){throw new Error("Enum value is provided as string but the base type ["+this.baseTypeInfo.name+"] of the enum info ["+this.name+"] does not implement the parse method.")}value=this.baseTypeInfo.parse(value,context,null,this)}else{if(this.baseTypeInfo.isInstance(value,context,this)){if(!Jsonix.Util.Type.isFunction(this.baseTypeInfo.print)){throw new Error("The base type ["+this.baseTypeInfo.name+"] of the enum info ["+this.name+"] does not implement the print method, unable to produce the enum key as string.")}key=this.baseTypeInfo.print(value,context,null,this)}else{throw new Error("Enum value ["+value+"] is not an instance of the enum base type ["+this.baseTypeInfo.name+"].")}}entries[key]=value;keys[index]=key;values[index]=value}}else if(Jsonix.Util.Type.isObject(items)){for(key in items){if(items.hasOwnProperty(key)){value=items[key];if(Jsonix.Util.Type.isString(value)){if(!Jsonix.Util.Type.isFunction(this.baseTypeInfo.parse)){throw new Error("Enum value is provided as string but the base type ["+this.baseTypeInfo.name+"] of the enum info ["+this.name+"] does not implement the parse method.")}value=this.baseTypeInfo.parse(value,context,null,this)}else{if(!this.baseTypeInfo.isInstance(value,context,this)){throw new Error("Enum value ["+value+"] is not an instance of the enum base type ["+this.baseTypeInfo.name+"].")}}entries[key]=value;keys[index]=key;values[index]=value;index++}}}else{throw new Error("Enum values must be either an array or an object.")}this.entries=entries;this.keys=keys;this.values=values;this.built=true}},unmarshal:function(context,input,scope){var text=input.getElementText();return this.parse(text,context,input,scope)},marshal:function(value,context,output,scope){if(Jsonix.Util.Type.exists(value)){output.writeCharacters(this.reprint(value,context,output,scope))
}},reprint:function(value,context,output,scope){if(Jsonix.Util.Type.isString(value)&&!this.isInstance(value,context,scope)){return this.print(this.parse(value,context,null,scope),context,output,scope)}else{return this.print(value,context,output,scope)}},print:function(value,context,output,scope){for(var index=0;index<this.values.length;index++){if(this.values[index]===value){return this.keys[index]}}throw new Error("Value ["+value+"] is invalid for the enum type ["+this.name+"].")},parse:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);if(this.entries.hasOwnProperty(text)){return this.entries[text]}else{throw new Error("Value ["+text+"] is invalid for the enum type ["+this.name+"].")}},isInstance:function(value,context,scope){for(var index=0;index<this.values.length;index++){if(this.values[index]===value){return true}}return false},CLASS_NAME:"Jsonix.Model.EnumLeafInfo"});Jsonix.Model.ElementInfo=Jsonix.Class({elementName:null,typeInfo:null,substitutionHead:null,scope:null,built:false,initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);var dens=mapping.defaultElementNamespaceURI||mapping.dens||"";this.defaultElementNamespaceURI=dens;var en=mapping.elementName||mapping.en||undefined;if(Jsonix.Util.Type.isObject(en)){this.elementName=Jsonix.XML.QName.fromObject(en)}else{Jsonix.Util.Ensure.ensureString(en);this.elementName=new Jsonix.XML.QName(this.defaultElementNamespaceURI,en)}var ti=mapping.typeInfo||mapping.ti||"String";this.typeInfo=ti;var sh=mapping.substitutionHead||mapping.sh||null;this.substitutionHead=sh;var sc=mapping.scope||mapping.sc||null;this.scope=sc},build:function(context,module){if(!this.built){this.typeInfo=context.resolveTypeInfo(this.typeInfo,module);this.scope=context.resolveTypeInfo(this.scope,module);this.built=true}},CLASS_NAME:"Jsonix.Model.ElementInfo"});Jsonix.Model.PropertyInfo=Jsonix.Class({name:null,collection:false,targetNamespace:"",defaultElementNamespaceURI:"",defaultAttributeNamespaceURI:"",built:false,initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);var n=mapping.name||mapping.n||undefined;Jsonix.Util.Ensure.ensureString(n);this.name=n;var dens=mapping.defaultElementNamespaceURI||mapping.dens||mapping.targetNamespace||mapping.tns||"";this.defaultElementNamespaceURI=dens;var tns=mapping.targetNamespace||mapping.tns||mapping.defaultElementNamespaceURI||mapping.dens||this.defaultElementNamespaceURI;this.targetNamespace=tns;var dans=mapping.defaultAttributeNamespaceURI||mapping.dans||"";this.defaultAttributeNamespaceURI=dans;var col=mapping.collection||mapping.col||false;this.collection=col},build:function(context,module){if(!this.built){this.doBuild(context,module);this.built=true}},doBuild:function(context,module){throw new Error("Abstract method [doBuild].")},buildStructure:function(context,structure){throw new Error("Abstract method [buildStructure].")},setProperty:function(object,value){if(Jsonix.Util.Type.exists(value)){if(this.collection){Jsonix.Util.Ensure.ensureArray(value,"Collection property requires an array value.");if(!Jsonix.Util.Type.exists(object[this.name])){object[this.name]=[]}for(var index=0;index<value.length;index++){object[this.name].push(value[index])}}else{object[this.name]=value}}},CLASS_NAME:"Jsonix.Model.PropertyInfo"});Jsonix.Model.AnyAttributePropertyInfo=Jsonix.Class(Jsonix.Model.PropertyInfo,{initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);Jsonix.Model.PropertyInfo.prototype.initialize.apply(this,[mapping])},unmarshal:function(context,input,scope){var attributeCount=input.getAttributeCount();if(attributeCount===0){return null}else{var result={};for(var index=0;index<attributeCount;index++){var value=input.getAttributeValue(index);if(Jsonix.Util.Type.isString(value)){var propertyName=this.convertFromAttributeName(input.getAttributeName(index),context,input,scope);result[propertyName]=value}}return result}},marshal:function(value,context,output,scope){if(!Jsonix.Util.Type.isObject(value)){return}for(var propertyName in value){if(value.hasOwnProperty(propertyName)){var propertyValue=value[propertyName];if(Jsonix.Util.Type.isString(propertyValue)){var attributeName=this.convertToAttributeName(propertyName,context,output,scope);output.writeAttribute(attributeName,propertyValue)}}}},convertFromAttributeName:function(attributeName,context,input,scope){return attributeName.key},convertToAttributeName:function(propertyName,context,output,scope){return Jsonix.XML.QName.fromObjectOrString(propertyName,context)},doBuild:function(context,module){},buildStructure:function(context,structure){Jsonix.Util.Ensure.ensureObject(structure);structure.anyAttribute=this},CLASS_NAME:"Jsonix.Model.AnyAttributePropertyInfo"});Jsonix.Model.AnyAttributePropertyInfo.Simplified=Jsonix.Class(Jsonix.Model.AnyAttributePropertyInfo,{convertFromAttributeName:function(attributeName,context,input,scope){return attributeName.toCanonicalString(context)}});Jsonix.Model.SingleTypePropertyInfo=Jsonix.Class(Jsonix.Model.PropertyInfo,{typeInfo:"String",initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);Jsonix.Model.PropertyInfo.prototype.initialize.apply(this,[mapping]);var ti=mapping.typeInfo||mapping.ti||"String";this.typeInfo=ti},doBuild:function(context,module){this.typeInfo=context.resolveTypeInfo(this.typeInfo,module)},unmarshalValue:function(value,context,input,scope){return this.parse(value,context,input,scope)},parse:function(value,context,input,scope){return this.typeInfo.parse(value,context,input,scope)},print:function(value,context,output,scope){return this.typeInfo.reprint(value,context,output,scope)},CLASS_NAME:"Jsonix.Model.SingleTypePropertyInfo"});Jsonix.Model.AttributePropertyInfo=Jsonix.Class(Jsonix.Model.SingleTypePropertyInfo,{attributeName:null,initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);Jsonix.Model.SingleTypePropertyInfo.prototype.initialize.apply(this,[mapping]);var an=mapping.attributeName||mapping.an||undefined;if(Jsonix.Util.Type.isObject(an)){this.attributeName=Jsonix.XML.QName.fromObject(an)}else if(Jsonix.Util.Type.isString(an)){this.attributeName=new Jsonix.XML.QName(this.defaultAttributeNamespaceURI,an)}else{this.attributeName=new Jsonix.XML.QName(this.defaultAttributeNamespaceURI,this.name)}},unmarshal:function(context,input,scope){var attributeCount=input.getAttributeCount();var result=null;for(var index=0;index<attributeCount;index++){var attributeNameKey=input.getAttributeNameKey(index);if(this.attributeName.key===attributeNameKey){var attributeValue=input.getAttributeValue(index);if(Jsonix.Util.Type.isString(attributeValue)){result=this.unmarshalValue(attributeValue,context,input,scope)}}}return result},marshal:function(value,context,output,scope){if(Jsonix.Util.Type.exists(value)){output.writeAttribute(this.attributeName,this.print(value,context,output,scope))}},buildStructure:function(context,structure){Jsonix.Util.Ensure.ensureObject(structure);Jsonix.Util.Ensure.ensureObject(structure.attributes);var key=this.attributeName.key;structure.attributes[key]=this},CLASS_NAME:"Jsonix.Model.AttributePropertyInfo"});Jsonix.Model.ValuePropertyInfo=Jsonix.Class(Jsonix.Model.SingleTypePropertyInfo,{initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);Jsonix.Model.SingleTypePropertyInfo.prototype.initialize.apply(this,[mapping])},unmarshal:function(context,input,scope){var text=input.getElementText();return this.unmarshalValue(text,context,input,scope)},marshal:function(value,context,output,scope){if(!Jsonix.Util.Type.exists(value)){return}output.writeCharacters(this.print(value,context,output,scope))},buildStructure:function(context,structure){Jsonix.Util.Ensure.ensureObject(structure);if(Jsonix.Util.Type.exists(structure.elements)){throw new Error("The structure already defines element mappings, it cannot define a value property.")}else{structure.value=this}},CLASS_NAME:"Jsonix.Model.ValuePropertyInfo"});Jsonix.Model.AbstractElementsPropertyInfo=Jsonix.Class(Jsonix.Binding.Unmarshalls.Element,Jsonix.Binding.Unmarshalls.WrapperElement,Jsonix.Model.PropertyInfo,{wrapperElementName:null,allowDom:false,allowTypedObject:true,mixed:false,initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);Jsonix.Model.PropertyInfo.prototype.initialize.apply(this,[mapping]);var wen=mapping.wrapperElementName||mapping.wen||undefined;if(Jsonix.Util.Type.isObject(wen)){this.wrapperElementName=Jsonix.XML.QName.fromObject(wen)}else if(Jsonix.Util.Type.isString(wen)){this.wrapperElementName=new Jsonix.XML.QName(this.defaultElementNamespaceURI,wen)}else{this.wrapperElementName=null}},unmarshal:function(context,input,scope){var result=null;var that=this;var callback=function(value){if(that.collection){if(result===null){result=[]}result.push(value)}else{if(result===null){result=value}else{throw new Error("Value already set.")}}};if(Jsonix.Util.Type.exists(this.wrapperElementName)){this.unmarshalWrapperElement(context,input,scope,callback)}else{this.unmarshalElement(context,input,scope,callback)}return result},marshal:function(value,context,output,scope){if(!Jsonix.Util.Type.exists(value)){return}if(Jsonix.Util.Type.exists(this.wrapperElementName)){output.writeStartElement(this.wrapperElementName)}if(!this.collection){this.marshalElement(value,context,output,scope)}else{Jsonix.Util.Ensure.ensureArray(value);for(var index=0;index<value.length;index++){var item=value[index];this.marshalElement(item,context,output,scope)}}if(Jsonix.Util.Type.exists(this.wrapperElementName)){output.writeEndElement()}},convertFromTypedNamedValue:function(elementValue,context,input,scope){return elementValue.value},buildStructure:function(context,structure){Jsonix.Util.Ensure.ensureObject(structure);if(Jsonix.Util.Type.exists(structure.value)){throw new Error("The structure already defines a value property.")}else if(!Jsonix.Util.Type.exists(structure.elements)){structure.elements={}}if(Jsonix.Util.Type.exists(this.wrapperElementName)){structure.elements[this.wrapperElementName.key]=this}else{this.buildStructureElements(context,structure)}},buildStructureElements:function(context,structure){throw new Error("Abstract method [buildStructureElements].")},CLASS_NAME:"Jsonix.Model.AbstractElementsPropertyInfo"});Jsonix.Model.ElementPropertyInfo=Jsonix.Class(Jsonix.Model.AbstractElementsPropertyInfo,Jsonix.Binding.Marshalls.Element,{typeInfo:"String",elementName:null,initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);Jsonix.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this,[mapping]);var ti=mapping.typeInfo||mapping.ti||"String";if(Jsonix.Util.Type.isObject(ti)){this.typeInfo=ti}else{Jsonix.Util.Ensure.ensureString(ti);this.typeInfo=ti}var en=mapping.elementName||mapping.en||undefined;if(Jsonix.Util.Type.isObject(en)){this.elementName=Jsonix.XML.QName.fromObject(en)}else if(Jsonix.Util.Type.isString(en)){this.elementName=new Jsonix.XML.QName(this.defaultElementNamespaceURI,en)}else{this.elementName=new Jsonix.XML.QName(this.defaultElementNamespaceURI,this.name)}},getTypeInfoByElementName:function(elementName,context,scope){return this.typeInfo},convertToTypedNamedValue:function(value,context,output,scope){return{name:this.elementName,value:value,typeInfo:this.typeInfo}},doBuild:function(context,module){this.typeInfo=context.resolveTypeInfo(this.typeInfo,module)},buildStructureElements:function(context,structure){structure.elements[this.elementName.key]=this},CLASS_NAME:"Jsonix.Model.ElementPropertyInfo"});Jsonix.Model.ElementsPropertyInfo=Jsonix.Class(Jsonix.Model.AbstractElementsPropertyInfo,Jsonix.Binding.Marshalls.Element,{elementTypeInfos:null,elementTypeInfosMap:null,initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);Jsonix.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this,[mapping]);var etis=mapping.elementTypeInfos||mapping.etis||[];Jsonix.Util.Ensure.ensureArray(etis);this.elementTypeInfos=[];for(var index=0;index<etis.length;index++){this.elementTypeInfos[index]=Jsonix.Util.Type.cloneObject(etis[index])}},getTypeInfoByElementName:function(elementName,context,scope){return this.elementTypeInfosMap[elementName.key]},convertToTypedNamedValue:function(value,context,output,scope){for(var index=0;index<this.elementTypeInfos.length;index++){var elementTypeInfo=this.elementTypeInfos[index];var typeInfo=elementTypeInfo.typeInfo;if(typeInfo.isInstance(value,context,scope)){var elementName=elementTypeInfo.elementName;return{name:elementName,value:value,typeInfo:typeInfo}}}if(context.supportXsiType){var actualTypeInfo=context.getTypeInfoByValue(value);if(actualTypeInfo&&actualTypeInfo.typeName){for(var jndex=0;jndex<this.elementTypeInfos.length;jndex++){var eti=this.elementTypeInfos[jndex];var ti=eti.typeInfo;if(actualTypeInfo.isBasedOn(ti)){var en=eti.elementName;return{name:en,value:value,typeInfo:ti}}}}}throw new Error("Could not find an element with type info supporting the value ["+value+"].")},doBuild:function(context,module){this.elementTypeInfosMap={};var etiti,etien;for(var index=0;index<this.elementTypeInfos.length;index++){var elementTypeInfo=this.elementTypeInfos[index];Jsonix.Util.Ensure.ensureObject(elementTypeInfo);etiti=elementTypeInfo.typeInfo||elementTypeInfo.ti||"String";elementTypeInfo.typeInfo=context.resolveTypeInfo(etiti,module);etien=elementTypeInfo.elementName||elementTypeInfo.en||undefined;elementTypeInfo.elementName=Jsonix.XML.QName.fromObjectOrString(etien,context,this.defaultElementNamespaceURI);this.elementTypeInfosMap[elementTypeInfo.elementName.key]=elementTypeInfo.typeInfo}},buildStructureElements:function(context,structure){for(var index=0;index<this.elementTypeInfos.length;index++){var elementTypeInfo=this.elementTypeInfos[index];structure.elements[elementTypeInfo.elementName.key]=this}},CLASS_NAME:"Jsonix.Model.ElementsPropertyInfo"});Jsonix.Model.ElementMapPropertyInfo=Jsonix.Class(Jsonix.Model.AbstractElementsPropertyInfo,{elementName:null,key:null,value:null,entryTypeInfo:null,initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);Jsonix.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this,[mapping]);var k=mapping.key||mapping.k||undefined;Jsonix.Util.Ensure.ensureObject(k);var v=mapping.value||mapping.v||undefined;Jsonix.Util.Ensure.ensureObject(v);var en=mapping.elementName||mapping.en||undefined;if(Jsonix.Util.Type.isObject(en)){this.elementName=Jsonix.XML.QName.fromObject(en)}else if(Jsonix.Util.Type.isString(en)){this.elementName=new Jsonix.XML.QName(this.defaultElementNamespaceURI,en)}else{this.elementName=new Jsonix.XML.QName(this.defaultElementNamespaceURI,this.name)}this.entryTypeInfo=new Jsonix.Model.ClassInfo({name:"Map<"+k.name+","+v.name+">",propertyInfos:[k,v]})},unmarshal:function(context,input,scope){var result=null;var that=this;var callback=function(value){if(Jsonix.Util.Type.exists(value)){Jsonix.Util.Ensure.ensureObject(value,"Map property requires an object.");if(!Jsonix.Util.Type.exists(result)){result={}}for(var attributeName in value){if(value.hasOwnProperty(attributeName)){var attributeValue=value[attributeName];if(that.collection){if(!Jsonix.Util.Type.exists(result[attributeName])){result[attributeName]=[]}result[attributeName].push(attributeValue)}else{if(!Jsonix.Util.Type.exists(result[attributeName])){result[attributeName]=attributeValue}else{throw new Error("Value was already set.")}}}}}};if(Jsonix.Util.Type.exists(this.wrapperElementName)){this.unmarshalWrapperElement(context,input,scope,callback)}else{this.unmarshalElement(context,input,scope,callback)}return result},getTypeInfoByInputElement:function(context,input,scope){return this.entryTypeInfo},convertFromTypedNamedValue:function(elementValue,context,input,scope){var entry=elementValue.value;var result={};if(Jsonix.Util.Type.isString(entry[this.key.name])){result[entry[this.key.name]]=entry[this.value.name]}return result},marshal:function(value,context,output,scope){if(!Jsonix.Util.Type.exists(value)){return}if(Jsonix.Util.Type.exists(this.wrapperElementName)){output.writeStartElement(this.wrapperElementName)}this.marshalElement(value,context,output,scope);if(Jsonix.Util.Type.exists(this.wrapperElementName)){output.writeEndElement()}},marshalElement:function(value,context,output,scope){if(!!value){for(var attributeName in value){if(value.hasOwnProperty(attributeName)){var attributeValue=value[attributeName];if(!this.collection){var singleEntry={};singleEntry[this.key.name]=attributeName;singleEntry[this.value.name]=attributeValue;output.writeStartElement(this.elementName);this.entryTypeInfo.marshal(singleEntry,context,output,scope);output.writeEndElement()}else{for(var index=0;index<attributeValue.length;index++){var collectionEntry={};collectionEntry[this.key.name]=attributeName;collectionEntry[this.value.name]=attributeValue[index];output.writeStartElement(this.elementName);this.entryTypeInfo.marshal(collectionEntry,context,output,scope);output.writeEndElement()}}}}}},doBuild:function(context,module){this.entryTypeInfo.build(context,module);this.key=this.entryTypeInfo.properties[0];this.value=this.entryTypeInfo.properties[1]},buildStructureElements:function(context,structure){structure.elements[this.elementName.key]=this},setProperty:function(object,value){if(Jsonix.Util.Type.exists(value)){Jsonix.Util.Ensure.ensureObject(value,"Map property requires an object.");if(!Jsonix.Util.Type.exists(object[this.name])){object[this.name]={}}var map=object[this.name];for(var attributeName in value){if(value.hasOwnProperty(attributeName)){var attributeValue=value[attributeName];if(this.collection){if(!Jsonix.Util.Type.exists(map[attributeName])){map[attributeName]=[]}for(var index=0;index<attributeValue.length;index++){map[attributeName].push(attributeValue[index])}}else{map[attributeName]=attributeValue}}}}},CLASS_NAME:"Jsonix.Model.ElementMapPropertyInfo"});Jsonix.Model.AbstractElementRefsPropertyInfo=Jsonix.Class(Jsonix.Binding.Marshalls.Element,Jsonix.Binding.Marshalls.Element.AsElementRef,Jsonix.Binding.Unmarshalls.Element,Jsonix.Binding.Unmarshalls.WrapperElement,Jsonix.Binding.Unmarshalls.Element.AsElementRef,Jsonix.Model.PropertyInfo,{wrapperElementName:null,allowDom:true,allowTypedObject:true,mixed:true,initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping,"Mapping must be an object.");Jsonix.Model.PropertyInfo.prototype.initialize.apply(this,[mapping]);var wen=mapping.wrapperElementName||mapping.wen||undefined;if(Jsonix.Util.Type.isObject(wen)){this.wrapperElementName=Jsonix.XML.QName.fromObject(wen)}else if(Jsonix.Util.Type.isString(wen)){this.wrapperElementName=new Jsonix.XML.QName(this.defaultElementNamespaceURI,wen)}else{this.wrapperElementName=null}var dom=Jsonix.Util.Type.defaultValue(mapping.allowDom,mapping.dom,true);var typed=Jsonix.Util.Type.defaultValue(mapping.allowTypedObject,mapping.typed,true);var mx=Jsonix.Util.Type.defaultValue(mapping.mixed,mapping.mx,true);this.allowDom=dom;this.allowTypedObject=typed;this.mixed=mx},unmarshal:function(context,input,scope){var result=null;var that=this;var callback=function(value){if(that.collection){if(result===null){result=[]}result.push(value)}else{if(result===null){result=value}else{throw new Error("Value already set.")}}};var et=input.eventType;if(et===Jsonix.XML.Input.START_ELEMENT){if(Jsonix.Util.Type.exists(this.wrapperElementName)){this.unmarshalWrapperElement(context,input,scope,callback)}else{this.unmarshalElement(context,input,scope,callback)}}else if(this.mixed&&(et===Jsonix.XML.Input.CHARACTERS||et===Jsonix.XML.Input.CDATA||et===Jsonix.XML.Input.ENTITY_REFERENCE)){callback(input.getText())}else if(et===Jsonix.XML.Input.SPACE||et===Jsonix.XML.Input.COMMENT||et===Jsonix.XML.Input.PROCESSING_INSTRUCTION){}else{throw new Error("Illegal state: unexpected event type ["+et+"].")}return result},marshal:function(value,context,output,scope){if(Jsonix.Util.Type.exists(value)){if(Jsonix.Util.Type.exists(this.wrapperElementName)){output.writeStartElement(this.wrapperElementName)}if(!this.collection){this.marshalItem(value,context,output,scope)}else{Jsonix.Util.Ensure.ensureArray(value,"Collection property requires an array value.");for(var index=0;index<value.length;index++){var item=value[index];this.marshalItem(item,context,output,scope)}}if(Jsonix.Util.Type.exists(this.wrapperElementName)){output.writeEndElement()}}},marshalItem:function(value,context,output,scope){if(Jsonix.Util.Type.isString(value)){if(!this.mixed){throw new Error("Property is not mixed, can't handle string values.")}else{output.writeCharacters(value)}}else if(this.allowDom&&Jsonix.Util.Type.exists(value.nodeType)){output.writeNode(value)}else if(Jsonix.Util.Type.isObject(value)){this.marshalElement(value,context,output,scope)}else{if(this.mixed){throw new Error("Unsupported content type, either objects or strings are supported.")}else{throw new Error("Unsupported content type, only objects are supported.")}}},getTypeInfoByElementName:function(elementName,context,scope){var propertyElementTypeInfo=this.getPropertyElementTypeInfo(elementName,context);if(Jsonix.Util.Type.exists(propertyElementTypeInfo)){return propertyElementTypeInfo.typeInfo}else{var contextElementTypeInfo=context.getElementInfo(elementName,scope);if(Jsonix.Util.Type.exists(contextElementTypeInfo)){return contextElementTypeInfo.typeInfo}else{return undefined}}},getPropertyElementTypeInfo:function(elementName,context){throw new Error("Abstract method [getPropertyElementTypeInfo].")},buildStructure:function(context,structure){Jsonix.Util.Ensure.ensureObject(structure);if(Jsonix.Util.Type.exists(structure.value)){throw new Error("The structure already defines a value property.")}else if(!Jsonix.Util.Type.exists(structure.elements)){structure.elements={}}if(Jsonix.Util.Type.exists(this.wrapperElementName)){structure.elements[this.wrapperElementName.key]=this}else{this.buildStructureElements(context,structure)}if(this.allowDom||this.allowTypedObject){structure.any=this}if(this.mixed&&!Jsonix.Util.Type.exists(this.wrapperElementName)){structure.mixed=this}},buildStructureElements:function(context,structure){throw new Error("Abstract method [buildStructureElements].")},buildStructureElementTypeInfos:function(context,structure,elementTypeInfo){structure.elements[elementTypeInfo.elementName.key]=this;var substitutionMembers=context.getSubstitutionMembers(elementTypeInfo.elementName);if(Jsonix.Util.Type.isArray(substitutionMembers)){for(var jndex=0;jndex<substitutionMembers.length;jndex++){var substitutionElementInfo=substitutionMembers[jndex];this.buildStructureElementTypeInfos(context,structure,substitutionElementInfo)}}},CLASS_NAME:"Jsonix.Model.AbstractElementRefsPropertyInfo"});Jsonix.Model.ElementRefPropertyInfo=Jsonix.Class(Jsonix.Model.AbstractElementRefsPropertyInfo,{typeInfo:"String",elementName:null,initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);Jsonix.Model.AbstractElementRefsPropertyInfo.prototype.initialize.apply(this,[mapping]);var ti=mapping.typeInfo||mapping.ti||"String";if(Jsonix.Util.Type.isObject(ti)){this.typeInfo=ti}else{Jsonix.Util.Ensure.ensureString(ti);this.typeInfo=ti}var en=mapping.elementName||mapping.en||undefined;if(Jsonix.Util.Type.isObject(en)){this.elementName=Jsonix.XML.QName.fromObject(en)}else if(Jsonix.Util.Type.isString(en)){this.elementName=new Jsonix.XML.QName(this.defaultElementNamespaceURI,en)}else{this.elementName=new Jsonix.XML.QName(this.defaultElementNamespaceURI,this.name)}},getPropertyElementTypeInfo:function(elementName,context){var name=Jsonix.XML.QName.fromObjectOrString(elementName,context);if(name.key===this.elementName.key){return this}else{return null}},doBuild:function(context,module){this.typeInfo=context.resolveTypeInfo(this.typeInfo,module)},buildStructureElements:function(context,structure){this.buildStructureElementTypeInfos(context,structure,this)},CLASS_NAME:"Jsonix.Model.ElementRefPropertyInfo"});Jsonix.Model.ElementRefPropertyInfo.Simplified=Jsonix.Class(Jsonix.Model.ElementRefPropertyInfo,Jsonix.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Model.ElementRefPropertyInfo.Simplified"});Jsonix.Model.ElementRefsPropertyInfo=Jsonix.Class(Jsonix.Model.AbstractElementRefsPropertyInfo,{elementTypeInfos:null,elementTypeInfosMap:null,initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);Jsonix.Model.AbstractElementRefsPropertyInfo.prototype.initialize.apply(this,[mapping]);var etis=mapping.elementTypeInfos||mapping.etis||[];Jsonix.Util.Ensure.ensureArray(etis);this.elementTypeInfos=[];for(var index=0;index<etis.length;index++){this.elementTypeInfos[index]=Jsonix.Util.Type.cloneObject(etis[index])}},getPropertyElementTypeInfo:function(elementName,context){var name=Jsonix.XML.QName.fromObjectOrString(elementName,context);var typeInfo=this.elementTypeInfosMap[name.key];if(Jsonix.Util.Type.exists(typeInfo)){return{elementName:name,typeInfo:typeInfo}}else{return null}},doBuild:function(context,module){this.elementTypeInfosMap={};var etiti,etien;for(var index=0;index<this.elementTypeInfos.length;index++){var elementTypeInfo=this.elementTypeInfos[index];Jsonix.Util.Ensure.ensureObject(elementTypeInfo);etiti=elementTypeInfo.typeInfo||elementTypeInfo.ti||"String";elementTypeInfo.typeInfo=context.resolveTypeInfo(etiti,module);etien=elementTypeInfo.elementName||elementTypeInfo.en||undefined;elementTypeInfo.elementName=Jsonix.XML.QName.fromObjectOrString(etien,context,this.defaultElementNamespaceURI);this.elementTypeInfosMap[elementTypeInfo.elementName.key]=elementTypeInfo.typeInfo}},buildStructureElements:function(context,structure){for(var index=0;index<this.elementTypeInfos.length;index++){var elementTypeInfo=this.elementTypeInfos[index];this.buildStructureElementTypeInfos(context,structure,elementTypeInfo)}},CLASS_NAME:"Jsonix.Model.ElementRefsPropertyInfo"});Jsonix.Model.ElementRefsPropertyInfo.Simplified=Jsonix.Class(Jsonix.Model.ElementRefsPropertyInfo,Jsonix.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Model.ElementRefsPropertyInfo.Simplified"});Jsonix.Model.AnyElementPropertyInfo=Jsonix.Class(Jsonix.Binding.Marshalls.Element,Jsonix.Binding.Marshalls.Element.AsElementRef,Jsonix.Binding.Unmarshalls.Element,Jsonix.Binding.Unmarshalls.Element.AsElementRef,Jsonix.Model.PropertyInfo,{allowDom:true,allowTypedObject:true,mixed:true,initialize:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);Jsonix.Model.PropertyInfo.prototype.initialize.apply(this,[mapping]);var dom=Jsonix.Util.Type.defaultValue(mapping.allowDom,mapping.dom,true);var typed=Jsonix.Util.Type.defaultValue(mapping.allowTypedObject,mapping.typed,true);var mx=Jsonix.Util.Type.defaultValue(mapping.mixed,mapping.mx,true);this.allowDom=dom;this.allowTypedObject=typed;this.mixed=mx},unmarshal:function(context,input,scope){var result=null;var that=this;var callback=function(value){if(that.collection){if(result===null){result=[]}result.push(value)}else{if(result===null){result=value}else{throw new Error("Value already set.")}}};var et=input.eventType;if(et===Jsonix.XML.Input.START_ELEMENT){this.unmarshalElement(context,input,scope,callback)}else if(this.mixed&&(et===Jsonix.XML.Input.CHARACTERS||et===Jsonix.XML.Input.CDATA||et===Jsonix.XML.Input.ENTITY_REFERENCE)){callback(input.getText())}else if(this.mixed&&et===Jsonix.XML.Input.SPACE){}else if(et===Jsonix.XML.Input.COMMENT||et===Jsonix.XML.Input.PROCESSING_INSTRUCTION){}else{throw new Error("Illegal state: unexpected event type ["+et+"].")}return result},marshal:function(value,context,output,scope){if(!Jsonix.Util.Type.exists(value)){return}if(!this.collection){this.marshalItem(value,context,output,scope)}else{Jsonix.Util.Ensure.ensureArray(value);for(var index=0;index<value.length;index++){this.marshalItem(value[index],context,output,scope)}}},marshalItem:function(value,context,output,scope){if(this.mixed&&Jsonix.Util.Type.isString(value)){output.writeCharacters(value)}else if(this.allowDom&&Jsonix.Util.Type.exists(value.nodeType)){output.writeNode(value)}else{if(this.allowTypedObject){this.marshalElement(value,context,output,scope)}}},doBuild:function(context,module){},buildStructure:function(context,structure){Jsonix.Util.Ensure.ensureObject(structure);if(Jsonix.Util.Type.exists(structure.value)){throw new Error("The structure already defines a value property.")}else if(!Jsonix.Util.Type.exists(structure.elements)){structure.elements={}}if(this.allowDom||this.allowTypedObject){structure.any=this}if(this.mixed){structure.mixed=this}},CLASS_NAME:"Jsonix.Model.AnyElementPropertyInfo"});Jsonix.Model.AnyElementPropertyInfo.Simplified=Jsonix.Class(Jsonix.Model.AnyElementPropertyInfo,Jsonix.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Model.AnyElementPropertyInfo.Simplified"});Jsonix.Model.Module=Jsonix.Class(Jsonix.Mapping.Styled,{name:null,typeInfos:null,elementInfos:null,targetNamespace:"",defaultElementNamespaceURI:"",defaultAttributeNamespaceURI:"",initialize:function(mapping,options){Jsonix.Mapping.Styled.prototype.initialize.apply(this,[options]);this.typeInfos=[];this.elementInfos=[];if(typeof mapping!=="undefined"){Jsonix.Util.Ensure.ensureObject(mapping);var n=mapping.name||mapping.n||null;this.name=n;var dens=mapping.defaultElementNamespaceURI||mapping.dens||mapping.targetNamespace||mapping.tns||"";this.defaultElementNamespaceURI=dens;var tns=mapping.targetNamespace||mapping.tns||mapping.defaultElementNamespaceURI||mapping.dens||this.defaultElementNamespaceURI;this.targetNamespace=tns;var dans=mapping.defaultAttributeNamespaceURI||mapping.dans||"";this.defaultAttributeNamespaceURI=dans;var tis=mapping.typeInfos||mapping.tis||[];this.initializeTypeInfos(tis);for(var typeInfoName in mapping){if(mapping.hasOwnProperty(typeInfoName)){if(mapping[typeInfoName]instanceof this.mappingStyle.classInfo){this.typeInfos.push(mapping[typeInfoName])}}}var eis=mapping.elementInfos||mapping.eis||[];this.initializeElementInfos(eis)}},initializeTypeInfos:function(typeInfoMappings){Jsonix.Util.Ensure.ensureArray(typeInfoMappings);var index,typeInfoMapping,typeInfo;for(index=0;index<typeInfoMappings.length;index++){typeInfoMapping=typeInfoMappings[index];typeInfo=this.createTypeInfo(typeInfoMapping);this.typeInfos.push(typeInfo)}},initializeElementInfos:function(elementInfoMappings){Jsonix.Util.Ensure.ensureArray(elementInfoMappings);var index,elementInfoMapping,elementInfo;for(index=0;index<elementInfoMappings.length;index++){elementInfoMapping=elementInfoMappings[index];elementInfo=this.createElementInfo(elementInfoMapping);this.elementInfos.push(elementInfo)}},createTypeInfo:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);var typeInfo;if(mapping instanceof Jsonix.Model.TypeInfo){typeInfo=mapping}else{mapping=Jsonix.Util.Type.cloneObject(mapping);var type=mapping.type||mapping.t||"classInfo";if(Jsonix.Util.Type.isFunction(this.typeInfoCreators[type])){var typeInfoCreator=this.typeInfoCreators[type];typeInfo=typeInfoCreator.call(this,mapping)}else{throw new Error("Unknown type info type ["+type+"].")}}return typeInfo},initializeNames:function(mapping){var ln=mapping.localName||mapping.ln||null;mapping.localName=ln;var n=mapping.name||mapping.n||null;mapping.name=n;if(Jsonix.Util.Type.isString(mapping.name)){if(mapping.name.length>0&&mapping.name.charAt(0)==="."&&Jsonix.Util.Type.isString(this.name)){mapping.name=this.name+mapping.name}}else if(Jsonix.Util.Type.isString(ln)){if(Jsonix.Util.Type.isString(this.name)){mapping.name=this.name+"."+ln}else{mapping.name=ln}}else{throw new Error("Neither [name/n] nor [localName/ln] was provided for the class info.")}},createClassInfo:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);var dens=mapping.defaultElementNamespaceURI||mapping.dens||this.defaultElementNamespaceURI;mapping.defaultElementNamespaceURI=dens;var tns=mapping.targetNamespace||mapping.tns||this.targetNamespace;mapping.targetNamespace=tns;var dans=mapping.defaultAttributeNamespaceURI||mapping.dans||this.defaultAttributeNamespaceURI;
mapping.defaultAttributeNamespaceURI=dans;this.initializeNames(mapping);var classInfo=new this.mappingStyle.classInfo(mapping,{mappingStyle:this.mappingStyle});return classInfo},createEnumLeafInfo:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);this.initializeNames(mapping);var enumLeafInfo=new this.mappingStyle.enumLeafInfo(mapping,{mappingStyle:this.mappingStyle});return enumLeafInfo},createList:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);var ti=mapping.baseTypeInfo||mapping.typeInfo||mapping.bti||mapping.ti||"String";var tn=mapping.typeName||mapping.tn||null;if(Jsonix.Util.Type.exists(tn)){if(Jsonix.Util.Type.isString(tn)){tn=new Jsonix.XML.QName(this.targetNamespace,tn)}else{tn=Jsonix.XML.QName.fromObject(tn)}}var s=mapping.separator||mapping.sep||" ";Jsonix.Util.Ensure.ensureExists(ti);return new Jsonix.Schema.XSD.List(ti,tn,s)},createElementInfo:function(mapping){Jsonix.Util.Ensure.ensureObject(mapping);mapping=Jsonix.Util.Type.cloneObject(mapping);var dens=mapping.defaultElementNamespaceURI||mapping.dens||this.defaultElementNamespaceURI;mapping.defaultElementNamespaceURI=dens;var en=mapping.elementName||mapping.en||undefined;Jsonix.Util.Ensure.ensureExists(en);var ti=mapping.typeInfo||mapping.ti||"String";Jsonix.Util.Ensure.ensureExists(ti);mapping.typeInfo=ti;if(Jsonix.Util.Type.isObject(en)){mapping.elementName=Jsonix.XML.QName.fromObject(en)}else if(Jsonix.Util.Type.isString(en)){mapping.elementName=new Jsonix.XML.QName(this.defaultElementNamespaceURI,en)}else{throw new Error("Element info ["+mapping+"] must provide an element name.")}var sh=mapping.substitutionHead||mapping.sh||null;if(Jsonix.Util.Type.exists(sh)){if(Jsonix.Util.Type.isObject(sh)){mapping.substitutionHead=Jsonix.XML.QName.fromObject(sh)}else{Jsonix.Util.Ensure.ensureString(sh);mapping.substitutionHead=new Jsonix.XML.QName(this.defaultElementNamespaceURI,sh)}}var elementInfo=new this.mappingStyle.elementInfo(mapping,{mappingStyle:this.mappingStyle});return elementInfo},registerTypeInfos:function(context){for(var index=0;index<this.typeInfos.length;index++){var typeInfo=this.typeInfos[index];context.registerTypeInfo(typeInfo,this)}},buildTypeInfos:function(context){for(var index=0;index<this.typeInfos.length;index++){var typeInfo=this.typeInfos[index];typeInfo.build(context,this)}},registerElementInfos:function(context){for(var index=0;index<this.elementInfos.length;index++){var elementInfo=this.elementInfos[index];context.registerElementInfo(elementInfo,this)}},buildElementInfos:function(context){for(var index=0;index<this.elementInfos.length;index++){var elementInfo=this.elementInfos[index];elementInfo.build(context,this)}},cs:function(){return this},es:function(){return this},CLASS_NAME:"Jsonix.Model.Module"});Jsonix.Model.Module.prototype.typeInfoCreators={classInfo:Jsonix.Model.Module.prototype.createClassInfo,c:Jsonix.Model.Module.prototype.createClassInfo,enumInfo:Jsonix.Model.Module.prototype.createEnumLeafInfo,"enum":Jsonix.Model.Module.prototype.createEnumLeafInfo,list:Jsonix.Model.Module.prototype.createList,l:Jsonix.Model.Module.prototype.createList};Jsonix.Mapping.Style.Standard=Jsonix.Class(Jsonix.Mapping.Style,{marshaller:Jsonix.Binding.Marshaller,unmarshaller:Jsonix.Binding.Unmarshaller,module:Jsonix.Model.Module,elementInfo:Jsonix.Model.ElementInfo,classInfo:Jsonix.Model.ClassInfo,enumLeafInfo:Jsonix.Model.EnumLeafInfo,anyAttributePropertyInfo:Jsonix.Model.AnyAttributePropertyInfo,anyElementPropertyInfo:Jsonix.Model.AnyElementPropertyInfo,attributePropertyInfo:Jsonix.Model.AttributePropertyInfo,elementMapPropertyInfo:Jsonix.Model.ElementMapPropertyInfo,elementPropertyInfo:Jsonix.Model.ElementPropertyInfo,elementsPropertyInfo:Jsonix.Model.ElementsPropertyInfo,elementRefPropertyInfo:Jsonix.Model.ElementRefPropertyInfo,elementRefsPropertyInfo:Jsonix.Model.ElementRefsPropertyInfo,valuePropertyInfo:Jsonix.Model.ValuePropertyInfo,initialize:function(){Jsonix.Mapping.Style.prototype.initialize.apply(this)},CLASS_NAME:"Jsonix.Mapping.Style.Standard"});Jsonix.Mapping.Style.STYLES.standard=new Jsonix.Mapping.Style.Standard;Jsonix.Mapping.Style.Simplified=Jsonix.Class(Jsonix.Mapping.Style,{marshaller:Jsonix.Binding.Marshaller.Simplified,unmarshaller:Jsonix.Binding.Unmarshaller.Simplified,module:Jsonix.Model.Module,elementInfo:Jsonix.Model.ElementInfo,classInfo:Jsonix.Model.ClassInfo,enumLeafInfo:Jsonix.Model.EnumLeafInfo,anyAttributePropertyInfo:Jsonix.Model.AnyAttributePropertyInfo.Simplified,anyElementPropertyInfo:Jsonix.Model.AnyElementPropertyInfo.Simplified,attributePropertyInfo:Jsonix.Model.AttributePropertyInfo,elementMapPropertyInfo:Jsonix.Model.ElementMapPropertyInfo,elementPropertyInfo:Jsonix.Model.ElementPropertyInfo,elementsPropertyInfo:Jsonix.Model.ElementsPropertyInfo,elementRefPropertyInfo:Jsonix.Model.ElementRefPropertyInfo.Simplified,elementRefsPropertyInfo:Jsonix.Model.ElementRefsPropertyInfo.Simplified,valuePropertyInfo:Jsonix.Model.ValuePropertyInfo,initialize:function(){Jsonix.Mapping.Style.prototype.initialize.apply(this)},CLASS_NAME:"Jsonix.Mapping.Style.Simplified"});Jsonix.Mapping.Style.STYLES.simplified=new Jsonix.Mapping.Style.Simplified;Jsonix.Schema.XSD={};Jsonix.Schema.XSD.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema";Jsonix.Schema.XSD.PREFIX="xsd";Jsonix.Schema.XSD.qname=function(localPart){Jsonix.Util.Ensure.ensureString(localPart);return new Jsonix.XML.QName(Jsonix.Schema.XSD.NAMESPACE_URI,localPart,Jsonix.Schema.XSD.PREFIX)};Jsonix.Schema.XSD.AnyType=Jsonix.Class(Jsonix.Model.ClassInfo,{typeName:Jsonix.Schema.XSD.qname("anyType"),initialize:function(){Jsonix.Model.ClassInfo.prototype.initialize.call(this,{name:"AnyType",propertyInfos:[{type:"anyAttribute",name:"attributes"},{type:"anyElement",name:"content",collection:true}]})},CLASS_NAME:"Jsonix.Schema.XSD.AnyType"});Jsonix.Schema.XSD.AnyType.INSTANCE=new Jsonix.Schema.XSD.AnyType;Jsonix.Schema.XSD.AnySimpleType=Jsonix.Class(Jsonix.Model.TypeInfo,{name:"AnySimpleType",typeName:Jsonix.Schema.XSD.qname("anySimpleType"),initialize:function(){Jsonix.Model.TypeInfo.prototype.initialize.apply(this,[])},print:function(value,context,output,scope){throw new Error("Abstract method [print].")},parse:function(text,context,input,scope){throw new Error("Abstract method [parse].")},reprint:function(value,context,output,scope){if(Jsonix.Util.Type.isString(value)&&!this.isInstance(value,context,scope)){return this.print(this.parse(value,context,null,scope),context,output,scope)}else{return this.print(value,context,output,scope)}},unmarshal:function(context,input,scope){var text=input.getElementText();if(Jsonix.Util.StringUtils.isNotBlank(text)){return this.parse(text,context,input,scope)}else{return null}},marshal:function(value,context,output,scope){if(Jsonix.Util.Type.exists(value)){output.writeCharacters(this.reprint(value,context,output,scope))}},build:function(context,module){},CLASS_NAME:"Jsonix.Schema.XSD.AnySimpleType"});Jsonix.Schema.XSD.List=Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType,{name:null,typeName:null,typeInfo:null,separator:" ",trimmedSeparator:Jsonix.Util.StringUtils.whitespaceCharacters,simpleType:true,built:false,initialize:function(typeInfo,typeName,separator){Jsonix.Util.Ensure.ensureExists(typeInfo);this.typeInfo=typeInfo;if(!Jsonix.Util.Type.exists(this.name)){this.name=typeInfo.name+"*"}if(Jsonix.Util.Type.exists(typeName)){this.typeName=typeName}if(Jsonix.Util.Type.isString(separator)){this.separator=separator}else{this.separator=" "}var trimmedSeparator=Jsonix.Util.StringUtils.trim(this.separator);if(trimmedSeparator.length===0){this.trimmedSeparator=Jsonix.Util.StringUtils.whitespaceCharacters}else{this.trimmedSeparator=trimmedSeparator}},build:function(context,module){if(!this.built){this.typeInfo=context.resolveTypeInfo(this.typeInfo,module);this.built=true}},print:function(value,context,output,scope){if(!Jsonix.Util.Type.exists(value)){return null}Jsonix.Util.Ensure.ensureArray(value);var result="";for(var index=0;index<value.length;index++){if(index>0){result=result+this.separator}result=result+this.typeInfo.reprint(value[index],context,output,scope)}return result},parse:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);var items=Jsonix.Util.StringUtils.splitBySeparatorChars(text,this.trimmedSeparator);var result=[];for(var index=0;index<items.length;index++){result.push(this.typeInfo.parse(Jsonix.Util.StringUtils.trim(items[index]),context,input,scope))}return result},CLASS_NAME:"Jsonix.Schema.XSD.List"});Jsonix.Schema.XSD.String=Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType,{name:"String",typeName:Jsonix.Schema.XSD.qname("string"),unmarshal:function(context,input,scope){var text=input.getElementText();return this.parse(text,context,input,scope)},print:function(value,context,output,scope){Jsonix.Util.Ensure.ensureString(value);return value},parse:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);return text},isInstance:function(value,context,scope){return Jsonix.Util.Type.isString(value)},CLASS_NAME:"Jsonix.Schema.XSD.String"});Jsonix.Schema.XSD.String.INSTANCE=new Jsonix.Schema.XSD.String;Jsonix.Schema.XSD.String.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.String.INSTANCE);Jsonix.Schema.XSD.Strings=Jsonix.Class(Jsonix.Schema.XSD.List,{name:"Strings",initialize:function(){Jsonix.Schema.XSD.List.prototype.initialize.apply(this,[Jsonix.Schema.XSD.String.INSTANCE,Jsonix.Schema.XSD.qname("strings")," "])},CLASS_NAME:"Jsonix.Schema.XSD.Strings"});Jsonix.Schema.XSD.Strings.INSTANCE=new Jsonix.Schema.XSD.Strings;Jsonix.Schema.XSD.NormalizedString=Jsonix.Class(Jsonix.Schema.XSD.String,{name:"NormalizedString",typeName:Jsonix.Schema.XSD.qname("normalizedString"),CLASS_NAME:"Jsonix.Schema.XSD.NormalizedString"});Jsonix.Schema.XSD.NormalizedString.INSTANCE=new Jsonix.Schema.XSD.NormalizedString;Jsonix.Schema.XSD.NormalizedString.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.NormalizedString.INSTANCE);Jsonix.Schema.XSD.Token=Jsonix.Class(Jsonix.Schema.XSD.NormalizedString,{name:"Token",typeName:Jsonix.Schema.XSD.qname("token"),CLASS_NAME:"Jsonix.Schema.XSD.Token"});Jsonix.Schema.XSD.Token.INSTANCE=new Jsonix.Schema.XSD.Token;Jsonix.Schema.XSD.Token.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Token.INSTANCE);Jsonix.Schema.XSD.Language=Jsonix.Class(Jsonix.Schema.XSD.Token,{name:"Language",typeName:Jsonix.Schema.XSD.qname("language"),CLASS_NAME:"Jsonix.Schema.XSD.Language"});Jsonix.Schema.XSD.Language.INSTANCE=new Jsonix.Schema.XSD.Language;Jsonix.Schema.XSD.Language.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Language.INSTANCE);Jsonix.Schema.XSD.Name=Jsonix.Class(Jsonix.Schema.XSD.Token,{name:"Name",typeName:Jsonix.Schema.XSD.qname("Name"),CLASS_NAME:"Jsonix.Schema.XSD.Name"});Jsonix.Schema.XSD.Name.INSTANCE=new Jsonix.Schema.XSD.Name;Jsonix.Schema.XSD.Name.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Name.INSTANCE);Jsonix.Schema.XSD.NCName=Jsonix.Class(Jsonix.Schema.XSD.Name,{name:"NCName",typeName:Jsonix.Schema.XSD.qname("NCName"),CLASS_NAME:"Jsonix.Schema.XSD.NCName"});Jsonix.Schema.XSD.NCName.INSTANCE=new Jsonix.Schema.XSD.NCName;Jsonix.Schema.XSD.NCName.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.NCName.INSTANCE);Jsonix.Schema.XSD.NMToken=Jsonix.Class(Jsonix.Schema.XSD.Token,{name:"NMToken",typeName:Jsonix.Schema.XSD.qname("NMTOKEN"),CLASS_NAME:"Jsonix.Schema.XSD.NMToken"});Jsonix.Schema.XSD.NMToken.INSTANCE=new Jsonix.Schema.XSD.NMToken;Jsonix.Schema.XSD.NMTokens=Jsonix.Class(Jsonix.Schema.XSD.List,{name:"NMTokens",initialize:function(){Jsonix.Schema.XSD.List.prototype.initialize.apply(this,[Jsonix.Schema.XSD.NMToken.INSTANCE,Jsonix.Schema.XSD.qname("NMTOKEN")," "])},CLASS_NAME:"Jsonix.Schema.XSD.NMTokens"});Jsonix.Schema.XSD.NMTokens.INSTANCE=new Jsonix.Schema.XSD.NMTokens;Jsonix.Schema.XSD.Boolean=Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType,{name:"Boolean",typeName:Jsonix.Schema.XSD.qname("boolean"),print:function(value,context,output,scope){Jsonix.Util.Ensure.ensureBoolean(value);return value?"true":"false"},parse:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);if(text==="true"||text==="1"){return true}else if(text==="false"||text==="0"){return false}else{throw new Error("Either [true], [1], [0] or [false] expected as boolean value.")}},isInstance:function(value,context,scope){return Jsonix.Util.Type.isBoolean(value)},CLASS_NAME:"Jsonix.Schema.XSD.Boolean"});Jsonix.Schema.XSD.Boolean.INSTANCE=new Jsonix.Schema.XSD.Boolean;Jsonix.Schema.XSD.Boolean.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Boolean.INSTANCE);Jsonix.Schema.XSD.Base64Binary=Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType,{name:"Base64Binary",typeName:Jsonix.Schema.XSD.qname("base64Binary"),charToByte:{},byteToChar:[],initialize:function(){Jsonix.Schema.XSD.AnySimpleType.prototype.initialize.apply(this);var charTable="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(var i=0;i<charTable.length;i++){var _char=charTable.charAt(i);var _byte=charTable.charCodeAt(i);this.byteToChar[i]=_char;this.charToByte[_char]=i}},print:function(value,context,output,scope){Jsonix.Util.Ensure.ensureArray(value);return this.encode(value)},parse:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);return this.decode(text)},encode:function(uarray){var output="";var byte0;var byte1;var byte2;var char0;var char1;var char2;var char3;var i=0;var j=0;var length=uarray.length;for(i=0;i<length;i+=3){byte0=uarray[i]&255;char0=this.byteToChar[byte0>>2];if(i+1<length){byte1=uarray[i+1]&255;char1=this.byteToChar[(byte0&3)<<4|byte1>>4];if(i+2<length){byte2=uarray[i+2]&255;char2=this.byteToChar[(byte1&15)<<2|byte2>>6];char3=this.byteToChar[byte2&63]}else{char2=this.byteToChar[(byte1&15)<<2];char3="="}}else{char1=this.byteToChar[(byte0&3)<<4];char2="=";char3="="}output=output+char0+char1+char2+char3}return output},decode:function(text){input=text.replace(/[^A-Za-z0-9\+\/\=]/g,"");var length=input.length/4*3;if(input.charAt(input.length-1)==="="){length--}if(input.charAt(input.length-2)==="="){length--}var uarray=new Array(length);var byte0;var byte1;var byte2;var char0;var char1;var char2;var char3;var i=0;var j=0;for(i=0;i<length;i+=3){char0=this.charToByte[input.charAt(j++)];char1=this.charToByte[input.charAt(j++)];char2=this.charToByte[input.charAt(j++)];char3=this.charToByte[input.charAt(j++)];byte0=char0<<2|char1>>4;byte1=(char1&15)<<4|char2>>2;byte2=(char2&3)<<6|char3;uarray[i]=byte0;if(char2!=64){uarray[i+1]=byte1}if(char3!=64){uarray[i+2]=byte2}}return uarray},isInstance:function(value,context,scope){return Jsonix.Util.Type.isArray(value)},CLASS_NAME:"Jsonix.Schema.XSD.Base64Binary"});Jsonix.Schema.XSD.Base64Binary.INSTANCE=new Jsonix.Schema.XSD.Base64Binary;Jsonix.Schema.XSD.Base64Binary.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Base64Binary.INSTANCE);Jsonix.Schema.XSD.HexBinary=Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType,{name:"HexBinary",typeName:Jsonix.Schema.XSD.qname("hexBinary"),charToQuartet:{},byteToDuplet:[],initialize:function(){Jsonix.Schema.XSD.AnySimpleType.prototype.initialize.apply(this);var charTableUpperCase="0123456789ABCDEF";var charTableLowerCase=charTableUpperCase.toLowerCase();var i;for(i=0;i<16;i++){this.charToQuartet[charTableUpperCase.charAt(i)]=i;if(i>=10){this.charToQuartet[charTableLowerCase.charAt(i)]=i}}for(i=0;i<256;i++){this.byteToDuplet[i]=charTableUpperCase[i>>4]+charTableUpperCase[i&15]}},print:function(value,context,output,scope){Jsonix.Util.Ensure.ensureArray(value);return this.encode(value)},parse:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);return this.decode(text)},encode:function(uarray){var output="";for(var i=0;i<uarray.length;i++){output=output+this.byteToDuplet[uarray[i]&255]}return output},decode:function(text){var input=text.replace(/[^A-Fa-f0-9]/g,"");var length=input.length>>1;var uarray=new Array(length);for(var i=0;i<length;i++){var char0=input.charAt(2*i);var char1=input.charAt(2*i+1);uarray[i]=this.charToQuartet[char0]<<4|this.charToQuartet[char1]}return uarray},isInstance:function(value,context,scope){return Jsonix.Util.Type.isArray(value)},CLASS_NAME:"Jsonix.Schema.XSD.HexBinary"});Jsonix.Schema.XSD.HexBinary.INSTANCE=new Jsonix.Schema.XSD.HexBinary;Jsonix.Schema.XSD.HexBinary.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.HexBinary.INSTANCE);Jsonix.Schema.XSD.Number=Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType,{name:"Number",typeName:Jsonix.Schema.XSD.qname("number"),print:function(value,context,output,scope){Jsonix.Util.Ensure.ensureNumberOrNaN(value);if(Jsonix.Util.Type.isNaN(value)){return"NaN"}else if(value===Infinity){return"INF"}else if(value===-Infinity){return"-INF"}else{var text=String(value);return text}},parse:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);if(text==="-INF"){return-Infinity}else if(text==="INF"){return Infinity}else if(text==="NaN"){return NaN}else{var value=Number(text);Jsonix.Util.Ensure.ensureNumber(value);return value}},isInstance:function(value,context,scope){return Jsonix.Util.Type.isNumberOrNaN(value)},CLASS_NAME:"Jsonix.Schema.XSD.Number"});Jsonix.Schema.XSD.Number.INSTANCE=new Jsonix.Schema.XSD.Number;Jsonix.Schema.XSD.Number.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Number.INSTANCE);Jsonix.Schema.XSD.Float=Jsonix.Class(Jsonix.Schema.XSD.Number,{name:"Float",typeName:Jsonix.Schema.XSD.qname("float"),isInstance:function(value,context,scope){return Jsonix.Util.Type.isNaN(value)||value===-Infinity||value===Infinity||Jsonix.Util.Type.isNumber(value)&&value>=this.MIN_VALUE&&value<=this.MAX_VALUE},MIN_VALUE:-3.4028235e38,MAX_VALUE:3.4028235e38,CLASS_NAME:"Jsonix.Schema.XSD.Float"});Jsonix.Schema.XSD.Float.INSTANCE=new Jsonix.Schema.XSD.Float;Jsonix.Schema.XSD.Float.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Float.INSTANCE);Jsonix.Schema.XSD.Decimal=Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType,{name:"Decimal",typeName:Jsonix.Schema.XSD.qname("decimal"),print:function(value,context,output,scope){Jsonix.Util.Ensure.ensureNumber(value);var text=String(value);return text},parse:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);var value=Number(text);Jsonix.Util.Ensure.ensureNumber(value);return value},isInstance:function(value,context,scope){return Jsonix.Util.Type.isNumber(value)},CLASS_NAME:"Jsonix.Schema.XSD.Decimal"});Jsonix.Schema.XSD.Decimal.INSTANCE=new Jsonix.Schema.XSD.Decimal;Jsonix.Schema.XSD.Decimal.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Decimal.INSTANCE);Jsonix.Schema.XSD.Integer=Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType,{name:"Integer",typeName:Jsonix.Schema.XSD.qname("integer"),print:function(value,context,output,scope){Jsonix.Util.Ensure.ensureInteger(value);var text=String(value);return text},parse:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);var value=Number(text);Jsonix.Util.Ensure.ensureInteger(value);return value},isInstance:function(value,context,scope){return Jsonix.Util.NumberUtils.isInteger(value)&&value>=this.MIN_VALUE&&value<=this.MAX_VALUE},MIN_VALUE:-0x8000000000000000,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.Integer"});Jsonix.Schema.XSD.Integer.INSTANCE=new Jsonix.Schema.XSD.Integer;Jsonix.Schema.XSD.Integer.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Integer.INSTANCE);Jsonix.Schema.XSD.NonPositiveInteger=Jsonix.Class(Jsonix.Schema.XSD.Integer,{name:"NonPositiveInteger",typeName:Jsonix.Schema.XSD.qname("nonPositiveInteger"),MIN_VALUE:-0x8000000000000000,MAX_VALUE:0,CLASS_NAME:"Jsonix.Schema.XSD.NonPositiveInteger"});Jsonix.Schema.XSD.NonPositiveInteger.INSTANCE=new Jsonix.Schema.XSD.NonPositiveInteger;Jsonix.Schema.XSD.NonPositiveInteger.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.NonPositiveInteger.INSTANCE);Jsonix.Schema.XSD.NegativeInteger=Jsonix.Class(Jsonix.Schema.XSD.NonPositiveInteger,{name:"NegativeInteger",typeName:Jsonix.Schema.XSD.qname("negativeInteger"),MIN_VALUE:-0x8000000000000000,MAX_VALUE:-1,CLASS_NAME:"Jsonix.Schema.XSD.NegativeInteger"});Jsonix.Schema.XSD.NegativeInteger.INSTANCE=new Jsonix.Schema.XSD.NegativeInteger;Jsonix.Schema.XSD.NegativeInteger.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.NegativeInteger.INSTANCE);Jsonix.Schema.XSD.Long=Jsonix.Class(Jsonix.Schema.XSD.Integer,{name:"Long",typeName:Jsonix.Schema.XSD.qname("long"),MIN_VALUE:-0x8000000000000000,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.Long"});Jsonix.Schema.XSD.Long.INSTANCE=new Jsonix.Schema.XSD.Long;Jsonix.Schema.XSD.Long.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Long.INSTANCE);Jsonix.Schema.XSD.Int=Jsonix.Class(Jsonix.Schema.XSD.Long,{name:"Int",typeName:Jsonix.Schema.XSD.qname("int"),MIN_VALUE:-2147483648,MAX_VALUE:2147483647,CLASS_NAME:"Jsonix.Schema.XSD.Int"});Jsonix.Schema.XSD.Int.INSTANCE=new Jsonix.Schema.XSD.Int;Jsonix.Schema.XSD.Int.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Int.INSTANCE);Jsonix.Schema.XSD.Short=Jsonix.Class(Jsonix.Schema.XSD.Int,{name:"Short",typeName:Jsonix.Schema.XSD.qname("short"),MIN_VALUE:-32768,MAX_VALUE:32767,CLASS_NAME:"Jsonix.Schema.XSD.Short"});Jsonix.Schema.XSD.Short.INSTANCE=new Jsonix.Schema.XSD.Short;Jsonix.Schema.XSD.Short.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Short.INSTANCE);Jsonix.Schema.XSD.Byte=Jsonix.Class(Jsonix.Schema.XSD.Short,{name:"Byte",typeName:Jsonix.Schema.XSD.qname("byte"),MIN_VALUE:-128,MAX_VALUE:127,CLASS_NAME:"Jsonix.Schema.XSD.Byte"});Jsonix.Schema.XSD.Byte.INSTANCE=new Jsonix.Schema.XSD.Byte;Jsonix.Schema.XSD.Byte.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Byte.INSTANCE);Jsonix.Schema.XSD.NonNegativeInteger=Jsonix.Class(Jsonix.Schema.XSD.Integer,{name:"NonNegativeInteger",typeName:Jsonix.Schema.XSD.qname("nonNegativeInteger"),MIN_VALUE:0,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.NonNegativeInteger"});Jsonix.Schema.XSD.NonNegativeInteger.INSTANCE=new Jsonix.Schema.XSD.NonNegativeInteger;Jsonix.Schema.XSD.NonNegativeInteger.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.NonNegativeInteger.INSTANCE);Jsonix.Schema.XSD.UnsignedLong=Jsonix.Class(Jsonix.Schema.XSD.NonNegativeInteger,{name:"UnsignedLong",typeName:Jsonix.Schema.XSD.qname("unsignedLong"),MIN_VALUE:0,MAX_VALUE:0x10000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedLong"});Jsonix.Schema.XSD.UnsignedLong.INSTANCE=new Jsonix.Schema.XSD.UnsignedLong;Jsonix.Schema.XSD.UnsignedLong.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.UnsignedLong.INSTANCE);Jsonix.Schema.XSD.UnsignedInt=Jsonix.Class(Jsonix.Schema.XSD.UnsignedLong,{name:"UnsignedInt",typeName:Jsonix.Schema.XSD.qname("unsignedInt"),MIN_VALUE:0,MAX_VALUE:4294967295,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedInt"});Jsonix.Schema.XSD.UnsignedInt.INSTANCE=new Jsonix.Schema.XSD.UnsignedInt;Jsonix.Schema.XSD.UnsignedInt.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.UnsignedInt.INSTANCE);Jsonix.Schema.XSD.UnsignedShort=Jsonix.Class(Jsonix.Schema.XSD.UnsignedInt,{name:"UnsignedShort",typeName:Jsonix.Schema.XSD.qname("unsignedShort"),MIN_VALUE:0,MAX_VALUE:65535,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedShort"});Jsonix.Schema.XSD.UnsignedShort.INSTANCE=new Jsonix.Schema.XSD.UnsignedShort;Jsonix.Schema.XSD.UnsignedShort.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.UnsignedShort.INSTANCE);Jsonix.Schema.XSD.UnsignedByte=Jsonix.Class(Jsonix.Schema.XSD.UnsignedShort,{name:"UnsignedByte",typeName:Jsonix.Schema.XSD.qname("unsignedByte"),MIN_VALUE:0,MAX_VALUE:255,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedByte"});Jsonix.Schema.XSD.UnsignedByte.INSTANCE=new Jsonix.Schema.XSD.UnsignedByte;Jsonix.Schema.XSD.UnsignedByte.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.UnsignedByte.INSTANCE);Jsonix.Schema.XSD.PositiveInteger=Jsonix.Class(Jsonix.Schema.XSD.NonNegativeInteger,{name:"PositiveInteger",typeName:Jsonix.Schema.XSD.qname("positiveInteger"),MIN_VALUE:1,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.PositiveInteger"});Jsonix.Schema.XSD.PositiveInteger.INSTANCE=new Jsonix.Schema.XSD.PositiveInteger;Jsonix.Schema.XSD.PositiveInteger.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.PositiveInteger.INSTANCE);Jsonix.Schema.XSD.Double=Jsonix.Class(Jsonix.Schema.XSD.Number,{name:"Double",typeName:Jsonix.Schema.XSD.qname("double"),isInstance:function(value,context,scope){return Jsonix.Util.Type.isNaN(value)||value===-Infinity||value===Infinity||Jsonix.Util.Type.isNumber(value)&&value>=this.MIN_VALUE&&value<=this.MAX_VALUE},MIN_VALUE:-1.7976931348623157e308,MAX_VALUE:1.7976931348623157e308,CLASS_NAME:"Jsonix.Schema.XSD.Double"});Jsonix.Schema.XSD.Double.INSTANCE=new Jsonix.Schema.XSD.Double;Jsonix.Schema.XSD.Double.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Double.INSTANCE);Jsonix.Schema.XSD.AnyURI=Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType,{name:"AnyURI",typeName:Jsonix.Schema.XSD.qname("anyURI"),print:function(value,context,output,scope){Jsonix.Util.Ensure.ensureString(value);return value},parse:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);return text},isInstance:function(value,context,scope){return Jsonix.Util.Type.isString(value)},CLASS_NAME:"Jsonix.Schema.XSD.AnyURI"});Jsonix.Schema.XSD.AnyURI.INSTANCE=new Jsonix.Schema.XSD.AnyURI;Jsonix.Schema.XSD.AnyURI.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.AnyURI.INSTANCE);Jsonix.Schema.XSD.QName=Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType,{name:"QName",typeName:Jsonix.Schema.XSD.qname("QName"),print:function(value,context,output,scope){var qName=Jsonix.XML.QName.fromObject(value);var prefix;var localPart=qName.localPart;if(output){prefix=output.getPrefix(qName.namespaceURI,qName.prefix||null);output.declareNamespace(qName.namespaceURI,prefix)}else{prefix=qName.prefix}return!prefix?localPart:prefix+":"+localPart},parse:function(value,context,input,scope){Jsonix.Util.Ensure.ensureString(value);value=Jsonix.Util.StringUtils.trim(value);var prefix;var localPart;var colonPosition=value.indexOf(":");if(colonPosition===-1){prefix="";localPart=value}else if(colonPosition>0&&colonPosition<value.length-1){prefix=value.substring(0,colonPosition);localPart=value.substring(colonPosition+1)}else{throw new Error("Invalid QName ["+value+"].")}var namespaceContext=input||context||null;if(!namespaceContext){return value}else{var namespaceURI=namespaceContext.getNamespaceURI(prefix);if(Jsonix.Util.Type.isString(namespaceURI)){return new Jsonix.XML.QName(namespaceURI,localPart,prefix)}else{throw new Error("Prefix ["+prefix+"] of the QName ["+value+"] is not bound in this context.")}}},isInstance:function(value,context,scope){return value instanceof Jsonix.XML.QName||Jsonix.Util.Type.isObject(value)&&Jsonix.Util.Type.isString(value.localPart||value.lp)},CLASS_NAME:"Jsonix.Schema.XSD.QName"});Jsonix.Schema.XSD.QName.INSTANCE=new Jsonix.Schema.XSD.QName;Jsonix.Schema.XSD.QName.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.QName.INSTANCE);Jsonix.Schema.XSD.Calendar=Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType,{name:"Calendar",typeName:Jsonix.Schema.XSD.qname("calendar"),parse:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);if(text.match(new RegExp("^"+Jsonix.Schema.XSD.Calendar.DATETIME_PATTERN+"$"))){return this.parseDateTime(text,context,input,scope)}else if(text.match(new RegExp("^"+Jsonix.Schema.XSD.Calendar.DATE_PATTERN+"$"))){return this.parseDate(text,context,input,scope)}else if(text.match(new RegExp("^"+Jsonix.Schema.XSD.Calendar.TIME_PATTERN+"$"))){return this.parseTime(text,context,input,scope)}else if(text.match(new RegExp("^"+Jsonix.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN+"$"))){return this.parseGYearMonth(text,context,input,scope)}else if(text.match(new RegExp("^"+Jsonix.Schema.XSD.Calendar.GYEAR_PATTERN+"$"))){return this.parseGYear(text,context,input,scope)}else if(text.match(new RegExp("^"+Jsonix.Schema.XSD.Calendar.GMONTH_DAY_PATTERN+"$"))){return this.parseGMonthDay(text,context,input,scope)}else if(text.match(new RegExp("^"+Jsonix.Schema.XSD.Calendar.GMONTH_PATTERN+"$"))){return this.parseGMonth(text,context,input,scope)}else if(text.match(new RegExp("^"+Jsonix.Schema.XSD.Calendar.GDAY_PATTERN+"$"))){return this.parseGDay(text,context,input,scope)}else{throw new Error("Value ["+text+"] does not match xs:dateTime, xs:date, xs:time, xs:gYearMonth, xs:gYear, xs:gMonthDay, xs:gMonth or xs:gDay patterns.")}},parseGYearMonth:function(value,context,input,scope){var gYearMonthExpression=new RegExp("^"+Jsonix.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN+"$");var results=value.match(gYearMonthExpression);if(results!==null){var data={year:parseInt(results[1],10),month:parseInt(results[5],10),timezone:this.parseTimezoneString(results[7])};return new Jsonix.XML.Calendar(data)}throw new Error("Value ["+value+"] does not match the xs:gYearMonth pattern.")},parseGYear:function(value,context,input,scope){var gYearExpression=new RegExp("^"+Jsonix.Schema.XSD.Calendar.GYEAR_PATTERN+"$");var results=value.match(gYearExpression);if(results!==null){var data={year:parseInt(results[1],10),timezone:this.parseTimezoneString(results[5])};return new Jsonix.XML.Calendar(data)}throw new Error("Value ["+value+"] does not match the xs:gYear pattern.")},parseGMonthDay:function(value,context,input,scope){var gMonthDayExpression=new RegExp("^"+Jsonix.Schema.XSD.Calendar.GMONTH_DAY_PATTERN+"$");var results=value.match(gMonthDayExpression);if(results!==null){var data={month:parseInt(results[2],10),day:parseInt(results[3],10),timezone:this.parseTimezoneString(results[5])};return new Jsonix.XML.Calendar(data)}throw new Error("Value ["+value+"] does not match the xs:gMonthDay pattern.")},parseGMonth:function(value,context,input,scope){var gMonthExpression=new RegExp("^"+Jsonix.Schema.XSD.Calendar.GMONTH_PATTERN+"$");var results=value.match(gMonthExpression);if(results!==null){var data={month:parseInt(results[2],10),timezone:this.parseTimezoneString(results[3])};return new Jsonix.XML.Calendar(data)}throw new Error("Value ["+value+"] does not match the xs:gMonth pattern.")},parseGDay:function(value,context,input,scope){var gDayExpression=new RegExp("^"+Jsonix.Schema.XSD.Calendar.GDAY_PATTERN+"$");var results=value.match(gDayExpression);if(results!==null){var data={day:parseInt(results[2],10),timezone:this.parseTimezoneString(results[3])};return new Jsonix.XML.Calendar(data)}throw new Error("Value ["+value+"] does not match the xs:gDay pattern.")},parseDateTime:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);var expression=new RegExp("^"+Jsonix.Schema.XSD.Calendar.DATETIME_PATTERN+"$");var results=text.match(expression);if(results!==null){var data={year:parseInt(results[1],10),month:parseInt(results[5],10),day:parseInt(results[7],10),hour:parseInt(results[9],10),minute:parseInt(results[10],10),second:parseInt(results[11],10),fractionalSecond:results[12]?parseFloat(results[12]):0,timezone:this.parseTimezoneString(results[14])};return new Jsonix.XML.Calendar(data)}throw new Error("Value ["+value+"] does not match the xs:date pattern.")},parseDate:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);var expression=new RegExp("^"+Jsonix.Schema.XSD.Calendar.DATE_PATTERN+"$");var results=text.match(expression);if(results!==null){var data={year:parseInt(results[1],10),month:parseInt(results[5],10),day:parseInt(results[7],10),timezone:this.parseTimezoneString(results[9])};return new Jsonix.XML.Calendar(data)}throw new Error("Value ["+value+"] does not match the xs:date pattern.")},parseTime:function(text,context,input,scope){Jsonix.Util.Ensure.ensureString(text);var expression=new RegExp("^"+Jsonix.Schema.XSD.Calendar.TIME_PATTERN+"$");var results=text.match(expression);if(results!==null){var data={hour:parseInt(results[1],10),minute:parseInt(results[2],10),second:parseInt(results[3],10),fractionalSecond:results[4]?parseFloat(results[4]):0,timezone:this.parseTimezoneString(results[6])};
return new Jsonix.XML.Calendar(data)}throw new Error("Value ["+value+"] does not match the xs:time pattern.")},parseTimezoneString:function(text){if(!Jsonix.Util.Type.isString(text)){return NaN}else if(text===""){return NaN}else if(text==="Z"){return 0}else if(text==="+14:00"){return 14*60}else if(text==="-14:00"){return-14*60}else{var expression=new RegExp("^"+Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN+"$");var results=text.match(expression);if(results!==null){var sign=results[1]==="+"?1:-1;var hour=parseInt(results[4],10);var minute=parseInt(results[5],10);return sign*(hour*60+minute)}throw new Error("Value ["+value+"] does not match the timezone pattern.")}},print:function(value,context,output,scope){Jsonix.Util.Ensure.ensureObject(value);if(Jsonix.Util.NumberUtils.isInteger(value.year)&&Jsonix.Util.NumberUtils.isInteger(value.month)&&Jsonix.Util.NumberUtils.isInteger(value.day)&&Jsonix.Util.NumberUtils.isInteger(value.hour)&&Jsonix.Util.NumberUtils.isInteger(value.minute)&&Jsonix.Util.NumberUtils.isInteger(value.second)){return this.printDateTime(value)}else if(Jsonix.Util.NumberUtils.isInteger(value.year)&&Jsonix.Util.NumberUtils.isInteger(value.month)&&Jsonix.Util.NumberUtils.isInteger(value.day)){return this.printDate(value)}else if(Jsonix.Util.NumberUtils.isInteger(value.hour)&&Jsonix.Util.NumberUtils.isInteger(value.minute)&&Jsonix.Util.NumberUtils.isInteger(value.second)){return this.printTime(value)}else if(Jsonix.Util.NumberUtils.isInteger(value.year)&&Jsonix.Util.NumberUtils.isInteger(value.month)){return this.printGYearMonth(value)}else if(Jsonix.Util.NumberUtils.isInteger(value.month)&&Jsonix.Util.NumberUtils.isInteger(value.day)){return this.printGMonthDay(value)}else if(Jsonix.Util.NumberUtils.isInteger(value.year)){return this.printGYear(value)}else if(Jsonix.Util.NumberUtils.isInteger(value.month)){return this.printGMonth(value)}else if(Jsonix.Util.NumberUtils.isInteger(value.day)){return this.printGDay(value)}else{throw new Error("Value ["+value+"] is not recognized as dateTime, date or time.")}},printDateTime:function(value){Jsonix.Util.Ensure.ensureObject(value);Jsonix.Util.Ensure.ensureInteger(value.year);Jsonix.Util.Ensure.ensureInteger(value.month);Jsonix.Util.Ensure.ensureInteger(value.day);Jsonix.Util.Ensure.ensureInteger(value.hour);Jsonix.Util.Ensure.ensureInteger(value.minute);Jsonix.Util.Ensure.ensureNumber(value.second);if(Jsonix.Util.Type.exists(value.fractionalString)){Jsonix.Util.Ensure.ensureNumber(value.fractionalString)}if(Jsonix.Util.Type.exists(value.timezone)&&!Jsonix.Util.Type.isNaN(value.timezone)){Jsonix.Util.Ensure.ensureInteger(value.timezone)}var result=this.printDateString(value);result=result+"T";result=result+this.printTimeString(value);if(Jsonix.Util.Type.exists(value.timezone)){result=result+this.printTimezoneString(value.timezone)}return result},printDate:function(value){Jsonix.Util.Ensure.ensureObject(value);Jsonix.Util.Ensure.ensureNumber(value.year);Jsonix.Util.Ensure.ensureNumber(value.month);Jsonix.Util.Ensure.ensureNumber(value.day);if(Jsonix.Util.Type.exists(value.timezone)&&!Jsonix.Util.Type.isNaN(value.timezone)){Jsonix.Util.Ensure.ensureInteger(value.timezone)}var result=this.printDateString(value);if(Jsonix.Util.Type.exists(value.timezone)){result=result+this.printTimezoneString(value.timezone)}return result},printTime:function(value){Jsonix.Util.Ensure.ensureObject(value);Jsonix.Util.Ensure.ensureNumber(value.hour);Jsonix.Util.Ensure.ensureNumber(value.minute);Jsonix.Util.Ensure.ensureNumber(value.second);if(Jsonix.Util.Type.exists(value.fractionalString)){Jsonix.Util.Ensure.ensureNumber(value.fractionalString)}if(Jsonix.Util.Type.exists(value.timezone)&&!Jsonix.Util.Type.isNaN(value.timezone)){Jsonix.Util.Ensure.ensureInteger(value.timezone)}var result=this.printTimeString(value);if(Jsonix.Util.Type.exists(value.timezone)){result=result+this.printTimezoneString(value.timezone)}return result},printDateString:function(value){Jsonix.Util.Ensure.ensureObject(value);Jsonix.Util.Ensure.ensureInteger(value.year);Jsonix.Util.Ensure.ensureInteger(value.month);Jsonix.Util.Ensure.ensureInteger(value.day);return(value.year<0?"-"+this.printYear(-value.year):this.printYear(value.year))+"-"+this.printMonth(value.month)+"-"+this.printDay(value.day)},printTimeString:function(value){Jsonix.Util.Ensure.ensureObject(value);Jsonix.Util.Ensure.ensureInteger(value.hour);Jsonix.Util.Ensure.ensureInteger(value.minute);Jsonix.Util.Ensure.ensureInteger(value.second);if(Jsonix.Util.Type.exists(value.fractionalSecond)){Jsonix.Util.Ensure.ensureNumber(value.fractionalSecond)}var result=this.printHour(value.hour);result=result+":";result=result+this.printMinute(value.minute);result=result+":";result=result+this.printSecond(value.second);if(Jsonix.Util.Type.exists(value.fractionalSecond)){result=result+this.printFractionalSecond(value.fractionalSecond)}return result},printTimezoneString:function(value){if(!Jsonix.Util.Type.exists(value)||Jsonix.Util.Type.isNaN(value)){return""}else{Jsonix.Util.Ensure.ensureInteger(value);var sign=value<0?-1:value>0?1:0;var data=value*sign;var minute=data%60;var hour=Math.floor(data/60);var result;if(sign===0){return"Z"}else{if(sign>0){result="+"}else if(sign<0){result="-"}result=result+this.printHour(hour);result=result+":";result=result+this.printMinute(minute);return result}}},printGDay:function(value,context,output,scope){Jsonix.Util.Ensure.ensureObject(value);var day=undefined;var timezone=undefined;if(value instanceof Date){day=value.getDate()}else{Jsonix.Util.Ensure.ensureInteger(value.day);day=value.day;timezone=value.timezone}Jsonix.XML.Calendar.validateDay(day);Jsonix.XML.Calendar.validateTimezone(timezone);return"---"+this.printDay(day)+this.printTimezoneString(timezone)},printGMonth:function(value,context,output,scope){Jsonix.Util.Ensure.ensureObject(value);var month=undefined;var timezone=undefined;if(value instanceof Date){month=value.getMonth()+1}else{Jsonix.Util.Ensure.ensureInteger(value.month);month=value.month;timezone=value.timezone}Jsonix.XML.Calendar.validateMonth(month);Jsonix.XML.Calendar.validateTimezone(timezone);return"--"+this.printMonth(month)+this.printTimezoneString(timezone)},printGMonthDay:function(value,context,output,scope){Jsonix.Util.Ensure.ensureObject(value);var month=undefined;var day=undefined;var timezone=undefined;if(value instanceof Date){month=value.getMonth()+1;day=value.getDate()}else{Jsonix.Util.Ensure.ensureInteger(value.month);Jsonix.Util.Ensure.ensureInteger(value.day);month=value.month;day=value.day;timezone=value.timezone}Jsonix.XML.Calendar.validateMonthDay(month,day);Jsonix.XML.Calendar.validateTimezone(timezone);return"--"+this.printMonth(month)+"-"+this.printDay(day)+this.printTimezoneString(timezone)},printGYear:function(value,context,output,scope){Jsonix.Util.Ensure.ensureObject(value);var year=undefined;var timezone=undefined;if(value instanceof Date){year=value.getFullYear()}else{Jsonix.Util.Ensure.ensureInteger(value.year);year=value.year;timezone=value.timezone}Jsonix.XML.Calendar.validateYear(year);Jsonix.XML.Calendar.validateTimezone(timezone);return this.printSignedYear(year)+this.printTimezoneString(timezone)},printGYearMonth:function(value,context,output,scope){Jsonix.Util.Ensure.ensureObject(value);var year=undefined;var month=undefined;var timezone=undefined;if(value instanceof Date){year=value.getFullYear();month=value.getMonth()+1}else{Jsonix.Util.Ensure.ensureInteger(value.year);year=value.year;month=value.month;timezone=value.timezone}Jsonix.XML.Calendar.validateYear(year);Jsonix.XML.Calendar.validateMonth(month);Jsonix.XML.Calendar.validateTimezone(timezone);return this.printSignedYear(year)+"-"+this.printMonth(month)+this.printTimezoneString(timezone)},printSignedYear:function(value){return value<0?"-"+this.printYear(value*-1):this.printYear(value)},printYear:function(value){return this.printInteger(value,4)},printMonth:function(value){return this.printInteger(value,2)},printDay:function(value){return this.printInteger(value,2)},printHour:function(value){return this.printInteger(value,2)},printMinute:function(value){return this.printInteger(value,2)},printSecond:function(value){return this.printInteger(value,2)},printFractionalSecond:function(value){Jsonix.Util.Ensure.ensureNumber(value);if(value<0||value>=1){throw new Error("Fractional second ["+value+"] must be between 0 and 1.")}else if(value===0){return""}else{var string=String(value);var dotIndex=string.indexOf(".");if(dotIndex<0){return""}else{return string.substring(dotIndex)}}},printInteger:function(value,length){Jsonix.Util.Ensure.ensureInteger(value);Jsonix.Util.Ensure.ensureInteger(length);if(length<=0){throw new Error("Length ["+value+"] must be positive.")}if(value<0){throw new Error("Value ["+value+"] must not be negative.")}var result=String(value);for(var i=result.length;i<length;i++){result="0"+result}return result},isInstance:function(value,context,scope){return Jsonix.Util.Type.isObject(value)&&(Jsonix.Util.NumberUtils.isInteger(value.year)&&Jsonix.Util.NumberUtils.isInteger(value.month)&&Jsonix.Util.NumberUtils.isInteger(value.day)||Jsonix.Util.NumberUtils.isInteger(value.hour)&&Jsonix.Util.NumberUtils.isInteger(value.minute)&&Jsonix.Util.NumberUtils.isInteger(value.second))},CLASS_NAME:"Jsonix.Schema.XSD.Calendar"});Jsonix.Schema.XSD.Calendar.YEAR_PATTERN="-?([1-9][0-9]*)?((?!(0000))[0-9]{4})";Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN="Z|([\\-\\+])(((0[0-9]|1[0-3]):([0-5][0-9]))|(14:00))";Jsonix.Schema.XSD.Calendar.MONTH_PATTERN="(0[1-9]|1[0-2])";Jsonix.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN="\\-\\-"+Jsonix.Schema.XSD.Calendar.MONTH_PATTERN;Jsonix.Schema.XSD.Calendar.DAY_PATTERN="(0[1-9]|[12][0-9]|3[01])";Jsonix.Schema.XSD.Calendar.SINGLE_DAY_PATTERN="\\-\\-\\-"+Jsonix.Schema.XSD.Calendar.DAY_PATTERN;Jsonix.Schema.XSD.Calendar.GYEAR_PATTERN="("+Jsonix.Schema.XSD.Calendar.YEAR_PATTERN+")"+"("+Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?";Jsonix.Schema.XSD.Calendar.GMONTH_PATTERN="("+Jsonix.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN+")"+"("+Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?";Jsonix.Schema.XSD.Calendar.GDAY_PATTERN="("+Jsonix.Schema.XSD.Calendar.SINGLE_DAY_PATTERN+")"+"("+Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?";Jsonix.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN="("+Jsonix.Schema.XSD.Calendar.YEAR_PATTERN+")"+"-"+"("+Jsonix.Schema.XSD.Calendar.DAY_PATTERN+")"+"("+Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?";Jsonix.Schema.XSD.Calendar.GMONTH_DAY_PATTERN="("+Jsonix.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN+")"+"-"+"("+Jsonix.Schema.XSD.Calendar.DAY_PATTERN+")"+"("+Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?";Jsonix.Schema.XSD.Calendar.DATE_PART_PATTERN="("+Jsonix.Schema.XSD.Calendar.YEAR_PATTERN+")"+"-"+"("+Jsonix.Schema.XSD.Calendar.MONTH_PATTERN+")"+"-"+"("+Jsonix.Schema.XSD.Calendar.DAY_PATTERN+")";Jsonix.Schema.XSD.Calendar.TIME_PART_PATTERN="([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(\\.([0-9]+))?";Jsonix.Schema.XSD.Calendar.TIME_PATTERN=Jsonix.Schema.XSD.Calendar.TIME_PART_PATTERN+"("+Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?";Jsonix.Schema.XSD.Calendar.DATE_PATTERN=Jsonix.Schema.XSD.Calendar.DATE_PART_PATTERN+"("+Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?";Jsonix.Schema.XSD.Calendar.DATETIME_PATTERN=Jsonix.Schema.XSD.Calendar.DATE_PART_PATTERN+"T"+Jsonix.Schema.XSD.Calendar.TIME_PART_PATTERN+"("+Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?";Jsonix.Schema.XSD.Calendar.INSTANCE=new Jsonix.Schema.XSD.Calendar;Jsonix.Schema.XSD.Calendar.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Calendar.INSTANCE);Jsonix.Schema.XSD.Duration=Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType,{name:"Duration",typeName:Jsonix.Schema.XSD.qname("duration"),isInstance:function(value,context,scope){return Jsonix.Util.Type.isObject(value)&&((Jsonix.Util.Type.exists(value.sign)?value.sign===-1||value.sign===1:true)(Jsonix.Util.NumberUtils.isInteger(value.years)&&value.years>=0)||Jsonix.Util.NumberUtils.isInteger(value.months)&&value.months>=0||Jsonix.Util.NumberUtils.isInteger(value.days)&&value.days>=0||Jsonix.Util.NumberUtils.isInteger(value.hours)&&value.hours>=0||Jsonix.Util.NumberUtils.isInteger(value.minutes)&&value.minutes>=0||Jsonix.Util.Type.isNumber(value.seconds)&&value.seconds>=0)},validate:function(value){Jsonix.Util.Ensure.ensureObject(value);if(Jsonix.Util.Type.exists(value.sign)){if(!(value.sign===1||value.sign===-1)){throw new Error("Sign of the duration ["+value.sign+"] must be either [1] or [-1].")}}var empty=true;var ifExistsEnsureUnsignedInteger=function(v,message){if(Jsonix.Util.Type.exists(v)){if(!(Jsonix.Util.NumberUtils.isInteger(v)&&v>=0)){throw new Error(message.replace("{0}",v))}else{return true}}else{return false}};var ifExistsEnsureUnsignedNumber=function(v,message){if(Jsonix.Util.Type.exists(v)){if(!(Jsonix.Util.Type.isNumber(v)&&v>=0)){throw new Error(message.replace("{0}",v))}else{return true}}else{return false}};empty=empty&&!ifExistsEnsureUnsignedInteger(value.years,"Number of years [{0}] must be an unsigned integer.");empty=empty&&!ifExistsEnsureUnsignedInteger(value.months,"Number of months [{0}] must be an unsigned integer.");empty=empty&&!ifExistsEnsureUnsignedInteger(value.days,"Number of days [{0}] must be an unsigned integer.");empty=empty&&!ifExistsEnsureUnsignedInteger(value.hours,"Number of hours [{0}] must be an unsigned integer.");empty=empty&&!ifExistsEnsureUnsignedInteger(value.minutes,"Number of minutes [{0}] must be an unsigned integer.");empty=empty&&!ifExistsEnsureUnsignedNumber(value.seconds,"Number of seconds [{0}] must be an unsigned number.");if(empty){throw new Error("At least one of the components (years, months, days, hours, minutes, seconds) must be set.")}},print:function(value,context,output,scope){this.validate(value);var result="";if(value.sign===-1){result+="-"}result+="P";if(value.years){result+=value.years+"Y"}if(value.months){result+=value.months+"M"}if(value.days){result+=value.days+"D"}if(value.hours||value.minutes||value.seconds){result+="T";if(value.hours){result+=value.hours+"H"}if(value.minutes){result+=value.minutes+"M"}if(value.seconds){result+=value.seconds+"S"}}return result},parse:function(value,context,input,scope){var durationExpression=new RegExp("^"+Jsonix.Schema.XSD.Duration.PATTERN+"$");var results=value.match(durationExpression);if(results!==null){var empty=true;var duration={};if(results[1]){duration.sign=-1}if(results[3]){duration.years=parseInt(results[3],10);empty=false}if(results[5]){duration.months=parseInt(results[5],10);empty=false}if(results[7]){duration.days=parseInt(results[7],10);empty=false}if(results[10]){duration.hours=parseInt(results[10],10);empty=false}if(results[12]){duration.minutes=parseInt(results[12],10);empty=false}if(results[14]){duration.seconds=Number(results[14]);empty=false}return duration}else{throw new Error("Value ["+value+"] does not match the duration pattern.")}},CLASS_NAME:"Jsonix.Schema.XSD.Duration"});Jsonix.Schema.XSD.Duration.PATTERN="(-)?P(([0-9]+)Y)?(([0-9]+)M)?(([0-9]+)D)?(T(([0-9]+)H)?(([0-9]+)M)?(([0-9]+(\\.[0-9]+)?)S)?)?";Jsonix.Schema.XSD.Duration.INSTANCE=new Jsonix.Schema.XSD.Duration;Jsonix.Schema.XSD.Duration.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Duration.INSTANCE);Jsonix.Schema.XSD.DateTime=Jsonix.Class(Jsonix.Schema.XSD.Calendar,{name:"DateTime",typeName:Jsonix.Schema.XSD.qname("dateTime"),parse:function(value,context,input,scope){var calendar=this.parseDateTime(value);var date=new Date;date.setFullYear(calendar.year);date.setMonth(calendar.month-1);date.setDate(calendar.day);date.setHours(calendar.hour);date.setMinutes(calendar.minute);date.setSeconds(calendar.second);if(Jsonix.Util.Type.isNumber(calendar.fractionalSecond)){date.setMilliseconds(Math.floor(1e3*calendar.fractionalSecond))}var timezone;var unknownTimezone;var localTimezone=-date.getTimezoneOffset();if(Jsonix.Util.NumberUtils.isInteger(calendar.timezone)){timezone=calendar.timezone;unknownTimezone=false}else{timezone=localTimezone;unknownTimezone=true}var result=new Date(date.getTime()+6e4*(-timezone+localTimezone));if(unknownTimezone){result.originalTimezone=null}else{result.originalTimezone=calendar.timezone}return result},print:function(value,context,output,scope){Jsonix.Util.Ensure.ensureDate(value);var timezone;var localTimezone=-value.getTimezoneOffset();var correctedValue;if(value.originalTimezone===null){return this.printDateTime(new Jsonix.XML.Calendar({year:value.getFullYear(),month:value.getMonth()+1,day:value.getDate(),hour:value.getHours(),minute:value.getMinutes(),second:value.getSeconds(),fractionalSecond:value.getMilliseconds()/1e3}))}else{if(Jsonix.Util.NumberUtils.isInteger(value.originalTimezone)){timezone=value.originalTimezone;correctedValue=new Date(value.getTime()-6e4*(-timezone+localTimezone))}else{timezone=localTimezone;correctedValue=value}var x=this.printDateTime(new Jsonix.XML.Calendar({year:correctedValue.getFullYear(),month:correctedValue.getMonth()+1,day:correctedValue.getDate(),hour:correctedValue.getHours(),minute:correctedValue.getMinutes(),second:correctedValue.getSeconds(),fractionalSecond:correctedValue.getMilliseconds()/1e3,timezone:timezone}));return x}},isInstance:function(value,context,scope){return Jsonix.Util.Type.isDate(value)},CLASS_NAME:"Jsonix.Schema.XSD.DateTime"});Jsonix.Schema.XSD.DateTime.INSTANCE=new Jsonix.Schema.XSD.DateTime;Jsonix.Schema.XSD.DateTime.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.DateTime.INSTANCE);Jsonix.Schema.XSD.Time=Jsonix.Class(Jsonix.Schema.XSD.Calendar,{name:"Time",typeName:Jsonix.Schema.XSD.qname("time"),parse:function(value,context,input,scope){var calendar=this.parseTime(value);var date=new Date;date.setFullYear(1970);date.setMonth(0);date.setDate(1);date.setHours(calendar.hour);date.setMinutes(calendar.minute);date.setSeconds(calendar.second);if(Jsonix.Util.Type.isNumber(calendar.fractionalSecond)){date.setMilliseconds(Math.floor(1e3*calendar.fractionalSecond))}var timezone;var unknownTimezone;var localTimezone=-date.getTimezoneOffset();if(Jsonix.Util.NumberUtils.isInteger(calendar.timezone)){timezone=calendar.timezone;unknownTimezone=false}else{timezone=localTimezone;unknownTimezone=true}var result=new Date(date.getTime()+6e4*(-timezone+localTimezone));if(unknownTimezone){result.originalTimezone=null}else{result.originalTimezone=timezone}return result},print:function(value,context,output,scope){Jsonix.Util.Ensure.ensureDate(value);var time=value.getTime();if(time<=-864e5&&time>=864e5){throw new Error("Invalid time ["+value+"].")}if(value.originalTimezone===null){return this.printTime(new Jsonix.XML.Calendar({hour:value.getHours(),minute:value.getMinutes(),second:value.getSeconds(),fractionalSecond:value.getMilliseconds()/1e3}))}else{var correctedValue;var timezone;var localTimezone=-value.getTimezoneOffset();if(Jsonix.Util.NumberUtils.isInteger(value.originalTimezone)){timezone=value.originalTimezone;correctedValue=new Date(value.getTime()-6e4*(-timezone+localTimezone))}else{timezone=localTimezone;correctedValue=value}var correctedTime=correctedValue.getTime();if(correctedTime>=0){return this.printTime(new Jsonix.XML.Calendar({hour:correctedValue.getHours(),minute:correctedValue.getMinutes(),second:correctedValue.getSeconds(),fractionalSecond:correctedValue.getMilliseconds()/1e3,timezone:timezone}))}else{var timezoneHours=Math.ceil(-correctedTime/36e5);return this.printTime(new Jsonix.XML.Calendar({hour:(correctedValue.getHours()+timezoneHours-timezone/60)%24,minute:correctedValue.getMinutes(),second:correctedValue.getSeconds(),fractionalSecond:correctedValue.getMilliseconds()/1e3,timezone:timezoneHours*60}))}}},isInstance:function(value,context,scope){return Jsonix.Util.Type.isDate(value)&&value.getTime()>-864e5&&value.getTime()<864e5},CLASS_NAME:"Jsonix.Schema.XSD.Time"});Jsonix.Schema.XSD.Time.INSTANCE=new Jsonix.Schema.XSD.Time;Jsonix.Schema.XSD.Time.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Time.INSTANCE);Jsonix.Schema.XSD.Date=Jsonix.Class(Jsonix.Schema.XSD.Calendar,{name:"Date",typeName:Jsonix.Schema.XSD.qname("date"),parse:function(value,context,input,scope){var calendar=this.parseDate(value);var date=new Date;date.setFullYear(calendar.year);date.setMonth(calendar.month-1);date.setDate(calendar.day);date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0);if(Jsonix.Util.Type.isNumber(calendar.fractionalSecond)){date.setMilliseconds(Math.floor(1e3*calendar.fractionalSecond))}var timezone;var unknownTimezone;var localTimezone=-date.getTimezoneOffset();if(Jsonix.Util.NumberUtils.isInteger(calendar.timezone)){timezone=calendar.timezone;unknownTimezone=false}else{timezone=localTimezone;unknownTimezone=true}var result=new Date(date.getTime()+6e4*(-timezone+localTimezone));if(unknownTimezone){result.originalTimezone=null}else{result.originalTimezone=timezone}return result},print:function(value,context,output,scope){Jsonix.Util.Ensure.ensureDate(value);var localDate=new Date(value.getTime());localDate.setHours(0);localDate.setMinutes(0);localDate.setSeconds(0);localDate.setMilliseconds(0);if(value.originalTimezone===null){return this.printDate(new Jsonix.XML.Calendar({year:value.getFullYear(),month:value.getMonth()+1,day:value.getDate()}))}else{if(Jsonix.Util.NumberUtils.isInteger(value.originalTimezone)){var correctedValue=new Date(value.getTime()-6e4*(-value.originalTimezone-value.getTimezoneOffset()));return this.printDate(new Jsonix.XML.Calendar({year:correctedValue.getFullYear(),month:correctedValue.getMonth()+1,day:correctedValue.getDate(),timezone:value.originalTimezone}))}else{var localTimezone=-value.getTime()+localDate.getTime();if(localTimezone===0){return this.printDate(new Jsonix.XML.Calendar({year:value.getFullYear(),month:value.getMonth()+1,day:value.getDate()}))}else{var timezone=localTimezone-6e4*value.getTimezoneOffset();if(timezone>=-432e5){return this.printDate(new Jsonix.XML.Calendar({year:value.getFullYear(),month:value.getMonth()+1,day:value.getDate(),timezone:Math.floor(timezone/6e4)}))}else{var nextDay=new Date(value.getTime()+864e5);return this.printDate(new Jsonix.XML.Calendar({year:nextDay.getFullYear(),month:nextDay.getMonth()+1,day:nextDay.getDate(),timezone:Math.floor(timezone/6e4)+1440}))}}}}},isInstance:function(value,context,scope){return Jsonix.Util.Type.isDate(value)},CLASS_NAME:"Jsonix.Schema.XSD.Date"});Jsonix.Schema.XSD.Date.INSTANCE=new Jsonix.Schema.XSD.Date;Jsonix.Schema.XSD.Date.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Date.INSTANCE);Jsonix.Schema.XSD.GYearMonth=Jsonix.Class(Jsonix.Schema.XSD.Calendar,{name:"GYearMonth",typeName:Jsonix.Schema.XSD.qname("gYearMonth"),CLASS_NAME:"Jsonix.Schema.XSD.GYearMonth",parse:function(value,context,input,scope){return this.parseGYearMonth(value,context,input,scope)},print:function(value,context,output,scope){return this.printGYearMonth(value,context,output,scope)}});Jsonix.Schema.XSD.GYearMonth.INSTANCE=new Jsonix.Schema.XSD.GYearMonth;Jsonix.Schema.XSD.GYearMonth.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.GYearMonth.INSTANCE);Jsonix.Schema.XSD.GYear=Jsonix.Class(Jsonix.Schema.XSD.Calendar,{name:"GYear",typeName:Jsonix.Schema.XSD.qname("gYear"),CLASS_NAME:"Jsonix.Schema.XSD.GYear",parse:function(value,context,input,scope){return this.parseGYear(value,context,input,scope)},print:function(value,context,output,scope){return this.printGYear(value,context,output,scope)}});Jsonix.Schema.XSD.GYear.INSTANCE=new Jsonix.Schema.XSD.GYear;Jsonix.Schema.XSD.GYear.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.GYear.INSTANCE);Jsonix.Schema.XSD.GMonthDay=Jsonix.Class(Jsonix.Schema.XSD.Calendar,{name:"GMonthDay",typeName:Jsonix.Schema.XSD.qname("gMonthDay"),CLASS_NAME:"Jsonix.Schema.XSD.GMonthDay",parse:function(value,context,input,scope){return this.parseGMonthDay(value,context,input,scope)},print:function(value,context,output,scope){return this.printGMonthDay(value,context,output,scope)}});Jsonix.Schema.XSD.GMonthDay.INSTANCE=new Jsonix.Schema.XSD.GMonthDay;Jsonix.Schema.XSD.GMonthDay.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.GMonthDay.INSTANCE);Jsonix.Schema.XSD.GDay=Jsonix.Class(Jsonix.Schema.XSD.Calendar,{name:"GDay",typeName:Jsonix.Schema.XSD.qname("gDay"),CLASS_NAME:"Jsonix.Schema.XSD.GDay",parse:function(value,context,input,scope){return this.parseGDay(value,context,input,scope)},print:function(value,context,output,scope){return this.printGDay(value,context,output,scope)}});Jsonix.Schema.XSD.GDay.INSTANCE=new Jsonix.Schema.XSD.GDay;Jsonix.Schema.XSD.GDay.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.GDay.INSTANCE);Jsonix.Schema.XSD.GMonth=Jsonix.Class(Jsonix.Schema.XSD.Calendar,{name:"GMonth",typeName:Jsonix.Schema.XSD.qname("gMonth"),CLASS_NAME:"Jsonix.Schema.XSD.GMonth",parse:function(value,context,input,scope){return this.parseGMonth(value,context,input,scope)},print:function(value,context,output,scope){return this.printGMonth(value,context,output,scope)}});Jsonix.Schema.XSD.GMonth.INSTANCE=new Jsonix.Schema.XSD.GMonth;Jsonix.Schema.XSD.GMonth.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.GMonth.INSTANCE);Jsonix.Schema.XSD.ID=Jsonix.Class(Jsonix.Schema.XSD.String,{name:"ID",typeName:Jsonix.Schema.XSD.qname("ID"),CLASS_NAME:"Jsonix.Schema.XSD.ID"});Jsonix.Schema.XSD.ID.INSTANCE=new Jsonix.Schema.XSD.ID;Jsonix.Schema.XSD.ID.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.ID.INSTANCE);Jsonix.Schema.XSD.IDREF=Jsonix.Class(Jsonix.Schema.XSD.String,{name:"IDREF",typeName:Jsonix.Schema.XSD.qname("IDREF"),CLASS_NAME:"Jsonix.Schema.XSD.IDREF"});Jsonix.Schema.XSD.IDREF.INSTANCE=new Jsonix.Schema.XSD.IDREF;Jsonix.Schema.XSD.IDREF.INSTANCE.LIST=new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.IDREF.INSTANCE);Jsonix.Schema.XSD.IDREFS=Jsonix.Class(Jsonix.Schema.XSD.List,{name:"IDREFS",initialize:function(){Jsonix.Schema.XSD.List.prototype.initialize.apply(this,[Jsonix.Schema.XSD.IDREF.INSTANCE,Jsonix.Schema.XSD.qname("IDREFS")," "])},CLASS_NAME:"Jsonix.Schema.XSD.IDREFS"});Jsonix.Schema.XSD.IDREFS.INSTANCE=new Jsonix.Schema.XSD.IDREFS;Jsonix.Schema.XSI={};Jsonix.Schema.XSI.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema-instance";Jsonix.Schema.XSI.PREFIX="xsi";Jsonix.Schema.XSI.TYPE="type";Jsonix.Schema.XSI.NIL="nil";Jsonix.Schema.XSI.qname=function(localPart){Jsonix.Util.Ensure.ensureString(localPart);return new Jsonix.XML.QName(Jsonix.Schema.XSI.NAMESPACE_URI,localPart,Jsonix.Schema.XSI.PREFIX)};Jsonix.Schema.XSI.TYPE_QNAME=Jsonix.Schema.XSI.qname(Jsonix.Schema.XSI.TYPE);Jsonix.Context=Jsonix.Class(Jsonix.Mapping.Styled,{modules:[],typeInfos:null,typeNameKeyToTypeInfo:null,elementInfos:null,options:null,substitutionMembersMap:null,scopedElementInfosMap:null,supportXsiType:true,initialize:function(mappings,options){Jsonix.Mapping.Styled.prototype.initialize.apply(this,[options]);this.modules=[];this.elementInfos=[];this.typeInfos={};this.typeNameKeyToTypeInfo={};this.registerBuiltinTypeInfos();this.namespacePrefixes={};this.prefixNamespaces={};this.substitutionMembersMap={};this.scopedElementInfosMap={};if(Jsonix.Util.Type.exists(options)){Jsonix.Util.Ensure.ensureObject(options);if(Jsonix.Util.Type.isObject(options.namespacePrefixes)){this.namespacePrefixes=Jsonix.Util.Type.cloneObject(options.namespacePrefixes,{})}if(Jsonix.Util.Type.isBoolean(options.supportXsiType)){this.supportXsiType=options.supportXsiType}}for(var ns in this.namespacePrefixes){if(this.namespacePrefixes.hasOwnProperty(ns)){p=this.namespacePrefixes[ns];this.prefixNamespaces[p]=ns}}if(Jsonix.Util.Type.exists(mappings)){Jsonix.Util.Ensure.ensureArray(mappings);var index,mapping,module;for(index=0;index<mappings.length;index++){mapping=mappings[index];module=this.createModule(mapping);this.modules[index]=module}}this.processModules()},createModule:function(mapping){var module;if(mapping instanceof this.mappingStyle.module){module=mapping}else{mapping=Jsonix.Util.Type.cloneObject(mapping);module=new this.mappingStyle.module(mapping,{mappingStyle:this.mappingStyle})}return module},registerBuiltinTypeInfos:function(){for(var index=0;index<this.builtinTypeInfos.length;index++){this.registerTypeInfo(this.builtinTypeInfos[index])}},processModules:function(){var index,module;for(index=0;index<this.modules.length;index++){module=this.modules[index];module.registerTypeInfos(this)}for(index=0;index<this.modules.length;index++){module=this.modules[index];module.buildTypeInfos(this)}for(index=0;index<this.modules.length;index++){module=this.modules[index];module.registerElementInfos(this)}for(index=0;index<this.modules.length;index++){module=this.modules[index];module.buildElementInfos(this)}},registerTypeInfo:function(typeInfo){Jsonix.Util.Ensure.ensureObject(typeInfo);var n=typeInfo.name||typeInfo.n||null;Jsonix.Util.Ensure.ensureString(n);this.typeInfos[n]=typeInfo;if(typeInfo.typeName&&typeInfo.typeName.key){this.typeNameKeyToTypeInfo[typeInfo.typeName.key]=typeInfo}},resolveTypeInfo:function(mapping,module){if(!Jsonix.Util.Type.exists(mapping)){return null}else if(mapping instanceof Jsonix.Model.TypeInfo){return mapping}else if(Jsonix.Util.Type.isString(mapping)){var typeInfoName;if(mapping.length>0&&mapping.charAt(0)==="."){var n=module.name||module.n||undefined;Jsonix.Util.Ensure.ensureObject(module,"Type info mapping can only be resolved if module is provided.");Jsonix.Util.Ensure.ensureString(n,"Type info mapping can only be resolved if module name is provided.");typeInfoName=n+mapping}else{typeInfoName=mapping}if(!this.typeInfos[typeInfoName]){throw new Error("Type info ["+typeInfoName+"] is not known in this context.")}else{return this.typeInfos[typeInfoName]}}else{Jsonix.Util.Ensure.ensureObject(module,"Type info mapping can only be resolved if module is provided.");var typeInfo=module.createTypeInfo(mapping);typeInfo.build(this,module);return typeInfo}},registerElementInfo:function(elementInfo,module){Jsonix.Util.Ensure.ensureObject(elementInfo);this.elementInfos.push(elementInfo);if(Jsonix.Util.Type.exists(elementInfo.substitutionHead)){var substitutionHead=elementInfo.substitutionHead;var substitutionHeadKey=substitutionHead.key;var substitutionMembers=this.substitutionMembersMap[substitutionHeadKey];if(!Jsonix.Util.Type.isArray(substitutionMembers)){substitutionMembers=[];this.substitutionMembersMap[substitutionHeadKey]=substitutionMembers}substitutionMembers.push(elementInfo)}var scopeKey;if(Jsonix.Util.Type.exists(elementInfo.scope)){scopeKey=this.resolveTypeInfo(elementInfo.scope,module).name}else{scopeKey="##global"}var scopedElementInfos=this.scopedElementInfosMap[scopeKey];if(!Jsonix.Util.Type.isObject(scopedElementInfos)){scopedElementInfos={};this.scopedElementInfosMap[scopeKey]=scopedElementInfos}scopedElementInfos[elementInfo.elementName.key]=elementInfo},getTypeInfoByValue:function(value){if(!Jsonix.Util.Type.exists(value)){return undefined}if(Jsonix.Util.Type.isObject(value)){var typeName=value.TYPE_NAME;if(Jsonix.Util.Type.isString(typeName)){var typeInfoByName=this.getTypeInfoByName(typeName);if(typeInfoByName){return typeInfoByName}}}return undefined},getTypeInfoByName:function(name){return this.typeInfos[name]},getTypeInfoByTypeName:function(typeName){var tn=Jsonix.XML.QName.fromObjectOrString(typeName,this);return this.typeNameKeyToTypeInfo[tn.key]},getTypeInfoByTypeNameKey:function(typeNameKey){return this.typeNameKeyToTypeInfo[typeNameKey]},getElementInfo:function(name,scope){if(Jsonix.Util.Type.exists(scope)){var scopeKey=scope.name;var scopedElementInfos=this.scopedElementInfosMap[scopeKey];if(Jsonix.Util.Type.exists(scopedElementInfos)){var scopedElementInfo=scopedElementInfos[name.key];if(Jsonix.Util.Type.exists(scopedElementInfo)){return scopedElementInfo}}}var globalScopeKey="##global";var globalScopedElementInfos=this.scopedElementInfosMap[globalScopeKey];if(Jsonix.Util.Type.exists(globalScopedElementInfos)){var globalScopedElementInfo=globalScopedElementInfos[name.key];if(Jsonix.Util.Type.exists(globalScopedElementInfo)){return globalScopedElementInfo
}}return null},getSubstitutionMembers:function(name){return this.substitutionMembersMap[Jsonix.XML.QName.fromObject(name).key]},createMarshaller:function(){return new this.mappingStyle.marshaller(this)},createUnmarshaller:function(){return new this.mappingStyle.unmarshaller(this)},getNamespaceURI:function(prefix){Jsonix.Util.Ensure.ensureString(prefix);return this.prefixNamespaces[prefix]},getPrefix:function(namespaceURI,defaultPrefix){Jsonix.Util.Ensure.ensureString(namespaceURI);var prefix=this.namespacePrefixes[namespaceURI];if(Jsonix.Util.Type.isString(prefix)){return prefix}else{return defaultPrefix}},builtinTypeInfos:[Jsonix.Schema.XSD.AnyType.INSTANCE,Jsonix.Schema.XSD.AnyURI.INSTANCE,Jsonix.Schema.XSD.Base64Binary.INSTANCE,Jsonix.Schema.XSD.Boolean.INSTANCE,Jsonix.Schema.XSD.Byte.INSTANCE,Jsonix.Schema.XSD.Calendar.INSTANCE,Jsonix.Schema.XSD.Date.INSTANCE,Jsonix.Schema.XSD.DateTime.INSTANCE,Jsonix.Schema.XSD.Decimal.INSTANCE,Jsonix.Schema.XSD.Double.INSTANCE,Jsonix.Schema.XSD.Duration.INSTANCE,Jsonix.Schema.XSD.Float.INSTANCE,Jsonix.Schema.XSD.GDay.INSTANCE,Jsonix.Schema.XSD.GMonth.INSTANCE,Jsonix.Schema.XSD.GMonthDay.INSTANCE,Jsonix.Schema.XSD.GYear.INSTANCE,Jsonix.Schema.XSD.GYearMonth.INSTANCE,Jsonix.Schema.XSD.HexBinary.INSTANCE,Jsonix.Schema.XSD.ID.INSTANCE,Jsonix.Schema.XSD.IDREF.INSTANCE,Jsonix.Schema.XSD.IDREFS.INSTANCE,Jsonix.Schema.XSD.Int.INSTANCE,Jsonix.Schema.XSD.Integer.INSTANCE,Jsonix.Schema.XSD.Language.INSTANCE,Jsonix.Schema.XSD.Long.INSTANCE,Jsonix.Schema.XSD.Name.INSTANCE,Jsonix.Schema.XSD.NCName.INSTANCE,Jsonix.Schema.XSD.NegativeInteger.INSTANCE,Jsonix.Schema.XSD.NMToken.INSTANCE,Jsonix.Schema.XSD.NMTokens.INSTANCE,Jsonix.Schema.XSD.NonNegativeInteger.INSTANCE,Jsonix.Schema.XSD.NonPositiveInteger.INSTANCE,Jsonix.Schema.XSD.NormalizedString.INSTANCE,Jsonix.Schema.XSD.Number.INSTANCE,Jsonix.Schema.XSD.PositiveInteger.INSTANCE,Jsonix.Schema.XSD.QName.INSTANCE,Jsonix.Schema.XSD.Short.INSTANCE,Jsonix.Schema.XSD.String.INSTANCE,Jsonix.Schema.XSD.Strings.INSTANCE,Jsonix.Schema.XSD.Time.INSTANCE,Jsonix.Schema.XSD.Token.INSTANCE,Jsonix.Schema.XSD.UnsignedByte.INSTANCE,Jsonix.Schema.XSD.UnsignedInt.INSTANCE,Jsonix.Schema.XSD.UnsignedLong.INSTANCE,Jsonix.Schema.XSD.UnsignedShort.INSTANCE],CLASS_NAME:"Jsonix.Context"});return{Jsonix:Jsonix}};if(typeof require==="function"){mydomparser(exports,require);var Jsonix=_jsonix_factory(exports).Jsonix}